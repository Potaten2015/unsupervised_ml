(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+2T6":function(e,t,s){"use strict";s.r(t)},"+49V":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("2yjE"));s("Udwz");const o=s("8unJ");t.QuestionPoolQuestionHeaderEditMode=e=>{const{localize:t,questionSourceName:s}=e;return a.default.createElement("div",{className:"question-pool-question-header question-pool-question-header--edit"},a.default.createElement(i.default,Object.assign({},e,{showPointsInfo:!1})),a.default.createElement("div",{className:"question-pool-question-header__question-source"},t.translate("questionPools.questionHeader.questionSource",{questionSourceName:s})))},t.default=o.localizedComponentWrapper(t.QuestionPoolQuestionHeaderEditMode)},"+4s7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("np6O"),i=s("/n7R");t.default=e=>{const{tooltip:t,activeTooltip:s,onClick:o,analyticsId:r}=e,[l,u]=(()=>{const[e,t]=n.useState(!1);return[e,n.useCallback(()=>{t(!0),setTimeout(()=>t(!1),3e3)},[])]})(),c=n.useCallback(e=>{u(),null==o||o(e)},[u,o]);return n.createElement(i.AnalyticsTooltip,{analyticsId:`${r}.tooltip`,title:l?s:t},n.createElement(a.AnalyticsIconButton,{onClick:c,analyticsId:r,"aria-label":t},e.children))}},"/Lwm":function(e,t,s){"use strict";s.r(t)},"/R3Y":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n="...";t.truncateString=function(e,t){return null==e||0===e.length?e:`${e.substr(0,t)}${n}`},t.removeExtraWhitespace=function(e){return e.trim().replace(/\s+/g," ")}},"/gJS":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>({accessCodeClass:{fontSize:e.typography.fontSizeXXLarge,fontWeight:e.typography.fontWeightLight,letterSpacing:"6px"},highlightClass:{color:e.palette.focus.main},noHighlightClass:{color:e.palette.text.primary,transition:"color 1s"}}))},"/oLw":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("Begd"),r=s("0x+l"),l=s("WDMa"),u=s("E1pj"),c=s("myse"),d=n.__importDefault(s("Ucbz")),p=n.__importDefault(s("vUO3")),m=n.__importDefault(s("fCe2")),h=n.__importDefault(s("nwoY"));s("jJem");class f extends a.Component{constructor(e){super(e),this.filterButtonFTUEElement=null,this.toggleFilterPanel=()=>{this.setState(e=>({isShowingFilterPanel:!e.isShowingFilterPanel}))},this.state={isShowingFilterPanel:!e.UltraWindowSize.isSmallBreakpoint()}}render(){const{children:e,criteriaConfig:t,zeroResultsEmptyStateProps:s,id:n,isLoading:i,localize:u,onClearCriteria:f,resultsCount:g,analyticsEventAugmentor:E}=this.props,{isShowingFilterPanel:_}=this.state,b=0===g,y=_?"--on":"--off",C=m.default(t).length,w=u.translate("questionPicker.componentHeader.filterButton",{criteriaCount:C}),v=`${n}-filter-list-criteria`,S=E(c.AnalyticsEventTypes.CLICK_EVENT,this.toggleFilterPanel,"questionPicker.componentHeader.filterButton.toggleFilterPanel.button"),P=u.translate("questionPicker.componentHeader.results",{count:g});return a.default.createElement("div",{className:`filter-list filter-list${y}`},a.default.createElement("div",{className:"filter-list__header"},a.default.createElement("button",{className:`filter-list__filter-button js-filter-button filter-list__filter-button${y}`,onClick:S,"data-analytics-id":"questionPicker.componentHeader.filterButton.toggleFilterPanel.button",ref:e=>{this.filterButtonFTUEElement=e},"aria-expanded":_,"aria-controls":v},a.default.createElement(r.FilterOptions,{className:`filter-list__filter-icon filter-list__filter-icon${y}`}),a.default.createElement("span",{dangerouslySetInnerHTML:{__html:w}})),a.default.createElement("span",{className:"filter-list__filter-results"},P),!_&&a.default.createElement(p.default,{ftueKey:`ftue.${n}.filterPanel.visited`,ftueElement:this.filterButtonFTUEElement,ftueMessageKey:"questionPicker.filterPanel.FTUE"})),a.default.createElement("div",{className:"filter-list__content"},a.default.createElement("div",{id:v,className:"filter-list__criteria"},a.default.createElement(d.default,{criteriaConfig:t,onClearCriteria:f,onPanelClose:this.toggleFilterPanel,isOpen:_})),a.default.createElement("div",{className:"filter-list__items-container"},i&&a.default.createElement(l.Overlay,{className:"filter-list__overlay"},a.default.createElement(o.Spinner,{className:"filter-list__spinner",size:o.SpinnerSize.large})),a.default.createElement("div",{className:"filter-list__items"},!b&&a.default.cloneElement(a.default.Children.only(e),{isShowingFilterPanel:_}),b&&!i&&a.default.createElement(h.default,Object.assign({},s,{showFilterPanelButton:!_,onFilterPanelToggle:this.toggleFilterPanel}))))),!b&&a.default.createElement("span",{role:"status",className:"sr-only"},P))}}t.UnwrappedFilterList=f,t.default=c.withAnalytics(u.windowResizingResponsiveComponentWrapper(i.localizedComponentWrapper(f)))},"/rnO":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("juaI");t.default=n.default},"/zhm":function(e,t,s){"use strict";s.r(t)},"0JkB":function(e,t,s){"use strict";s.r(t)},"0fHu":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({controlsContainer:{display:"flex"},column:{display:"flex",width:"50%"},filterButtonSection:{[e.breakpoints.up("md")]:{justifyContent:"center"}},rightSection:{justifyContent:"flex-end"}}))},"10dR":function(e,t,s){"use strict";s.r(t)},"1Qsi":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Tibe");t.QuestionBlockQuestion=n.default;var a=s("Ag5V");t.QuestionBlockQuestionEdit=a.default;var i=s("VlbA");t.QuestionBlockQuestionRead=i.default},"1S7Y":function(e,t,s){"use strict";s.r(t)},"1XAg":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("uh+7"));s("Nr1y");t.default=({question:e,answersInfo:t})=>a.default.createElement("div",{className:"readonly-calculated-formula-question"},a.default.createElement("div",{className:"readonly-answer__main"},a.default.createElement(i.default,{question:e})),t&&a.default.createElement("div",{className:"readonly-answer__info readonly-calculated-formula-question__info"},a.default.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[0]),a.default.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[1]),a.default.createElement("div",{className:"readonly-calculated-formula-question__info-section"},t[2])))},"1Xy2":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noPartialCredit="noPartialCredit",t.partialCreditNoPenalty="partialCreditNoPenalty",t.partialCreditWithPenalty="partialCreditWithPenalty",t.partialCreditOverallNegative="partialCreditOverallNegative",t.scoringOptions=[{key:t.partialCreditNoPenalty},{key:t.noPartialCredit},{key:t.partialCreditWithPenalty},{key:t.partialCreditOverallNegative}],t.getSelectedScoringOption=function({allowPartialCredit:e,allowNegativeScoreForIncorrectAnswers:s,allowNegativeOverallScore:n}){return e?n?t.scoringOptions.find(e=>e.key===t.partialCreditOverallNegative):s?t.scoringOptions.find(e=>e.key===t.partialCreditWithPenalty):t.scoringOptions.find(e=>e.key===t.partialCreditNoPenalty):t.scoringOptions.find(e=>e.key===t.noPartialCredit)}},"2L3Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("3/0u"),i=s("G0uU"),o=s("8unJ"),r=s("caKH");t.QuestionPoolPanelCloseDialog=e=>{const{closePanel:t,localize:s,setCloseDialogVisibility:o}=e;return n.default.createElement(r.UltraModalDialog,{onDismiss:()=>o(!1),hidden:!1,dialogContentProps:{title:s.translate("questionPools.panelCloseDialog.title"),subText:s.translate("questionPools.panelCloseDialog.instructions")},modalProps:{className:"question-pool-panel-close-dialog"},analyticsId:"questionPools.panelCloseDialog.dialog"},n.default.createElement(a.DialogFooter,null,n.default.createElement(i.DefaultButton,{onClick:()=>o(!1),text:s.translate("questionPools.panelCloseDialog.cancel"),analyticsId:"questionPools.panelCloseDialog.cancel.button"}),n.default.createElement(i.PrimaryButton,{onClick:()=>t(),text:s.translate("questionPools.panelCloseDialog.close"),analyticsId:"questionPools.panelCloseDialog.close.button"})))},t.default=o.localizedComponentWrapper(t.QuestionPoolPanelCloseDialog)},"2UXq":function(e,t,s){"use strict";s.r(t)},"2cC3":function(e,t){},"2kfE":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("p0wN");t.default=n.default},"2xrW":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),i=s("8unJ");t.default=e=>{const{type:t,messageSubkey:s}=(e=>0===e.copiesFailed?{type:a.NotificationType.Success,messageSubkey:"success"}:{type:a.NotificationType.Failure,messageSubkey:0===e.copiesSucceeded?"failure":"error"})(e.copyStatus);return{positionAfter:e.positionAfter,type:t,Component:i.localizedComponentWrapper(i=>{const{localize:o}=i,r=(e=>`questionReuse.copyResult.${e}`)(s),l=null!=e.autoDismiss&&!e.autoDismiss;return n.default.createElement("div",{className:"question-reuse-notification-wrapper"},n.default.createElement(a.Notification,{type:t,message:o.translate(r,e.copyStatus),disableAutoDismiss:l,onClose:e.dismissNotification}))})}}},"2yjE":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),i=s("MC1S"),o=s("E1pj"),r=s("myse"),l=s("8jBL"),u=s("JfV0"),c=s("ZQFV"),d=s("gTAB");s("2UXq"),t.QUESTION_TITLE_ID_PREFIX="question-header__title";const p="question-header__";class m extends n.Component{constructor(e){super(e),this.pointsInput=n.default.createRef(),this.titleRef=n.default.createRef(),this.focusPointsInput=()=>{this.pointsInput.current&&this.pointsInput.current.focus()},this.handlePointsClick=()=>{this.canEnterEditMode&&this.props.onPointsClick()},this.handleOpenGoalsIconClick=()=>{this.props.openGoals&&this.props.hasQuestionEditPermissions&&!this.props.hasSubmissions&&this.props.openGoals()},this.onFullCreditChange=(e,t)=>{this.props.onQuestionChange({...this.props.question,fullCredit:t})},this.onPointsChange=e=>{const t={...this.props.question};u.Questions.isQuestionBlock(this.props.question)?t.pointsPerQuestion=e:t.points=e,this.props.onQuestionChange(t)},this.renderRegradeCheckbox=()=>{const{editMode:e,hasQuestionEditPermissions:t,hasSubmissions:s,hideFullCreditCheckbox:a,localize:o,question:r}=this.props,{showFullCreditCheckboxWhenNoSubmissions:l}=this.state,u=o.translate("assessments.canvas.question.header.fullCredit"),c=d.EditModeEnum.ACTIVE===e;return!a&&t&&c&&(s||l)?n.default.createElement("div",{className:`${p}full-credit`},n.default.createElement(i.Checkbox,{checked:r.fullCredit,onChange:this.onFullCreditChange,ariaLabel:u,label:u,analyticsId:"questionPools.fullCredit.checkBox"})):null},this.state={showFullCreditCheckboxWhenNoSubmissions:e.giveFullCredit}}static getDerivedStateFromProps(e){return d.EditModeEnum.INACTIVE!==e.editMode||e.giveFullCredit||e.hasSubmissions?null:{showFullCreditCheckboxWhenNoSubmissions:!1}}componentDidMount(){this.props.focusTitle&&this.titleRef.current&&this.titleRef.current.focus()}componentDidUpdate(e){const{editMode:t,focusTitle:s}=this.props,{editMode:n,focusTitle:a}=e;d.EditModeEnum.INACTIVE===n&&d.EditModeEnum.ACTIVE===t&&this.focusPointsInput(),!a&&s&&this.titleRef.current&&this.titleRef.current.focus()}get canEnterEditMode(){return this.props.onPointsClick&&this.props.canEnterEditMode}getGrade(){const{points:e,question:t}=this.props;return{value:e,unit:u.Questions.isQuestionBlock(t)?c.GradingUnit.PointsEach:c.GradingUnit.Points}}renderPointsInfo(){const{editMode:e,hasQuestionEditPermissions:t,id:s,question:a,localize:i,questionTitle:o,showPointsInfo:l,hideEditPoints:m,analyticsEventAugmentor:h,disableInteraction:f}=this.props;if(!1!==l){const l=!!f||void 0,g=`question-points-${s}`,E=d.EditModeEnum.ACTIVE===e,_=!t,b=t&&!E,y=t&&E,C=u.Questions.isQuestionBlock(a),w=()=>{const e=`assessments.canvas.question.header.edit.ariaLabel.${C?"block":"question"}`,t=i.translate(e,{questionTitle:o}),s=this.canEnterEditMode?`${p}pill--clickable`:"",a=`${e}.gradepill`,u=h(r.AnalyticsEventTypes.CLICK_EVENT,this.handlePointsClick,e),{value:d,unit:m}=this.getGrade();return n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{"data-analytics-id":e,id:g,onClick:u,className:`${p}pill-wrapper ${s}`},n.default.createElement(c.GradePill,{variant:c.GradePillType.UnitBased,grade:d,unit:m,ariaLabel:t,ariaHidden:l,ariaDescribedBy:g,analyticsId:a})))},v=()=>{const e=`points-input${s}`,{value:t,unit:a}=this.getGrade(),r=`assessments.canvas.question.header.edit.ariaLabel.${C?"block":"question"}`,u=i.translate(r,{questionTitle:o}),d=`${r}.gradepill`;return n.default.createElement("div",{className:`${p}points`},n.default.createElement(c.GradePill,{id:e,variant:c.GradePillType.UnitBased,grade:t,emptyGradeNotAllowed:!0,unit:a,onBlur:this.onPointsChange,hasFocus:!0,ariaLabel:u,ariaHidden:l,analyticsId:d}))};if(_||b)return w();if(y&&!m)return v()}return null}render(){const{disableFocus:e,disableInteraction:s,editMode:a,goalAriaLabel:o,hasAlignedGoals:r,question:c,localize:m,UltraWindowSize:h}=this.props,f=d.EditModeEnum.ACTIVE===a,g=u.Questions.isQuestionBlock(c),E=`${p}regrading`,_=f?`${p}edit`:"",b=!!c.fullCredit,y=!f&&b,C=y?n.default.createElement("span",{className:`${p}full-credit-label`},m.translate("assessments.canvas.question.header.fullCreditLabel")):null,w=h.isSmallBreakpoint(),v=n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:`${p}title-container`},n.default.createElement("h3",{id:`${t.QUESTION_TITLE_ID_PREFIX}${this.props.id}`,className:`${p}title`,ref:this.titleRef,tabIndex:-1},this.props.questionTitle),g&&!f&&n.default.createElement("div",{className:`${p}pool-indicator`},m.translate("assessments.canvas.question.header.poolIndicator"))),r&&n.default.createElement(i.IconButton,{icon:n.default.createElement(l.Goal,null),className:`${p}goal-icon-button`,onClick:this.handleOpenGoalsIconClick,ariaLabel:o,disabled:e,href:"#","aria-hidden":s?"true":void 0,removedFromTabOrder:s,analyticsId:"assessments.canvas.question.header.goalIcon.button"}));return n.default.createElement("div",{className:`question-header ${E} ${_}`},w&&n.default.createElement(n.default.Fragment,null,!y&&n.default.createElement(n.default.Fragment,null,v,this.renderRegradeCheckbox(),this.renderPointsInfo()),y&&n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:`${p}column ${p}first-column`},v),n.default.createElement("div",{className:`${p}column ${p}secondary-column`},C,this.renderPointsInfo()))),!w&&n.default.createElement(n.default.Fragment,null,v,C,this.renderRegradeCheckbox(),this.renderPointsInfo()))}}t.UnwrappedQuestionHeader=a.localizedComponentWrapper(m),t.default=o.windowResizingResponsiveComponentWrapper(r.withAnalytics(t.UnwrappedQuestionHeader))},"391C":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("8unJ"),i=s("MC1S"),o=s("0x+l");s("ztHM");const r=e=>{const{localize:t,onRemove:s,pairNumber:a,isReadOnly:r}=e;return n.default.createElement("div",{className:`matching-prompt-reused-answer ${r?"":" matching-prompt-reused-answer--edit"}`},n.default.createElement(o.Reuse,{className:"matching-prompt-reused-answer__icon"}),n.default.createElement("span",null,t.translate("assessments.canvas.question.matching.reusedAnswer",{pairNumber:a})),!r&&n.default.createElement(i.IconButton,{className:"matching-prompt-reused-answer__remove-button",icon:n.default.createElement(o.Clear,null),onClick:s,title:t.translate("assessments.canvas.question.matching.removeReusedAnswer",{pairNumber:a}),analyticsId:"assessments.canvas.question.matching.removeReUsedAnswer"}))};t.UnwrappedMatchingAnswerReused=r,t.default=a.localizedComponentWrapper(r)},"3ANQ":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("MC1S"),i=s("IzIX"),o=s("0x+l");s("QpzK");class r extends n.PureComponent{constructor(e){super(e),this.inlineAddButton=null,this.focus=()=>{this.inlineAddButton&&this.inlineAddButton.focus()},this.open=()=>{this.props.onToggleAddMenu(this,this.props.index)},this.close=()=>{this.props.onDismissAddMenu()},this.onClick=e=>{e.stopPropagation(),this.props.isMenuOpen?this.close():this.open()},this.onMouseOver=()=>{this.setState({isMouseOver:!0})},this.onMouseOut=()=>{this.setState({isMouseOver:!1})},this.onKeyboardFocus=()=>{this.setState({isKeyboardFocused:!0})},this.onKeyboardBlur=()=>{this.setState({isKeyboardFocused:!1})},this.getIcon=()=>this.props.isMenuOpen||this.state.isMouseOver||this.state.isKeyboardFocused?n.default.createElement(i.FilledAdd,null):n.default.createElement(o.Add,null),this.getIconClass=()=>{let e="create-new-bar";return this.props.isMenuOpen&&(e+=" -open -focused"),(this.state.isMouseOver||this.state.isKeyboardFocused)&&(e+=" -focused"),this.props.isBlankCanvas&&(e+=" -blank"),this.props.show||(e+=" -hidden"),e},this.setInlineButtonRef=e=>{this.inlineAddButton=e._buttonElement},this.state={isMouseOver:!1,isKeyboardFocused:!1}}render(){const{analyticsId:e}=this.props;return n.default.createElement(a.IconButton,{componentRef:this.setInlineButtonRef,className:this.getIconClass(),icon:this.getIcon(),onFocus:this.onKeyboardFocus,onBlur:this.onKeyboardBlur,"aria-haspopup":"true","aria-expanded":this.props.isMenuOpen,"aria-controls":"assessment-canvas-add-content-menu","aria-hidden":this.props.removedFromTabOrder?"true":void 0,ariaLabel:this.props.buttonAriaLabel,onClick:this.onClick,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,removedFromTabOrder:this.props.removedFromTabOrder,analyticsId:`${e}.inlineAddButton.iconButton.button`})}}t.default=r},"3Md0":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("lcFE");t.default=n.default,t.QuestionPickerPanel=n.QuestionPickerPanel},"3UQ0":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("Pfoe")),o=s("gTAB"),r=s("2yjE");t.getQuestionTextProps=(e,t)=>{const{localize:s,localizationPrefix:n,question:a,questionTitle:i}=e,o=`${r.QUESTION_TITLE_ID_PREFIX}${a.id}`,l=s.translate(`${n}.canvas.question.placeholder.question`,{questionTitle:i||""});return{activeEditorId:e.activeEditorId,ariaLabelledBy:o,disableFocus:e.disableFocus,editMode:e.editMode,placeholderText:l,plugins:e.editorPlugins,pluginsConfig:e.pluginsConfig,onChange:t,question:a,refreshBbml:e.refreshBbml,setActiveEditorId:e.setActiveEditorId}},t.default=({activeEditorId:e,ariaLabelledBy:t,disableEditor:s,disableFocus:n,editMode:r,editorPlugins:l,placeholderText:u,onChange:c,pluginsConfig:d,question:p,refreshBbml:m,setActiveEditorId:h})=>{var f;const g=o.EditModeEnum.INACTIVE===r||!!s;return a.default.createElement("div",{className:"question-text"},a.default.createElement(i.default,{activeEditorId:e,ariaLabelledBy:t,ariaRequired:!0,bbml:null===(f=p.questionText)||void 0===f?void 0:f.rawText,disableFocus:n,id:p.id,isReadOnly:g,keepToolbarVisible:!1,onChange:e=>{const t={...p,questionText:{rawText:e.toBbML()}};null==c||c(t)},placeholder:u,plugins:l,pluginsConfig:d,refreshBbml:m,setActiveEditorId:h}))}},"3ZJq":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("yxoV");t.AutomatedQuestionFeedback=n.default;var a=s("C9HY");t.AutomatedQuestionFeedbackEdit=a.default;var i=s("O55a");t.AutomatedQuestionFeedbackRead=i.default;var o=s("OyKE");t.AutomatedQuestionFeedbackAttemptReview=o.default},"4+yV":function(e,t,s){"use strict";s.r(t)},"4Pbl":function(e,t,s){"use strict";s.r(t)},"4bjT":function(e,t,s){"use strict";s.r(t)},"5Hnx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("PCGI")),o=n.__importDefault(s("m20R")),r=n.__importDefault(s("uh+7")),l=s("gTAB"),u=n.__importStar(s("TIvv")),c=n.__importStar(s("AiU9")),d=n.__importDefault(s("ZfLe")),p=s("Vng8");t.CalculatedFormula=e=>{const{editMode:t,question:s}=e;return a.default.createElement("div",null,a.default.createElement(i.default,{editMode:t,question:s},a.default.createElement(u.default,Object.assign({},u.getPluggableQuestionHeaderProps(e,t=>{const n={...s,...t};e.onQuestionChange(n,p.hasBaseQuestionChanged)}))),a.default.createElement(c.default,Object.assign({},c.getQuestionControlProps(e)))),l.EditModeEnum.ACTIVE===t?a.default.createElement(o.default,Object.assign({},e,{question:s})):a.default.createElement(r.default,Object.assign({},e,{question:s})))};const m=d.default(t.CalculatedFormula);t.default=m},"5NQ0":function(e,t,s){"use strict";s.r(t)},"5Y6Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("zGdY");t.isUnansweredQuestion=e=>{switch(null==e?void 0:e.questionType){case n.QuestionType.PresentationOnly:return!1;case n.QuestionType.FIMB:return(e=>{const{givenAnswers:t}=e;return!t||"object"!=typeof t||!Object.values(t||{}).every(e=>null!=e&&e.trim().length>0)})(e);case n.QuestionType.Matching:return(e=>{const{givenAnswers:t,question:s}=e;return!t||!s||t.filter(e=>null!==e).length<s.prompts.length})(e);default:return(null==e?void 0:e.attemptStatus)===n.AttemptStatus.NotAttempted}}},"5aOz":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=n.__importDefault(s("PCGI")),o=s("gTAB"),r=s("WGaE"),l=n.__importStar(s("TIvv")),u=n.__importDefault(s("ZfLe")),c=n.__importStar(s("AiU9")),d=n.__importStar(s("OPED")),p=s("Vng8");s("qTgb");class m extends a.Component{constructor(){super(...arguments),this.onQuestionChange=e=>{this.props.onQuestionChange(e,(e,t)=>p.hasEssayQuestionChanged(e,t))}}render(){var e;const{editMode:t,localize:s,localizationPrefix:n,question:u}=this.props,m=o.EditModeEnum.ACTIVE===t,h=m&&p.hasLinkedQuestion(u);return a.default.createElement("div",{className:`essay ${t?"essay--edit":"essay--read"}`},a.default.createElement(i.default,{editMode:t,question:u},a.default.createElement(r.LinkedQuestionNotification,{show:h,usageCount:null!==(e=u.usageCount)&&void 0!==e?e:0}),a.default.createElement(l.default,Object.assign({},l.getPluggableQuestionHeaderProps(this.props,this.onQuestionChange))),a.default.createElement(c.default,Object.assign({},c.getQuestionControlProps(this.props))),a.default.createElement(d.default,Object.assign({},d.getQuestionTextProps(this.props,this.onQuestionChange)))),m?null:a.default.createElement("div",{className:"essay__info"},a.default.createElement("div",null,s.translate(`${n}.canvas.question.essay.instructions`))))}}t.Essay=m;const h=u.default(m);t.default=h},"5mCR":function(e,t,s){"use strict";s.r(t)},"5rm9":function(e,t,s){"use strict";s.r(t)},"6GOo":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx"),a=s("DRH8");t.useStyles=n.makeStyles(e=>n.createStyles({answerContainer:t=>({backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.border.main}`,borderRadius:"2px",color:e.palette.text.secondary,display:"flex",minHeight:"36px",padding:"7px 10px",textAlign:"left",width:"260px",justifyContent:a.shouldForceDisplayWesternNumbers(t.currentLocale,!0)?"flex-end":"flex-start"}),toleranceContainer:{marginTop:"12px"}}))},"6TGb":function(e,t){e.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 200 200" style="enable-background:new 0 0 200 200;" xml:space="preserve"><g><circle style="fill:#E3F4FC;" cx="99.5" cy="99.5" r="99.5"></circle><g><rect x="51.74" y="40.724" style="fill:#D2EDFA;" width="95.52" height="117.282"></rect><rect x="51.74" y="38.606" style="fill:#FFFFFF;" width="95.52" height="115.42"></rect></g><rect x="93.928" y="75.222" style="fill:#D2EDFA;" width="42.188" height="2.388"></rect><rect x="93.928" y="80.794" style="fill:#D2EDFA;" width="42.188" height="2.388"></rect><rect x="93.928" y="86.366" style="fill:#D2EDFA;" width="20.696" height="2.388"></rect><g><g><g><g><polygon style="fill:#C26FD2;" points="57.61,97.358 59.775,89.345 51.752,91.475 "></polygon></g></g></g></g><g><g><path style="fill:#D2EDFA;" d="M79.6,77.61v14.328H65.272V77.61H79.6 M81.988,75.222H62.884v19.104h19.104V75.222L81.988,75.222z "></path></g></g><g><text transform="matrix(1 0 0 1 93.9282 30.6462)" style="fill:#A8BFCC; font-family:&#x27;OpenSans-Semibold&#x27;; font-size:23.3456;">Abc</text></g><rect x="62.884" y="49.75" style="fill:#D2EDFA;" width="73.232" height="14.328"></rect><g><path style="fill:#D2EDFA;" d="M133.728,107.858v30.248H65.272v-30.248H133.728 M136.116,105.47H62.884v35.024h73.232V105.47 L136.116,105.47z"></path></g><rect x="86.764" y="75.222" style="fill:#D2EDFA;" width="2.388" height="2.388"></rect><rect x="86.764" y="80.794" style="fill:#D2EDFA;" width="2.388" height="2.388"></rect><rect x="86.764" y="86.366" style="fill:#D2EDFA;" width="2.388" height="2.388"></rect><rect x="34.394" y="118.206" style="fill:#AEC6D6;" width="35.024" height="2.388"></rect><rect x="34.394" y="124.574" style="fill:#AEC6D6;" width="34.228" height="2.388"></rect><rect x="34.394" y="130.942" style="fill:#AEC6D6;" width="34.228" height="2.388"></rect><rect x="34.394" y="137.31" style="fill:#AEC6D6;" width="19.9" height="2.388"></rect><g><g><line style="fill:#C7BCAC;" x1="142.447" y1="110.126" x2="142.446" y2="110.126"></line></g></g><g><defs><rect id="SVGID_1_" x="100.296" y="132.534" width="30.248" height="29.452"></rect></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible;"></use></clipPath><g style="clip-path:url(#SVGID_2_);"><path style="fill:#36D7FB;" d="M129.748,162.782h-28.656c-0.879,0-1.592-0.713-1.592-1.592v-27.86 c0-0.879,0.713-1.592,1.592-1.592h28.656c0.879,0,1.592,0.713,1.592,1.592v27.86C131.34,162.069,130.627,162.782,129.748,162.782 z"></path><g><g><circle style="fill:#FEE132;" cx="120.668" cy="147.315" r="2.841"></circle><path style="fill:#FEFA78;" d="M120.669,145.611c0.94,0.001,1.704,0.766,1.704,1.706s-0.766,1.704-1.706,1.704 c-0.94-0.001-1.704-0.766-1.704-1.706C118.964,146.374,119.729,145.61,120.669,145.611 M120.67,144.474 c-1.569-0.001-2.842,1.27-2.843,2.839c-0.001,1.569,1.27,2.842,2.839,2.843c1.569,0.001,2.842-1.27,2.843-2.839 C123.51,145.748,122.239,144.475,120.67,144.474L120.67,144.474z"></path></g><g style="opacity:0.2;"><polyline style="fill:#303030;" points="131.308,160.029 131.31,155.796 125.631,150.11 119.945,155.789 109.723,145.554 99.487,156.912 99.486,160.008 "></polyline></g><g><path style="fill:#44E17D;" d="M119.975,158.238l-10.222-10.235l-10.236,11.358l-0.001,1.817 c-0.001,0.876,0.715,1.592,1.591,1.593l27.957,0.018c1.25,0.001,2.274-1.021,2.274-2.271l0.001-2.273l-5.679-5.686 L119.975,158.238z"></path><g><g><path style="fill:#82FA7D;" d="M109.812,150.315l9.036,9.048l1.125,1.126l1.126-1.125l4.56-4.554l4.088,4.093l-0.002,2.295 l-28.638-0.019l0.001-1.207L109.812,150.315 M109.753,148.002l-10.236,11.358l-0.001,1.818 c-0.001,0.876,0.715,1.592,1.591,1.593l28.638,0.019c0,0,0.001,0,0.001,0c0.875,0,1.591-0.716,1.592-1.591l0.002-2.954 l-5.679-5.686l-5.686,5.679L109.753,148.002L109.753,148.002z"></path></g></g></g></g></g></g><path style="fill:#D2EDFA;" d="M129.748,161.209v1.573l-28.656,0v-1.573H99.5v1.573c0,0.879,0.713,1.592,1.592,1.592h28.656 c0.879,0,1.592-0.713,1.592-1.592v-1.573H129.748z"></path><path style="fill:#FFFFFF;" d="M129.748,133.33L129.748,133.33v27.86l-28.656,0l0-27.86H129.748 M129.748,131.738h-28.656 c-0.879,0-1.592,0.713-1.592,1.592v27.86c0,0.879,0.713,1.592,1.592,1.592h28.656c0.879,0,1.592-0.713,1.592-1.592v-27.86 C131.34,132.451,130.627,131.738,129.748,131.738L129.748,131.738z"></path><path style="fill:none;stroke:#C26FD2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10;" d="M96.515,147.26 c-6.924,0-12.537-5.613-12.537-12.537c0-6.924,5.613-12.537,12.537-12.537"></path><g><g><polygon style="fill:#C26FD2;" points="97.088,126.308 104.276,122.158 97.088,118.007 "></polygon></g></g><g><g><polygon style="fill:#C26FD2;" points="68.671,53.292 72.822,60.48 76.973,53.292 "></polygon></g></g><path style="fill:none;stroke:#C26FD2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10;" d="M72.734,54.526V31.84 c0-6.1,4.945-11.045,11.045-11.045h7.363"></path><line style="fill:none;stroke:#C26FD2;stroke-width:2.388;stroke-linecap:round;stroke-miterlimit:10;" x1="35.289" y1="113.695" x2="54.659" y2="94.326"></line></g><g><rect x="139.218" y="70.125" transform="matrix(0.7071 0.7071 -0.7071 0.7071 107.7969 -73.9948)" style="fill:#FEC34C;" width="8" height="46"></rect><rect x="144.875" y="75.782" transform="matrix(0.7071 0.7071 -0.7071 0.7071 113.4538 -76.3379)" style="fill:#FCB73D;" width="8" height="46"></rect><rect x="157.431" y="76.983" transform="matrix(0.7071 0.7071 -0.7071 0.7071 104.0101 -93.1369)" style="fill:#D5D5D5;" width="14" height="4"></rect><rect x="156.896" y="73.447" transform="matrix(0.7071 0.7071 -0.7071 0.7071 100.4746 -91.6725)" style="fill:#E8E8E8;" width="8" height="4"></rect><path style="fill:#FC5D92;" d="M170.795,82.518l-11.314-11.314l2.885-2.885c3.093-3.093,8.108-3.093,11.201,0l0.113,0.113 c3.093,3.093,3.093,8.108,0,11.201L170.795,82.518z"></path><polygon style="fill:#FCD3A6;" points="118.469,123.531 118.469,123.531 124.126,106.56 135.44,117.874 "></polygon><polyline style="fill:#FCD3A6;" points="124.126,106.56 127.897,106.56 127.897,110.331 131.669,110.331 131.669,114.103 135.44,114.103 135.44,117.874 "></polyline><path style="opacity:0.1;" d="M173.68,68.433l-0.057-0.057l-8.485,8.485l5.657,5.657l2.885-2.885 C176.773,76.54,176.773,71.526,173.68,68.433z"></path><polygon style="fill:#767676;" points="120.237,118.227 118.469,123.531 123.773,121.763 "></polygon></g></svg>'},"6iVS":function(e,t,s){"use strict";s.r(t)},"6rK7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("qs/y");t.default=n.default},"7//j":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("nBlB"),o=s("8unJ"),r=s("VQXm"),l=n.__importDefault(s("RtIR"));class u extends a.Component{constructor(){super(...arguments),this.getDraggingLabelObject=e=>{var t;const s=this.props.keyInsertIndex-1;return this.props.isKeyboardMoving?e===s?{string:"assessments.canvas.drop.buttonStart",relation:""}:0===this.props.keyInsertIndex?{string:"assessments.canvas.dropAnswer.buttonTop",relation:null!==(t=this.props.questionTitle)&&void 0!==t?t:""}:l.default("dropAnswer",this.props.question.answers[s],this.props.questionTitle):l.default("dragAnswer",this.props.question,this.props.questionTitle)}}render(){const{items:e,localize:t,keyInsertIndex:s,isKeyboardMoving:n}=this.props;return a.default.createElement("ol",{id:"multiple-answer-dnd",className:"multiple-answer__list"},e.map((e,i)=>{const o=this.getDraggingLabelObject(i),l=n?s:i+1,u=t.translate(o.string,{relatedQuestion:o.relation,answerNumber:l});return a.default.createElement("li",{key:e.id,className:"multiple-answer__dnd-item"},a.default.createElement(r.DndMultipleAnswerChoice,Object.assign({},this.props,{answer:e,index:i,dragButtonAriaLabel:u,preview:a.default.createElement("div",{className:"multiple-answer__preview",dangerouslySetInnerHTML:{__html:e.answerText.rawText}})})))}))}}t.UnwrappedEditModeChoices=u,t.default=o.localizedComponentWrapper(i.DragNDropContainer(u))},"76BM":function(e,t,s){"use strict";s.r(t)},"7Eh6":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("/gJS"),i=s("8unJ");t.default=i.localizedComponentWrapper(({code:e,isNew:t=!1,localize:s})=>{const{accessCodeClass:i,highlightClass:o,noHighlightClass:r}=a.useStyles(),l=t?o:r;return n.createElement("span",{className:`${i} ${l} js-access-code-display`},s.formatNumber(Number.parseInt(e,10),{useGrouping:!1,minimumIntegerDigits:6}))})},"7LMM":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=s("FgpP"),i=n.__importStar(s("ERkP")),o=s("gTAB");s("5rm9");const r=s("1Xy2"),l=s("E1pj"),u=s("8unJ");t.default=u.localizedComponentWrapper(l.windowResizingResponsiveComponentWrapper(({editMode:e,question:t,localize:s,isAnswersEditMode:n,options:l,onScoringOptionsChange:u,translationKeyPrefix:c,UltraWindowSize:d})=>{const p=l.map(e=>({key:e.key,text:null==s?void 0:s.translate(`${c}.${e.key}`)})),m=o.EditModeEnum.INACTIVE===e,h=r.getSelectedScoringOption(t),f=null==s?void 0:s.translate(`${c}.${null==h?void 0:h.key}`),g=null==s?void 0:s.translate(`${c}.readPlaceholder`,{scoringOption:f});return i.createElement(i.Fragment,null,m?i.createElement("div",{className:"scoring-options__text"},g):i.createElement("div",{className:"scoring-options__wrapper"},i.createElement("div",{className:"scoring-options__selector"},i.createElement(a.Dropdown,{label:s.translate(`${c}.dropdownLabel`),options:p,onChanged:e=>{let t=null;switch(e.key){case r.partialCreditNoPenalty:t={allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!1,allowNegativeOverallScore:!1};break;case r.noPartialCredit:t={allowPartialCredit:!1,allowNegativeScoreForIncorrectAnswers:!1,allowNegativeOverallScore:!1};break;case r.partialCreditWithPenalty:t={allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!0,allowNegativeOverallScore:!1};break;case r.partialCreditOverallNegative:t={allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!0,allowNegativeOverallScore:!0}}u(t)},selectedKey:null==h?void 0:h.key,inlineLabel:!(null==d?void 0:d.isSmallBreakpoint()),analyticsId:`${c}.dropdown`,disabled:!n}))))}))},"7Pdu":function(e,t,s){"use strict";s.r(t)},"7UBu":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("MC1S"),o=s("3ZJq"),r=n.__importDefault(s("PCGI")),l=s("gTAB"),u=s("Vng8"),c=n.__importDefault(s("ZfLe")),d=s("WGaE"),p=n.__importStar(s("TIvv")),m=n.__importStar(s("AiU9")),h=n.__importStar(s("OPED"));s("5mCR");const f="true",g="false";class E extends a.Component{constructor(){super(...arguments),this.onQuestionChange=e=>{this.props.onQuestionChange(e,(e,t)=>u.hasTrueFalseQuestionChanged(e,t))},this.onAnswerChange=(e,t)=>{const{onQuestionChange:s,question:n}=this.props;s({...n,answer:(null==t?void 0:t.key)===f},(e,t)=>u.hasTrueFalseQuestionChanged(e,t))},this.getReadModeSection=e=>{const{localize:t,question:s}=this.props;return a.default.createElement("ol",{className:"true-false__list"},a.default.createElement("li",{className:"true-false__li"},a.default.createElement("span",{className:"true-false__text"},t.translate(`${e}.${s.answerType}.true`)),s.answer&&a.default.createElement("span",{className:"true-false__correct"},t.translate(`${e}.correctAnswer`))),a.default.createElement("li",{className:"true-false__li"},a.default.createElement("span",{className:"true-false__text"},t.translate(`${e}.${s.answerType}.false`)),!s.answer&&a.default.createElement("span",{className:"true-false__correct"},t.translate(`${e}.correctAnswer`))))},this.getEditModeSection=e=>{const{localize:t,question:s}=this.props;return a.default.createElement("div",{className:"true-false__options"},a.default.createElement(i.ChoiceGroup,{onChange:this.onAnswerChange,options:[{key:f,text:t.translate(`${e}.${s.answerType}.true`)},{key:g,text:t.translate(`${e}.${s.answerType}.false`)}],selectedKey:s.answer?f:g,analyticsId:"assessments.questions.truefalse.choice"}))}}render(){var e;const{editMode:t,localizationPrefix:s,question:n,setActiveEditorId:i,pluginsConfig:c,activeEditorId:f}=this.props,g=l.EditModeEnum.ACTIVE===t&&u.hasLinkedQuestion(n),E=`${s}.canvas.question.trueFalse`,_=l.EditModeEnum.INACTIVE===t;return a.default.createElement("div",{className:"true-false"},a.default.createElement(r.default,{editMode:t,question:n},a.default.createElement(d.LinkedQuestionNotification,{show:g,usageCount:null!==(e=n.usageCount)&&void 0!==e?e:0}),a.default.createElement(p.default,Object.assign({},p.getPluggableQuestionHeaderProps(this.props,this.onQuestionChange))),a.default.createElement(m.default,Object.assign({},m.getQuestionControlProps(this.props))),a.default.createElement(h.default,Object.assign({},h.getQuestionTextProps(this.props,this.onQuestionChange)))),_?this.getReadModeSection(E):this.getEditModeSection(E),a.default.createElement(o.AutomatedQuestionFeedback,{editMode:t,onQuestionChange:this.onQuestionChange,question:n,setActiveEditorId:i,pluginsConfig:c,activeEditorId:f}))}}t.TrueFalse=E,E.defaultProps={activeEditorId:null,alignedGoals:null,canEnterEditMode:!1,customQuestionHeader:null,disableEditor:!1,disableFocus:!1,disableInteraction:!1,editorPlugins:null,focusTitle:!1,hasQuestionEditPermissions:!1,openGoals:null};const _=c.default(E);t.default=_},"7fK4":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),i=s("AuQm"),o=s("np6O"),r=s("XBaz"),l=s("zGdY"),u=s("t6ux"),c=s("9tRF"),d=s("/R3Y");s("zKpB"),t.CLASS_PREFIX="calculated-formula-question__step-3__variable-value-table",t.TRANSLATION_KEY_PREFIX="assessments.canvas.question.calculatedFormula.stepThree.variableValueTable",t.getResultColumnHeaderInfo=(e,s,n)=>{const a=u.getCorrectAnswerToleranceType(s),i=u.getCorrectAnswerToleranceValue(s),o=`${t.TRANSLATION_KEY_PREFIX}.resultColumnHeader`,r=u.getAnswerTranslationKey(o,a,i,n);return r?e.translate(r,{unitsText:n,answerToleranceValue:i}):null},t.getInputBounding=e=>{const t=e.getBoundingClientRect();return{left:t.left-2,right:t.right+2}},t.getTableBounding=(e,t)=>{var s;const n=null===(s=e.getBoundingClientRect())||void 0===s?void 0:s.width,a=t.offsetWidth-t.clientWidth,i=t.getBoundingClientRect(),o=i.right-n-a;return{left:i.left,right:o}},t.scrollIntoView=(e,s,n)=>{if(!n||!s)return;const a=t.getInputBounding(e),i=t.getTableBounding(s,n),o=a.right-i.right,r=a.left-i.left;a.right>i.right&&(n.scrollLeft+=o),a.left<i.left&&(n.scrollLeft+=r)},t.formatResult=(e,t,s,n,a,i)=>{const o=e.babelfishFormatInstance&&e.babelfishFormatInstance.number?e.babelfishFormatInstance.number.getDecimalStringSync(t):".",{SignificantFigures:r,Decimal:c}=l.CalculatedFormulaAnswerPrecisionType,{Normal:d,Exponential:p}=l.CalculatedFormulaAnswerFormatType,m=u.roundWithPrecision(s,n,a?p:d,i?r:c);return a&&null!=m?m.toExponential().replace(".",o):e.formatNumber(m,{maximumFractionDigits:n})},t.BaseVariableValueTableRowResult=({disabled:e,localize:s,result:a,rowNumber:i,ident:l,calculateRow:c,isDirty:p,isRecalculatingVariableSets:m,isExponential:h,scale:f,currentLocale:g,roundToSignificantFigures:E,hasError:_,resultId:b})=>{const y=!(a&&Number.isFinite(a))||_,C=y?s.translate(`${t.TRANSLATION_KEY_PREFIX}.resultError`,{row:i}):t.formatResult(s,g,a,f,h,E);return n.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell--result`},n.default.createElement("span",{className:`${t.CLASS_PREFIX}__result-flex-wrapper`},n.default.createElement("span",{id:b,className:d.removeExtraWhitespace(`\n                        ${t.CLASS_PREFIX}__result\n                        ${y?`${t.CLASS_PREFIX}__result--error`:""}\n                    `)},m?"":C),!m&&p&&!_&&n.default.createElement(o.AnalyticsIconButton,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.stepThree.variableValueTable.refresh`,"aria-label":s.translate(`${t.TRANSLATION_KEY_PREFIX}.refresh.ariaLabel`,{row:i}),disabled:e,onClick:()=>null==c?void 0:c(l)},n.default.createElement(r.Refresh,null))))},t.VariableValueTableRowResult=a.localizedComponentWrapper(t.BaseVariableValueTableRowResult),t.VariableValueInput=({ariaDescribedBy:e,ariaLabel:s,disabled:a,hasError:o,value:r,isRecalculatingVariableSets:l,updateVariableValue:c,ident:d,variableName:p,onFocus:m})=>n.default.createElement(i.LocalizedNumberInput,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.stepThree.variableValueTable.textField`,ariaDescribedBy:o?e:void 0,ariaLabel:s,className:`${t.CLASS_PREFIX}__input`,disabled:l||a,numberFormatOptions:{maximumFractionDigits:20},onChange:e=>null==c?void 0:c(d,p,e),onFocus:m,validate:()=>!o,value:null!=r?r:null,hideErrorMessage:!0}),t.BaseVariableValueTableRow=({disabled:e,localize:s,rowNumber:a,variableSet:i,isRecalculatingVariableSets:o,calculateRow:r,updateVariableValue:l,isDirty:u,onInputFocus:d,isExponential:p,scale:m,roundToSignificantFigures:h})=>{var f;const g=`variable-value-set-result-${i.ident}`;return n.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row--data`},n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--row`,scope:"row"},s.formatNumber(a)),Object.keys(i.variableValues).map(r=>{var u;return n.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell`,key:`${i.ident}-${r}`},n.default.createElement(t.VariableValueInput,{ariaDescribedBy:g,ariaLabel:s.translate(`${t.TRANSLATION_KEY_PREFIX}.input.ariaLabel`,{variable:r,row:a}),disabled:e,hasError:!Number.isFinite(i.variableValues[r]),value:null!==(u=i.variableValues[r])&&void 0!==u?u:void 0,isRecalculatingVariableSets:o,updateVariableValue:l,variableName:r,ident:i.ident,onFocus:d}))}),n.default.createElement(t.VariableValueTableRowResult,{calculateRow:r,disabled:e,hasError:!c.isVariableSetValid(i),ident:i.ident,isDirty:u,isExponential:p,isRecalculatingVariableSets:o,result:null!==(f=i.answer)&&void 0!==f?f:void 0,resultId:g,roundToSignificantFigures:h,rowNumber:a,scale:m}))},t.VariableValueTableRow=a.localizedComponentWrapper(t.BaseVariableValueTableRow),t.BaseVariableValueTable=({disabled:e,localize:s,variableSets:a,isRecalculatingVariableSets:i,calculateRow:o,updateVariableValue:r,dirtyRowMap:l,correctAnswerTolerance:u,unitsText:c,isExponential:p,scale:m,roundToSignificantFigures:h})=>{if(!a)return null;const f=n.useRef(),g=n.useRef(),E=e=>{t.scrollIntoView(e.target,f.current,g.current)},_=t.getResultColumnHeaderInfo(s,u,c);return n.default.createElement("table",{"aria-label":s.translate(`${t.TRANSLATION_KEY_PREFIX}.title`),className:`${t.CLASS_PREFIX}`,ref:g},n.default.createElement("tbody",{className:`${t.CLASS_PREFIX}__body`},n.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row--header`},n.default.createElement("td",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`}),Object.keys(a[0].variableValues).map(e=>n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,key:e,scope:"col"},e)),n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column--result`,scope:"col",ref:f},n.default.createElement("span",{className:d.removeExtraWhitespace(`\n                                ${t.CLASS_PREFIX}__header--column--result--contents\n                            `)},n.default.createElement("span",null,s.translate(`${t.TRANSLATION_KEY_PREFIX}.answer`)),_&&n.default.createElement("span",{className:`${t.CLASS_PREFIX}__header--column--result--contents--info`},_)))),a&&a.map((s,a)=>{var u;return n.default.createElement(t.VariableValueTableRow,{calculateRow:o,disabled:e,isDirty:null!==(u=null==l?void 0:l[s.ident])&&void 0!==u&&u,isExponential:p,isRecalculatingVariableSets:i,key:s.ident,onInputFocus:E,roundToSignificantFigures:h,rowNumber:a+1,scale:m,updateVariableValue:r,variableSet:s})})))},t.default=a.localizedComponentWrapper(t.BaseVariableValueTable)},"8gHA":function(e,t,s){"use strict";s.r(t)},"9HIK":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("2L3Q");t.default=n.default},"9mqG":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("TrYj");t.default=n.default},"9qOT":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Waue");t.default=n.default,t.QuestionPoolQuestionList=n.QuestionPoolQuestionList},"9tRF":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("zGdY");function a(e){return e===n.CalculatedFormulaToleranceType.Numeric}function i(e,t,s){return a(e)?t/s:t/100}function o(e){return e>=0&&e<=100}function r(e,s){return e>=s&&e<=t.MAX_ROUNDING_VALUE}function l(e){return n.CalculatedFormulaAnswerPrecisionType.SignificantFigures===e?t.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE:t.MIN_DECIMAL_ROUNDING_VALUE}function u({maxValue:e,minValue:t}){return e>=t}function c({maxValue:e,minValue:t}){return t<=e}function d({scale:e}){return e>=0&&e<=t.MAX_SCALE_VALUE}function p(e){const{maxValue:t,minValue:s,scale:n}=e;return Number.isFinite(t)&&Number.isFinite(s)&&Number.isFinite(n)&&u(e)&&c(e)&&d(e)}function m({variableValues:e}){return Object.values(e).every(e=>Number.isFinite(e))}function h({answer:e}){return Number.isFinite(e)}function f(e){return h(e)&&m(e)}t.MIN_DECIMAL_ROUNDING_VALUE=0,t.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE=1,t.MAX_ROUNDING_VALUE=50,t.MAX_SCALE_VALUE=50,t.MIN_ANSWER_SETS=1,t.isNumericType=a,t.getToleranceValueAsPercent=i,t.isValidPercent=o,t.isValidRounding=r,t.getMinimumRoundingValue=l,t.isAnswerScaleValid=function({answerScale:e,correctAnswerPrecision:t}){const s=l(t);return Number.isFinite(e)&&r(e,s)},t.isAnswerToleranceValid=function({correctAnswerTolerance:e}){return Number.isFinite(e.value)},t.isPartialCreditPointsPercentValid=function({allowPartialCredit:e,partialCreditPointsPercent:t}){return!e||Number.isFinite(t)&&o(t)},t.isPartialCreditToleranceValid=function({allowPartialCredit:e,partialCreditTolerance:t}){return!e||Number.isFinite(t.value)},t.isPartialCreditValueGreaterThanAnswerValue=function({allowPartialCredit:e,correctAnswerTolerance:t,partialCreditTolerance:s,points:n}){const a=t&&i(t.type,t.value,n),o=s&&i(s.type,s.value,n);return 0===a||!e||o>=a},t.isPartialCreditPercentGreaterThanUnitsPercent=function({allowPartialCredit:e,partialCreditPointsPercent:t,units:s}){return!e||!s.unitsRequired||t>s.unitPointsPercent},t.isUnitPointsPercentValid=function({units:e}){return e&&(!e.unitsRequired||Number.isFinite(e.unitPointsPercent)&&o(e.unitPointsPercent))},t.isUnitValueValid=function({units:e}){return e&&(!e.unitsRequired||!!e.unitValue)},t.isVariableDefinitionMaxValueInRange=u,t.isVariableDefinitionMinValueInRange=c,t.isVariableDefinitionScaleInRange=d,t.isVariableDefinitionValid=p,t.isVariableDefinitionsValid=function({variableDefinitions:e}){return null==e||e.every(p)},t.isVariableSetCountValid=function({variableSetCount:e}){return Number.isFinite(e)&&e>=0},t.isVariableSetValuesValid=m,t.isVariableValueAnswerValid=h,t.isVariableSetValid=f,t.isVariableSetsValid=function({variableSets:e}){return e.every(e=>f(e))}},AFzv:function(e,t,s){"use strict";s.r(t)},AJxu:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(()=>n.createStyles({textClass:{textTransform:"uppercase"}}))},AV37:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),i=s("8unJ"),o="questionReuse.copyProcessing";t.default=(e,t=1)=>{const s=a.NotificationType.Processing;class r extends n.default.Component{constructor(){super(...arguments),this.notificationWrapper=n.default.createRef()}componentDidMount(){this.notificationWrapper.current.focus()}render(){const{localize:e}=this.props;return n.default.createElement("div",{className:"question-reuse-notification-wrapper",tabIndex:0,ref:this.notificationWrapper},n.default.createElement(a.Notification,{type:s,message:e.translate(o,{questionCount:t})}))}}return{positionAfter:e,type:s,Component:i.localizedComponentWrapper(r)}}},AepM:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),i=s("ECG1"),o=s("8unJ");t.LocalizedPeerReviewPeriodOpenBanner=o.localizedComponentWrapper(({peerReviewDueDate:e,localize:t})=>{const s=t.translate("banners.peerAssessments.peerReviewPeriodOpen.notice",{peerReviewDueDate:e}),o=n.createElement(i.Information,null);return n.createElement(a.AnalyticsBanner,{severity:"info",icon:o},n.createElement("span",{className:"js-banner-contents"},s))})},Ag5V:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("uxze"),i=s("zDAW"),o=s("pNgc"),r=s("AuQm"),l=s("o7ef"),u=s("Vng8"),c=e=>{-1!==e.clipboardData.getData("Text").indexOf(".")&&(e.preventDefault(),e.stopPropagation())};t.default=e=>{var t;const{hasSubmissions:s,localize:d,onQuestionChange:p,openPoolQuestionPanel:m,question:h,questionBeingEditedId:f}=e,g=`question-block-display-questions-${h.id}`,E=d.translate(`${l.LOCALE_KEY_BASE}.displayQuestions.invalid`),_=h.numOfQuestionsToChoose>=0&&h.numOfQuestionsToChoose<=h.numOfAvailableQuestions,b=n.default.useCallback(e=>{let t;t=Number.isInteger(e)?e:null==e?0:h.numOfQuestionsToChoose,p({...h,numOfQuestionsToChoose:t})},[h,p]);return n.default.createElement("div",{className:`${l.CLASS_BASE} ${l.CLASS_BASE}--edit`},n.default.createElement("div",{className:`${l.CLASS_BASE}__content`},n.default.createElement("div",{className:`${l.CLASS_BASE}__editables-wrapper`},n.default.createElement("div",{className:`${l.CLASS_BASE}__editables-details`},n.default.createElement(o.ContentCollection,{className:`${l.CLASS_BASE}__icon`,color:"primary"}),n.default.createElement("div",{className:`${l.CLASS_BASE}__content-description-wrapper`},n.default.createElement("div",{className:`${l.CLASS_BASE}__content-description`},d.translate(`${l.LOCALE_KEY_BASE}.description.edit.plural`,{questionsTotal:h.numOfAvailableQuestions})),n.default.createElement(a.Link,{disabled:u.isNewQuestion(h)||f!==h.id,onClick:()=>m(h.id),analyticsId:"questionBlockQuestionEdit.poolQuestionPanel.open.link"},d.translate(`${l.LOCALE_KEY_BASE}.viewQuestions`,{questionsTotal:h.numOfAvailableQuestions})))),n.default.createElement("div",{className:`${l.CLASS_BASE}__editables-divider`}),n.default.createElement("div",{className:`${l.CLASS_BASE}__display-questions-wrapper`},n.default.createElement(i.Label,{className:`${l.CLASS_BASE}__display-questions-label`,htmlFor:g},d.translate(`${l.LOCALE_KEY_BASE}.displayQuestions.label`)),n.default.createElement(r.LocalizedNumberInput,{className:`${l.CLASS_BASE}__display-questions-input-wrapper`,helperText:_?"":E,validate:()=>_,id:g,min:0,onPaste:c,onChange:b,value:null!==(t=h.numOfQuestionsToChoose)&&void 0!==t?t:0,disabled:s,analyticsId:"questionBlockQuestionEdit.displayQuestionsInput.textField",hideErrorMessage:!0})))))}},AiU9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("nsO7")),i=n.__importStar(s("ERkP")),o=s("MC1S"),r=s("76kz"),l=s("0x+l"),u=s("t3aq"),c=s("JfV0"),d=s("zGdY"),p=s("caKH"),m=s("8unJ"),h=n.__importDefault(s("o8si")),f=n.__importDefault(s("RtIR"));s("+2T6");const g=s("b0Dq");function E(e){switch(e){case d.QuestionType.CalculatedFormula:case d.QuestionType.CalculatedNumeric:case d.QuestionType.Essay:case d.QuestionType.FIMB:case d.QuestionType.Matching:case d.QuestionType.Multiple:case d.QuestionType.Either:case d.QuestionType.QuestionBlock:return!0;default:return!1}}class _ extends i.Component{constructor(e){super(e),this.dropDownMenuButton=i.default.createRef(),this.onDeleteClick=()=>{this.setState({isConfirmationDialogOpen:!0})},this.onAlignWithGoal=()=>{this.props.openGoals()},this.onConfirmationDismiss=()=>{this.setState({isConfirmationDialogOpen:!1})},this.onCancelDelete=()=>{this.onConfirmationDismiss(),this.dropDownMenuButton.current.firstChild.focus()},this.onMenuOpen=()=>{this.props.updateDropdownMenuOptions&&this.props.updateDropdownMenuOptions(),this.state.isConfirmationDialogOpen&&this.onConfirmationDismiss()},this.getDropDownMenuOptions=()=>{const e=this.mergeDefaultMenuOptionsWithOverrides(),{hasQuestionDeletePermissions:t,hasQuestionEditPermissions:s,hasSubmissions:n,question:a,removeEditOption:i}=this.props,o=!!a.usageCount&&a.usageCount>0;return e.filter(e=>{switch(e.key){case"alignWithGoal":return s;case"regrade":return s&&n;case"delete":return t&&!n&&!o;case"edit":{const e=s&&!i;return E(a.questionType)?e&&!n:e}default:return!0}})},this.getDefaultMenuOptions=()=>{const{localize:e,question:t,startEditMode:s}=this.props,n=[{key:"edit",icon:i.default.createElement(l.Edit,null),name:e.translate("assessments.canvas.question.overflowOptions.edit"),onClick:()=>s()},{key:"delete",icon:i.default.createElement(l.Trash,null),name:e.translate("assessments.canvas.question.overflowOptions.delete"),onClick:()=>this.onDeleteClick()}];if(E(t.questionType)&&n.unshift({key:"regrade",icon:i.default.createElement(l.Edit,null),name:e.translate("assessments.canvas.question.overflowOptions.regrade"),onClick:()=>s()}),!c.Questions.isPresentationOnly(t)&&!c.Questions.isQuestionBlock(t)){const t={key:"alignWithGoal",icon:i.default.createElement(l.Goal,null),name:e.translate("assessments.canvas.question.overflowOptions.alignWithGoal"),onClick:()=>this.onAlignWithGoal()};n.splice(n.length-1,0,t)}return n},this.mergeDefaultMenuOptionsWithOverrides=()=>{const{dropDownMenuOptionsOverrides:e}=this.props,t=this.getDefaultMenuOptions(),s=t.map(t=>{const s=a.find(e,{key:t.key});return void 0===s?t:s}),n=a.differenceWith(e,t,(e,t)=>e.key===t.key);return s.concat(n)},this.state={isConfirmationDialogOpen:!1}}render(){const{deleteQuestion:e,dragButtonAriaLabel:t,dragPointRef:s,disableInteraction:n,hasAssessmentModifyPermissions:a,hasSubmissions:l,localize:d,question:m,questionTitle:E,showQuestionControls:_}=this.props;if(!_)return null;let b="question";c.Questions.isPresentationOnly(m)&&(b=c.Questions.isFileAttachment(m)?"file":"text");const y="file"===b?g.getFileViewerPropsArray(m):[],C=y.length?y[0].file:null,w={onDismiss:()=>this.onConfirmationDismiss(),showAsCallout:!0,target:this.dropDownMenuButton.current,calloutProps:{setInitialFocus:!0},dialogContentProps:{type:o.DialogType.actionConfirmation,showCloseButton:!1,title:d.translate(`assessments.canvas.question.deleteConfirmation.title.${b}`),subText:d.translate(`assessments.canvas.question.deleteConfirmation.subText.${b}`),isAlert:!0},analyticsId:"analytics - TODO figure out analytics"},v=f.default("overflow",m,E),S=this.getDropDownMenuOptions();return i.default.createElement("div",{className:"question-controls"},i.default.createElement("div",{className:"question-controls__actions"},i.default.createElement("div",{ref:this.dropDownMenuButton,className:"question-controls__menu-icon"},!!S.length&&i.default.createElement(o.ActionMenu,{maintainExpandedProperties:this.state.isConfirmationDialogOpen,menuProps:{directionalHint:6,items:S,onMenuOpened:()=>this.onMenuOpen()},ariaLabel:d.translate(v.string,{relatedContent:v.relation}),"aria-hidden":n?"true":void 0,removedFromTabOrder:n,analyticsId:"assessments.canvas.question.controls.menu"}),this.state.isConfirmationDialogOpen?i.default.createElement(p.UltraModalDialog,Object.assign({},w),i.default.createElement(o.DialogFooter,null,i.default.createElement(o.DefaultButton,{onClick:()=>this.onCancelDelete(),text:d.translate("assessments.canvas.question.deleteConfirmation.cancel"),analyticsId:"assessments.canvas.question.deleteConfirmation.cancel"}),i.default.createElement(o.PrimaryButton,{onClick:e,text:d.translate("assessments.canvas.question.deleteConfirmation.delete"),analyticsId:"assessments.canvas.question.deleteConfirmation.delete"}))):null),C&&r.canFileBeRenderedInline(C)&&r.isFileDisplayedInline(C)&&i.default.createElement("div",{className:"question-controls__score-indicator"},i.default.createElement(u.AllyWidget,{contentRef:m.id,widgetType:u.WidgetType.ScoreIndicator})),!l&&a&&i.default.createElement(h.default,{ariaLabel:t,className:"question-controls__dnd",dragPointRef:s,title:d.translate("assessments.canvas.drag.instructions"),removedFromTabOrder:n})))}}t.getQuestionControlProps=e=>({deleteQuestion:e.deleteQuestion,dragButtonAriaLabel:e.dragButtonAriaLabel,dragPointRef:e.dragPointRef,editMode:e.editMode,hasQuestionEditPermissions:e.hasQuestionEditPermissions,hasQuestionDeletePermissions:e.hasQuestionDeletePermissions,hasSubmissions:e.hasSubmissions,hasAssessmentModifyPermissions:e.hasAssessmentModifyPermissions,openGoals:e.openGoals,question:e.question,showQuestionControls:e.showQuestionControls,startEditMode:e.startEditMode}),t.default=m.localizedComponentWrapper(_)},B8lv:function(e,t,s){"use strict";s.r(t)},BJSr:function(e,t,s){"use strict";s.r(t)},BXTk:function(e,t,s){"use strict";s.r(t)},C9HY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("uDfI"),o=s("8unJ"),r=s("tN4z"),l=s("ECG1"),u=s("JfV0"),c=s("zGdY"),d=s("HZ1V"),p=n.__importDefault(s("Pfoe")),m=n.__importDefault(s("O94r")),h=n.__importDefault(s("YE/5")),f=o.localizedComponentWrapper(({localize:e,modeDisplayText:t,uniqueId:s})=>{const n=d.useStyles();return a.default.createElement("div",{className:n.displaySettings},a.default.createElement(r.AnalyticsTypography,{component:"span",variant:"inherit",id:`${g}__displaySettingsText-${s}`},t),a.default.createElement(r.AnalyticsTooltip,{analyticsId:`${E}.tooltip`,title:e.translate("automatedQuestionFeedback.edit.displaySettings.tooltip.content"),placement:"top"},a.default.createElement(r.AnalyticsIconButton,{className:n.displaySettingsButton,analyticsId:`${E}.displaySettings.tooltip`,"aria-label":e.translate("automatedQuestionFeedback.edit.displaySettings.tooltip.ariaLabel")},a.default.createElement(l.Information,null))))}),g="automated-question-feedback-edit",E="assessments.automated-question-feedback.edit";t.CORRECT_FEEDBACK_SELECTOR=`js-${g}__correct-feedback`,t.INCORRECT_FEEDBACK_SELECTOR=`js-${g}__incorrect-feedback`,t.AutomatedQuestionFeedbackEditComponent=({content:e,localize:s,question:n,onQuestionChange:i,setActiveEditorId:o,activeEditorId:l,pluginsConfig:_})=>{var b,y,C,w;const v=d.useStyles(),S=`${g}_incorrect-section-title_${n.id}`,P=`${g}_correct-section-title_${n.id}`,[A,T]=a.default.useState(!!(null===(b=n.correctResponseFeedback)||void 0===b?void 0:b.rawText)||!!(null===(y=n.incorrectResponseFeedback)||void 0===y?void 0:y.rawText)),[I,D]=a.default.useState(!1),[R,F]=a.default.useState(!1);return a.default.createElement("div",{className:m.default(v.base,g)},a.default.createElement("div",{className:v.header},a.default.createElement(r.AnalyticsFormControlLabel,{analyticsId:`${E}.toggleLabel`,className:v.toggleLabel,control:a.default.createElement(r.AnalyticsSwitch,{analyticsId:`${E}.toggleSwitch`,checked:A,className:m.default(v.toggleSwitch,`${g}__toggleSwitch`),onChange:(e,t)=>{var s,a;const i=(null===(s=n.correctResponseFeedback)||void 0===s?void 0:s.rawText)||(null===(a=n.incorrectResponseFeedback)||void 0===a?void 0:a.rawText);t||!i&&!R?T(t):D(!0)}}),label:s.translate("automatedQuestionFeedback.edit.toggleLabel")}),a.default.createElement(f,{modeDisplayText:function(){var t;const n=null===(t=null==e?void 0:e.deploymentSettings)||void 0===t?void 0:t.feedbackSettings;let a=null,i=null;if(n){const e=u.FeedbackSettings.getFeedbackModeByOption(c.AssessmentFeedbackOption.InstructorFeedback,n);a=e.mode,i=e.associatedDate}return a?i?s.translate("automatedQuestionFeedback.edit.displaySettings.feedbackMode.osd",{date:i}):s.translate(`automatedQuestionFeedback.edit.displaySettings.feedbackMode.${a}`):s.translate("automatedQuestionFeedback.edit.displaySettings.hidden")}(),uniqueId:n.id})),A&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:`${v.correct} ${t.CORRECT_FEEDBACK_SELECTOR}`},a.default.createElement("div",{className:v.sectionHeader},a.default.createElement(r.AnalyticsTypography,{id:P,component:e=>a.default.createElement("label",Object.assign({htmlFor:`correct-feedback_${n.id}`},e)),variant:"h6",className:v.sectionTitle},s.translate("automatedQuestionFeedback.correctAnswerLabel"))),a.default.createElement(p.default,{ariaLabelledBy:P,bbml:null===(C=n.correctResponseFeedback)||void 0===C?void 0:C.rawText,id:`correct-feedback_${n.id}`,isReadOnly:!1,onChange:e=>{F(!0),i({...n,correctResponseFeedback:{rawText:e.toBbML()}})},setActiveEditorId:o,keepToolbarVisible:!1,activeEditorId:l,pluginsConfig:_})),a.default.createElement("div",{className:`${v.correct} ${t.INCORRECT_FEEDBACK_SELECTOR}`},a.default.createElement("div",{className:v.sectionHeader},a.default.createElement(r.AnalyticsTypography,{id:S,component:e=>a.default.createElement("label",Object.assign({htmlFor:`incorrect-feedback_${n.id}`},e)),variant:"h6",className:v.sectionTitle},s.translate("automatedQuestionFeedback.incorrectAnswerLabel")),a.default.createElement(r.AnalyticsTypography,{component:"span",variant:"body2",className:v.sectionInstructions},s.translate("automatedQuestionFeedback.edit.incorrectAnswerInstructions"))),a.default.createElement(p.default,{ariaLabelledBy:S,bbml:null===(w=n.incorrectResponseFeedback)||void 0===w?void 0:w.rawText,id:`incorrect-feedback_${n.id}`,isReadOnly:!1,onChange:e=>{F(!0),i({...n,incorrectResponseFeedback:{rawText:e.toBbML()}})},setActiveEditorId:o,keepToolbarVisible:!1,activeEditorId:l,pluginsConfig:_}))),a.default.createElement(h.default,{analyticsId:`${E}.removeFeedbackWarning`,okButtonLocaleKey:"automatedQuestionFeedback.edit.warningDialog.okButton",onOk:()=>{D(!1),T(!1),F(!1),i({...n,correctResponseFeedback:{rawText:""},incorrectResponseFeedback:{rawText:""}})},onCancel:()=>D(!1),onDismiss:()=>D(!1),show:I,subText:s.translate("automatedQuestionFeedback.edit.warningDialog.text"),title:s.translate("automatedQuestionFeedback.edit.warningDialog.title")}))};const _=i.connect((e,t)=>{var s;return{content:u.select.content.getContentByAssessmentId(e,null!==(s=t.question.assessmentId)&&void 0!==s?s:"")}})(t.AutomatedQuestionFeedbackEditComponent);t.default=o.localizedComponentWrapper(_)},CCvt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),i=s("AuQm"),o=s("E1pj"),r=s("t6ux"),l=s("9tRF");function u(e,t,s){return{...e,[t]:s}}function c(e){return e.reduce((e,t)=>u(e,t.name,!0),{})}function d(e){return Object.values(e).every(e=>e)}s("BJSr"),t.CLASS_PREFIX="calculated-formula-question__step-2__variable-range-table",t.TRANSLATION_KEY_PREFIX="assessments.canvas.question.calculatedFormula.stepTwo.variableRanges",t.INPUT_KEY_PREFIX=`${t.TRANSLATION_KEY_PREFIX}.table.input`,t.getInputErrorKey=(e,s,n)=>{let a=null;return null!=s&&n<s?a=`${t.INPUT_KEY_PREFIX}.error.lessThanMinimum`:null!=e&&n>e?a=`${t.INPUT_KEY_PREFIX}.error.greaterThanMaximum`:null==n&&(a=`${t.INPUT_KEY_PREFIX}.error.NaN`),a},t.BaseVariableRangeInput=({analyticsId:e,ariaLabel:s,disabled:a,localize:o,max:r,min:l,numberFormatOptions:u,onChange:c,onValidate:d,value:p})=>{const m=t.getInputErrorKey(r,l,p),h=null!=m&&o.translate(m,{max:r,min:l});return n.default.useEffect(()=>{d(null==m)},[m,d]),n.default.createElement(i.LocalizedNumberInput,{analyticsId:`${e}.textField`,ariaLabel:s,className:`${t.CLASS_PREFIX}__input`,disabled:a,helperText:h,max:r,min:l,numberFormatOptions:u,onChange:c,validate:e=>!t.getInputErrorKey(r,l,e),value:null!=p?p:null})},t.VariableRangeInput=a.localizedComponentWrapper(t.BaseVariableRangeInput),t.BaseVariableRangeTableRow=({disabled:e,localize:s,maxValue:a,minValue:i,name:o,onChange:u,onValidate:c,scale:d})=>{const[p,m]=n.useState(!0),[h,f]=n.useState(!0),[g,E]=n.useState(!0),_=p&&h&&g;n.default.useEffect(()=>{c(_)},[_]);return n.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row`},n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--row`,scope:"row"},o),n.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell ${t.CLASS_PREFIX}__cell--min`},n.default.createElement(t.VariableRangeInput,{analyticsId:`${r.ANALYTICS_ID_PREFIX}.variableRange.minimum`,ariaLabel:s.translate(`${t.INPUT_KEY_PREFIX}.ariaLabel.minimum`,{name:o}),disabled:e,max:a,onChange:e=>{u({minValue:e})},onValidate:f,value:i})),n.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell ${t.CLASS_PREFIX}__cell--max`},n.default.createElement(t.VariableRangeInput,{analyticsId:`${r.ANALYTICS_ID_PREFIX}.variableRange.maximum`,ariaLabel:s.translate(`${t.INPUT_KEY_PREFIX}.ariaLabel.maximum`,{name:o}),disabled:e,min:i,onChange:e=>{u({maxValue:e})},onValidate:m,value:a})),n.default.createElement("td",{className:`${t.CLASS_PREFIX}__cell ${t.CLASS_PREFIX}__cell--scale`},n.default.createElement(t.VariableRangeInput,{analyticsId:`${r.ANALYTICS_ID_PREFIX}.variableRange.scale`,ariaLabel:s.translate(`${t.INPUT_KEY_PREFIX}.ariaLabel.decimalPlaces`,{name:o}),disabled:e,max:l.MAX_SCALE_VALUE,min:0,numberFormatOptions:{maximumFractionDigits:0},onChange:e=>{u({scale:e})},onValidate:E,value:d})))},t.VariableRangeTableRow=a.localizedComponentWrapper(t.BaseVariableRangeTableRow),t.setRowValid=u,t.getInitialRowValidityMap=c,t.isTableValid=d,t.BaseVariableRangeTable=({disabled:e,localize:s,onValidate:a,onVariableDefinitionChange:i,titleId:o,variableDefinitions:r})=>{const[l,p]=n.useState(c(r));n.useEffect(()=>{a(d(l))},[d(l),a]);return n.default.createElement("table",{"aria-describedby":o,className:`${t.CLASS_PREFIX}`},n.default.createElement("tbody",{className:`${t.CLASS_PREFIX}__body`},n.default.createElement("tr",{className:`${t.CLASS_PREFIX}__row`},n.default.createElement("td",null),n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,scope:"col"},s.translate(`${t.TRANSLATION_KEY_PREFIX}.table.headers.minimum`)),n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,scope:"col"},s.translate(`${t.TRANSLATION_KEY_PREFIX}.table.headers.maximum`)),n.default.createElement("th",{className:`${t.CLASS_PREFIX}__header ${t.CLASS_PREFIX}__header--column`,scope:"col"},s.translate(`${t.TRANSLATION_KEY_PREFIX}.table.headers.decimalPlaces`))),r&&r.map(s=>{if(!s)return null;const{maxValue:a,minValue:o,name:r,scale:c}=s;return n.default.createElement(t.VariableRangeTableRow,{disabled:e,key:r,maxValue:a,minValue:o,name:r,onChange:e=>{i({...s,...e})},onValidate:e=>{p(u(l,r,e))},scale:c})})))},t.VariableRangeTable=a.localizedComponentWrapper(t.BaseVariableRangeTable),t.BaseVariableRange=({disabled:e,localize:s,onValidate:a,onVariableDefinitionChange:i,variableDefinitions:r})=>{const[l]=n.useState(o.getId("calculated-question-variable-ranges-table-title-")),u=r&&r.length>0;return n.default.createElement("div",{className:`${t.CLASS_PREFIX}__container`},n.default.createElement("h4",{className:`${t.CLASS_PREFIX}__title`,id:l},s.translate(`${t.TRANSLATION_KEY_PREFIX}.title`)),u?n.default.createElement(t.VariableRangeTable,{disabled:e,onValidate:a,onVariableDefinitionChange:i,titleId:l,variableDefinitions:r}):n.default.createElement("span",{className:`${t.CLASS_PREFIX}__no-variables`},s.translate(`${t.TRANSLATION_KEY_PREFIX}.noVariables`)))},t.default=a.localizedComponentWrapper(t.BaseVariableRange)},CvmH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("KTc4");t.default=n.default},D0DQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S");s("KTib");t.default=e=>{const{disabled:t,editable:s,inputDescriptionText:i,inputLabelText:o,inputText:r,onInputChange:l}=e;return s?n.default.createElement("div",{className:"fimb-question-answer-input fimb-question-answer-input--edit"},n.default.createElement(a.TextField,{value:r,disabled:t,label:o,onChanged:l,analyticsId:"fimbQuestionAnswerInput.edit.textField"})):n.default.createElement("div",{className:"fimb-question-answer-input fimb-question-answer-input--read"},n.default.createElement("div",{className:"fimb-question-answer-input__label"},o),n.default.createElement("div",{className:"fimb-question-answer-input__input-wrapper"},n.default.createElement("div",{className:"fimb-question-answer-input__answer"},r),n.default.createElement("div",{className:"fimb-question-answer-input__description"},i)))}},DeRc:function(e,t,s){"use strict";s.r(t)},DjPm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("ERkP"),a=s("mzw0"),i=s("gYi3"),o=s("A4Z1");t.MathEditor=({apiBasePath:e,className:t,locale:s,initialMathML:r,isRtl:l,onError:u,onLoad:c})=>{const d=n.useRef(null),{initError:p,isReady:m,wirisEditorInstance:h}=a.useWirisEditor(d,e,r,s),f=i.useStyles();return n.useEffect(()=>{h&&m&&c(h)},[h]),n.useEffect(()=>{p&&u(p)},[p]),n.createElement(o.AnalyticsJssThemeProvider,{theme:"light",isRtl:l},n.createElement("div",{className:`${f.mathEditor} math-editor ${t||""}`,ref:d}))},t.MathEditor.displayName="MathEditor"},E8Oa:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("JfV0"),o=s("Vng8"),r=n.__importDefault(s("NzPg")),l=n.__importDefault(s("ZfLe")),u=n.__importStar(s("jPx/"));class c extends a.Component{constructor(){super(...arguments),this.validate=(e,t)=>{const s=t,n=s.answers.some(e=>""===e.answerText.rawText),a=s.prompts.some(e=>""===e.promptText.rawText);return!(n||a)&&o.hasMatchingQuestionChanged(e,s)},this.onQuestionChange=(e,t)=>{const s={...e,prompts:this.updatePromptsPartialCreditPercentage(e)};this.props.onQuestionChange(s,this.validate,t)},this.onAnswerChange=e=>{const{question:t}=this.props,s=t.answers.map(t=>t.ui.id===e.ui.id?e:t),n={...t,answers:s};this.onQuestionChange(n)},this.onPromptChange=e=>{const{question:t}=this.props,s=t.prompts.map(t=>t.id===e.id?e:t),n={...t,prompts:s};this.onQuestionChange(n)},this.onPromptAnswerPairAddition=()=>{const{question:e,setActiveEditorId:t}=this.props,s=i.Questions.createMatchingAnswer(),n=i.Questions.createMatchingPrompt(e.answers.length),a={...e,prompts:[...e.prompts,n],answers:[...e.answers,s]};this.onQuestionChange(a,()=>t(`prompt-${n.id}`))},this.onDistractorAddition=()=>{const{question:e,setActiveEditorId:t}=this.props,s=i.Questions.createMatchingAnswer(!0),n={...e,answers:[...e.answers,s]};this.onQuestionChange(n,()=>t(`distractor-${s.ui.id}`))},this.onPromptAnswerPairDeletion=e=>{const{question:t}=this.props;this.onQuestionChange(u.removePairFromQuestion(t,e))},this.onDistractorDeletion=e=>{const{question:t}=this.props,s=t.answers.findIndex(t=>t.ui.id===e),n=u.removeAnswerFromQuestion(t,s);this.onQuestionChange(n)},this.onPromptAnswerReuse=(e,t)=>{const{question:s}=this.props,n=s.prompts.findIndex(t=>t.id===e),a=s.prompts[n],i=s.prompts[n].matchingAnswerIndex,o=s.prompts[t].matchingAnswerIndex,r=[...s.prompts.slice(0,n),{...a,matchingAnswerIndex:o,reusesAnswer:!0},...s.prompts.slice(n+1)];let l={...s,prompts:r,answers:s.answers};a.reusesAnswer||(l=u.removeAnswerFromQuestion(l,i)),this.onQuestionChange(l)},this.onPromptRemoveReusedAnswer=e=>{const{question:t,setActiveEditorId:s}=this.props,n=t.prompts.findIndex(t=>t.id===e),a=i.Questions.createMatchingAnswer(!1),o=[...t.answers,a],r=o.length-1,l=[...t.prompts.slice(0,n),{...t.prompts[n],matchingAnswerIndex:r,reusesAnswer:!1},...t.prompts.slice(n+1)],c={...t,prompts:l,answers:o};this.onQuestionChange(c,()=>s(u.getAnswerEditorId(e)))},this.canDeletePromptAnswerPair=e=>{const{question:t}=this.props;return t.prompts.length>i.MATCHING_MINIMUM_REQUIRED_AMOUNT_OF_PROMPTS&&(t.answers.length>i.MATCHING_MINIMUM_REQUIRED_AMOUNT_OF_ANSWERS||e)},this.canDeleteDistractor=()=>{const{question:e}=this.props;return e.answers.length>i.MATCHING_MINIMUM_REQUIRED_AMOUNT_OF_ANSWERS},this.onScoringOptionsChange=e=>{const{question:t}=this.props,s={...t,...e};this.onQuestionChange(s)},this.updatePromptsPartialCreditPercentage=e=>{const t=e=>{return Math.round(1e5*e)/1e5},s=e.prompts,n=(e=>{return Math.trunc(1e5*e)/1e5})(100/s.length),a=-1*n,i=t(100-n*s.length);return s.map((e,o)=>{return o===s.length-1?{...e,partialCredit:t(n+i),negativeCredit:t(a-i)}:{...e,partialCredit:n,negativeCredit:a}})}}render(){return a.default.createElement(r.default,Object.assign({},this.props,{canDeleteDistractor:this.canDeleteDistractor,canDeletePromptAnswerPair:this.canDeletePromptAnswerPair,onAnswerChange:this.onAnswerChange,onDistractorAddition:this.onDistractorAddition,onDistractorDeletion:this.onDistractorDeletion,onPromptAnswerPairAddition:this.onPromptAnswerPairAddition,onPromptAnswerPairDeletion:this.onPromptAnswerPairDeletion,onPromptAnswerReuse:this.onPromptAnswerReuse,onPromptRemoveReusedAnswer:this.onPromptRemoveReusedAnswer,onPromptChange:this.onPromptChange,onQuestionChange:this.onQuestionChange,onScoringOptionsChange:this.onScoringOptionsChange}))}}t.MatchingContainer=c,t.default=l.default(c)},E8lv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("MmQQ");t.LocalizedPeerNotEnoughSubmissionsBanner=n.LocalizedPeerNotEnoughSubmissionsBanner,t.LocalizedPeerReviewPeriodOpenBanner=n.LocalizedPeerReviewPeriodOpenBanner,t.LocalizedPeerReviewHasBeenDeletedBanner=n.LocalizedPeerReviewHasBeenDeletedBanner;var a=s("Sa8I");t.TimeLimitOverriddenByDueDateBanner=a.TimeLimitOverriddenByDueDateBanner},EC4L:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=n.__importStar(s("nsO7")),o=s("nBlB"),r=s("JfV0"),l=n.__importDefault(s("RtIR")),u=s("y3re"),c=n.__importDefault(s("MDkG")),d=n.__importDefault(s("YqWx"));s("Syma");class p extends a.Component{constructor(){super(...arguments),this.questionPreviews={},this.getPreview=(e,t)=>{const s=e.id,n=this.questionPreviews[s];return null==n||n.question===e&&n.questionTitle===t||(this.questionPreviews[s]=null),null==this.questionPreviews[s]&&(this.questionPreviews[s]={question:e,questionTitle:t,preview:a.default.createElement(d.default,{question:e,questionTitle:t})}),this.questionPreviews[s].preview},this.hasQuestionCreatePermissions=e=>!0===i.get(e,"permissions.create"),this.getDraggingLabelObject=(e,t,s)=>{const n=this.props.keyInsertIndex-1;return this.props.isKeyboardMoving?e===n?{string:"assessments.canvas.drop.buttonStart",relation:""}:0===this.props.keyInsertIndex?{string:"assessments.canvas.drop.buttonTop",relation:""}:l.default("drop",this.props.items[n],s[n]):l.default("drag",t,s[e])},this.getQuestionTitleArray=()=>{const{items:e,localize:t}=this.props;let s=0;return e.map(e=>{if(!r.Questions.isPresentationOnly(e)){let n="assessments.canvas.question.header.",a={};if(r.Questions.isQuestionBlock(e)&&e.numOfQuestionsToChoose>1){const t=s+1,i=s+e.numOfQuestionsToChoose;n+="titleBlock",a={blockStart:t,blockEnd:i},s=i}else r.Questions.isQuestionBlock(e)&&0===e.numOfQuestionsToChoose?n+="titleBlockEmpty":(n+="title",a={position:s+=1});return t.translate(n,a)}return null})}}render(){const{items:e,localize:t,AddButton:s,hasSubmissions:n,hasAssessmentModifyPermissions:i,isLoadingInProgress:o,notification:r}=this.props,d=new u.FeatureAnnouncementsHelper(e).getQuestionFeatureAnnouncements(),p=this.getQuestionTitleArray();return a.default.createElement("div",null,o||n||!i?a.default.createElement("div",{className:"assessment-canvas-react__question-spacer"}):a.default.createElement(s,{buttonAriaLabel:t.translate("assessments.canvas.add.buttonTop"),index:0,analyticsId:"assessments.canvas.add"}),r&&"start"===r.positionAfter&&a.default.createElement(r.Component,null),e.map(({alignedGoals:e,...i},o)=>{const u=o+1,m=this.getDraggingLabelObject(o,i,p),h=l.default("add",i,p[o]);return a.default.createElement("div",{key:i.id},a.default.createElement(c.default,Object.assign({alignedGoals:e,question:i,questionTitle:p[o],dragButtonAriaLabel:t.translate(m.string,{relatedContent:m.relation}),index:o,preview:this.getPreview(i,p[o]),showFeatureAnnouncement:d[i.id]},this.props)),!n&&this.hasQuestionCreatePermissions(i)?a.default.createElement(s,{index:u,buttonAriaLabel:t.translate(h.string,{relatedContent:h.relation}),analyticsId:"assessments.canvas.addQuestion"}):a.default.createElement("div",{className:"assessment-canvas-react__question-spacer"}),r&&i.id===r.positionAfter&&a.default.createElement(r.Component,null))}))}}t.UnwrappedQuestionList=p,t.default=o.DragNDropContainer(p)},FwPp:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("MC1S"),o=s("JfV0"),r=s("kBJj"),l=s("nsO7"),u=s("Vng8"),c=s("3ZJq"),d=n.__importDefault(s("PCGI")),p=s("gTAB"),m=s("WGaE"),h=n.__importStar(s("TIvv")),f=n.__importDefault(s("ZfLe")),g=n.__importStar(s("AiU9")),E=n.__importDefault(s("CvmH")),_=n.__importStar(s("OPED")),b=n.__importStar(s("p1hm")),y=s("/R3Y");s("gZ3u");const C=n.__importDefault(s("7LMM")),w=s("1Xy2");class v extends a.Component{constructor(e){var t;super(e),this.QuestionRef=a.default.createRef(),this.getTranslatedIdentifier=e=>this.state.translatedIdentifiersMap[e]||e,this.textContainsClosedBracketsWithTextInside=e=>{const t=e.match(/\[(.*)\]/i);return null!==t&&""!==t[1]},this.validate=(e,t,s,n,a,i)=>{const o=e.points!==t.points,r=u.hasFullCreditFlagChanged(e,t),c=n.rawText;return!(r||o||u.isNewQuestion(t)||!c||c!==a.rawText||!u.hasAutomatedFeedbackChanged(e,t))||!1!==i&&(!l.isEqual(e,t)||(this.props.hasSubmissions?o?u.havePointsChangedToPositive(s.points,t.points):r:u.havePointsChangedToPositive(s.points,t.points)))},this.onQuestionChange=e=>{const{originalDisplayQuestionText:t,isAnswersEditMode:s}=this.state,n=this.props.question.questionText;this.props.onQuestionChange({...e,questionText:n},(n,a,i)=>this.validate(n,a,i,t,e.questionText,s)),this.setState({isValidTemplate:this.textContainsClosedBracketsWithTextInside(e.questionText.rawText),displayQuestionText:e.questionText})},this.onTranslate=(e,t,s,n,a)=>{this.setState(s=>({isAnswersEditMode:a,disableAnswersTextFields:!a,displayQuestionText:{rawText:e},translatedIdentifiersMap:{...s.translatedIdentifiersMap,...t}}),()=>this.refreshBbml())},this.translateIdent=e=>{const t=e.split("-")[1];return this.props.babelfishInstance.translate(this.props.currentLocale,"assessments.canvas.question.fimb.blank",{count:t})},this.onScoringOptionsChange=e=>{const{question:t}=this.props,s={...t,...e};this.onQuestionChange(s)},this.translateQuestion=(e,t,s,n)=>{let a=e;const i={...s},o=[];return t.forEach(e=>{if(i[e.ident]){const t=i[e.ident];a=a.replace(e.ident,t)}else o.push(this.translateIdent(e.ident).then(t=>{a=a.replace(e.ident,t),i[e.ident]=t}))}),Promise.all(o).then(()=>{this.onTranslate(a,i,e,t,n)})},this.parseQuestionText=()=>{const e={courseId:this.props.courseId,assessmentId:this.props.question.assessmentId};return o.parseFIMBQuestionText(this.state.displayQuestionText,e)},this.refreshBbml=()=>{this.setState({refreshBbml:!0},()=>this.setState({refreshBbml:!1}))},this.removeIdentifierWrappersInQuestionText=e=>{var t;const s=document.createElement("div");s.innerHTML=e;const n=s.querySelectorAll("a[data-bbfile]");if(null!=n&&n.length>0)for(let e=0;e<n.length;e+=1){const s=n[e];-1!==(null===(t=s.getAttribute("data-bbfile"))||void 0===t?void 0:t.indexOf("fimb-answer-value"))&&(s.outerHTML=s.innerHTML)}return s.innerHTML},this.replaceQuestionTextWithAnswers=(e,t)=>{let s=this.removeIdentifierWrappersInQuestionText(e);return t.forEach(e=>{const t=e.answerValues.map(e=>e.value).join(b.ANSWER_DELIMITER),n=this.getTranslatedIdentifier(e.ident);s=s.replace(n,t)}),s},this.toggleAnswersEditMode=()=>{this.state.isAnswersEditMode?this.setAnswersEditModeOff():this.setAnswersEditModeOn()},this.setAnswersEditModeOff=()=>{this.setState((e,t)=>({isAnswersEditMode:!1,disableAnswersTextFields:!0,displayQuestionText:{rawText:this.replaceQuestionTextWithAnswers(e.displayQuestionText.rawText,t.question.answers)}}),this.refreshBbml),this.props.onQuestionChange(this.props.question,()=>!1)},this.setAnswersEditModeOn=()=>{const{question:e,hasSubmissions:t}=this.props;return this.parseQuestionText().then(s=>{var n;const a=s.answers.length!==e.answers.length;if(t&&a)return void this.setState({regradingError:!0},()=>{this.QuestionRef.current.scrollIntoView({behavior:"smooth",block:"start"})});!0===this.state.regradingError&&this.setState({regradingError:!1});const i={...e,answers:s.answers,questionText:{...e.questionText,rawText:s.replacedQuestionText}};u.hasFIMBQuestionChanged(e,i)||(i.answers=e.answers);(null===(n=i.questionText)||void 0===n?void 0:n.webLocation)&&delete i.questionText.webLocation,this.props.onQuestionChange(i,e=>!l.isEqual(e,i),()=>{this.translateQuestion(s.replacedQuestionText,s.answers,this.state.translatedIdentifiersMap,!0)})})},this.startEditMode=e=>{this.props.startEditMode(()=>{this.setState((e,t)=>{const s={rawText:this.replaceQuestionTextWithAnswers(e.displayQuestionText.rawText,t.question.answers)},n={originalDisplayQuestionText:s,displayQuestionText:s};return e.isAnswersEditMode&&(n.isAnswersEditMode=!1,n.disableAnswersTextFields=!0),n},()=>{this.refreshBbml(),e&&e()})})},this.onAnswerChange=e=>{const{question:t,onQuestionChange:s}=this.props,n=t.answers.map(t=>t.ident===e.ident?e:t),a={...t,answers:n},i=a.answers.some(e=>{return!e.answerValues.some(e=>e.value)});s(a,()=>!i)},this.dismissRegradingError=()=>{this.setState({regradingError:!1})},this.state={isValidTemplate:this.textContainsClosedBracketsWithTextInside(null===(t=e.question.questionText)||void 0===t?void 0:t.rawText),isAnswersEditMode:!1,disableAnswersTextFields:!0,refreshBbml:!1,translatedIdentifiersMap:{},displayQuestionText:{rawText:""},originalDisplayQuestionText:{rawText:""},regradingError:!1};const s=this.props.question;if(s&&s.questionText&&s.answers&&s.answers.length>0){const e=this.translateQuestion(s.questionText.rawText,s.answers,{},!1);p.EditModeEnum.ACTIVE===this.props.editMode&&e.then(()=>{this.setState(e=>({displayQuestionText:{rawText:this.replaceQuestionTextWithAnswers(e.displayQuestionText.rawText,s.answers)}}),()=>{this.refreshBbml()})})}}static getDerivedStateFromProps(e,t){if(e.refreshBbml){let s=e.question.questionText.rawText;return e.question.answers.forEach(e=>{const n=t.translatedIdentifiersMap[e.ident];s=s.replace(e.ident,n)}),{...t,displayQuestionText:{rawText:s},regradingError:!1}}return null}render(){const{isValidTemplate:e,isAnswersEditMode:t,disableAnswersTextFields:s,regradingError:n}=this.state,o=p.EditModeEnum.ACTIVE===this.props.editMode,l={...this.props.question,questionText:this.state.displayQuestionText},f=this.props.localize.translate("assessments.canvas.question.fimb.regradingErrorMessage"),v=o&&u.hasLinkedQuestion(this.props.question),S=o&&!t,P=[{key:w.noPartialCredit},{key:w.partialCreditNoPenalty}],A=a.default.createElement(C.default,{question:this.props.question,onScoringOptionsChange:this.onScoringOptionsChange,editMode:this.props.editMode,isAnswersEditMode:t,options:P,translationKeyPrefix:"assessments.canvas.question.multipleAnswer.scoringOptions"});return a.default.createElement("div",{className:`fimb-question ${o?"fimb-question--edit":"fimb-question--read"}`,ref:this.QuestionRef},n&&a.default.createElement(i.Notification,{type:i.NotificationType.Failure,message:f,onClose:this.dismissRegradingError}),a.default.createElement(d.default,{editMode:this.props.editMode,question:l},a.default.createElement(m.LinkedQuestionNotification,{show:v,usageCount:this.props.question.usageCount}),a.default.createElement(h.default,Object.assign({},h.getPluggableQuestionHeaderProps(this.props,this.onQuestionChange),{question:l,onPointsClick:this.startEditMode})),a.default.createElement(g.default,Object.assign({},g.getQuestionControlProps(this.props),{startEditMode:this.startEditMode})),a.default.createElement(E.default,{instructions:this.props.localize.translate("assessments.canvas.question.fimb.instructions"),show:S}),a.default.createElement(_.default,Object.assign({},_.getQuestionTextProps(this.props,this.onQuestionChange),{disableEditor:t,editorPlugins:[r.customClass()],question:l,refreshBbml:this.state.refreshBbml||this.props.refreshBbml}))),this.props.question.answers&&this.props.question.answers.length>0&&a.default.createElement("div",{className:y.removeExtraWhitespace(`fimb-question__answers-container\n                          fimb-question__answers-container--${o?"edit":"read"}`)},this.props.question.answers.map(e=>a.default.createElement(b.default,{answer:e,assessmentId:this.props.question.assessmentId,courseId:this.props.courseId,disabled:s,inputLabel:this.getTranslatedIdentifier(e.ident),key:e.ident,onAnswerChange:this.onAnswerChange,readOnly:!o}))),o&&a.default.createElement("div",{className:`fimb-question__mode-changer ${t?"-off":"-on"}`},a.default.createElement(i.Link,{onClick:this.toggleAnswersEditMode,disabled:!t&&!e,analyticsId:"assessments.canvas.question.fimb.step.link"},t?this.props.localize.translate("assessments.canvas.question.fimb.previousStep"):this.props.localize.translate("assessments.canvas.question.fimb.nextStep"))),this.props.question.answers&&this.props.question.answers.length>1?A:"",a.default.createElement(c.AutomatedQuestionFeedback,{editMode:this.props.editMode,onQuestionChange:this.onQuestionChange,question:l,setActiveEditorId:this.props.setActiveEditorId,activeEditorId:this.props.activeEditorId,pluginsConfig:this.props.pluginsConfig}))}}t.Fimb=v;const S=f.default(v);t.default=S},G5c7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("gTAB"),i=s("Vng8"),o=s("/R3Y");s("JKrv"),t.BaseQuestionComponent=({editMode:e,question:t,children:s})=>{const r=a.EditModeEnum.ACTIVE===e;return n.default.createElement("div",{className:o.removeExtraWhitespace(`\n                    base-question\n                    ${r?"base-question--edit":"base-question--read"}\n                    ${i.isNewQuestion(t)?"js-new-question":""}\n                `)},n.default.createElement("div",{className:"base-question__content"},s))},t.default=t.BaseQuestionComponent},"GD/5":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("eecw");t.default=n.default},GOY5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=s("zGdY"),i=s("5Y6Q"),o=s("MC1S");var r,l;t.FREEFORM_IDENTIFIER="freeform",function(e){e[e.Answered=0]="Answered",e[e.Unanswered=1]="Unanswered",e[e.All=2]="All"}(r=t.QuestionStatusFilter||(t.QuestionStatusFilter={})),function(e){e.First="first",e.Previous="previous",e.Next="next",e.Last="last"}(l=t.NavigationOptions||(t.NavigationOptions={}));class u{constructor(){this.questionAttempts=[],this.questionAttemptPages=[],this.questionAttemptLookup={},this.filter={},this.currentPageIndex=0,this.firstQuestionOnCurrentPageIndex=0,this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.unsavedQuestionAttemptIds={},this.queuedFiltering=!1,this.queuedNavigation=null,this.currentVisibleQuestionAttemptsPage=[],this.canNavigateBackward=!1,this.canNavigateForward=!1,this.totalQuestionCount=0,this.unansweredQuestionCount=0,this.questionsMatchingFilterCount=0}isAnswerable(e){return e.questionType!==a.QuestionType.PresentationOnly}augmentCurrentQuestionAttempt(e,t,s){this.questionAttemptLookup[e.id]=e,e.onAnswerChanging=this.onAnswerChanging,e.onAnswerPersisted=this.onAnswerPersisted,e.questionIndex=t,e.pageIndex=s,e.isVisibleGivenFilter=!0}calculateUnansweredQuestionCount(){this.unansweredQuestionCount=this.questionAttempts.filter(i.isUnansweredQuestion).length}setCurrentVisibleQuestionAttemptsPage(){this.currentVisibleQuestionAttemptsPage=[];const e=this.questionAttemptPages[this.currentPageIndex];e&&(this.currentVisibleQuestionAttemptsPage=e.filter(e=>e.isVisibleGivenFilter))}currentPageHasUnsavedAnswers(){return Object.keys(this.unsavedQuestionAttemptIds).length>0}onFilterChanged(e){this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.questionsMatchingFilterCount=0,this.calculateNavigationState(),this.processQuestionAttemptsBackwards(e),this.processQuestionAttemptsForwards(e),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}processQuestionAttemptsBackwards(e){if(this.currentPageIndex>0)for(let t=this.firstQuestionOnCurrentPageIndex-1;t>=0;t--){const s=this.isQuestionAttemptVisible(t,e);s&&null==this.previousPageIndex&&(this.previousPageIndex=this.questionAttempts[t].pageIndex),s&&(this.firstPageIndex=this.questionAttempts[t].pageIndex)}}processQuestionAttemptsForwards(e){for(let t=this.firstQuestionOnCurrentPageIndex;t<this.questionAttempts.length;t++){const s=this.isQuestionAttemptVisible(t,e),n=this.questionAttempts[t].pageIndex;s&&n>this.currentPageIndex&&null==this.nextPageIndex&&(this.nextPageIndex=this.questionAttempts[t].pageIndex),s&&n>this.currentPageIndex&&(this.lastPageIndex=this.questionAttempts[t].pageIndex)}}isQuestionAttemptVisible(e,t){if(t){const s=this.evaluateQuestionAgainstFilter(this.questionAttempts[e],t);return this.questionsMatchingFilterCount+=s&&this.isAnswerable(this.questionAttempts[e])?1:0,s}return this.questionAttempts[e].isVisibleGivenFilter}evaluateQuestionAgainstFilter(e,t){let s=!0;return"status"in t&&(s=e.questionType===a.QuestionType.PresentationOnly||t.status===r.Answered&&e.attemptStatus!==a.AttemptStatus.NotAttempted||t.status===r.Unanswered&&e.attemptStatus===a.AttemptStatus.NotAttempted||t.status===r.All),s&&t.types&&(s=t.types.some(t=>t===e.questionType)),e.isVisibleGivenFilter=s,s}onAnswerChanging(e){this.unsavedQuestionAttemptIds[e.id]=null}onFreeformChanging(){this.unsavedQuestionAttemptIds[t.FREEFORM_IDENTIFIER]=null}onAnswerPersisted(e){delete this.unsavedQuestionAttemptIds[e.id];const t=this.questionAttemptLookup[e.id];t&&(t.attemptStatus=e.attemptStatus,this.calculateUnansweredQuestionCount(),"givenAnswer"in e&&(t.givenAnswer=e.givenAnswer),"givenAnswers"in e&&(t.givenAnswers=e.givenAnswers)),this.processQueuedNavigationAndFiltering()}onFreeformPersisted(){delete this.unsavedQuestionAttemptIds[t.FREEFORM_IDENTIFIER],this.processQueuedNavigationAndFiltering()}calculateNewPageIndexesAfterNavigating(){this.firstPageIndex=null,this.previousPageIndex=null,this.nextPageIndex=null,this.lastPageIndex=null,this.calculateNavigationState(),this.processQuestionAttemptsBackwards(),this.processQuestionAttemptsForwards(),this.calculateNavigationState()}processQueuedNavigationAndFiltering(){if(!this.currentPageHasUnsavedAnswers()){if(null!=this.queuedNavigation){const e=this.queuedNavigation;switch(this.queuedNavigation=null,e){case l.First:this.navigateFirst();break;case l.Previous:this.navigatePrevious();break;case l.Next:this.navigateNext();break;case l.Last:this.navigateLast()}}this.queuedFiltering&&(this.queuedFiltering=!1,this.onFilterChanged(this.filter))}}isPageable(){return!1}isWaitingForPersist(){return this.queuedFiltering||!!this.queuedNavigation}}n.__decorate([o.autobind,n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],u.prototype,"onAnswerChanging",null),n.__decorate([o.autobind,n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],u.prototype,"onAnswerPersisted",null),t.BaseQuestionAttemptView=u},GaPR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),i=s("IVC4"),o=s("sEjo"),r=s("8unJ"),l=s("U9G1");t.LocalizedPeerReviewHasBeenDeletedBanner=r.localizedComponentWrapper(({assignAndNavigateToPeerReview:e,dismissBanner:t,hasEnoughSubmissionsForPeerAssessment:s,canRetrieveNewPeerReview:r,localize:u})=>{const c=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.startNewReviewButton"),d=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.dismissButton"),p=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.notice"),m=u.translate("banners.peerAssessments.peerReviewHasBeenDeleted.notEnoughSubmissionsNotice"),h=s?p:m,{bannerClass:f,iconWrapperClass:g,iconClass:E,actionClass:_,buttonClass:b}=l.useStyles(),y=[n.createElement(o.AnalyticsOutlineButton,{analyticsId:"course.assessments.assessment-overview.peerReview.peerReviewDeletedBanner.dismissButton",key:"dismiss",onClick:t,className:b},d)];return r&&y.push(n.createElement(o.AnalyticsOutlineButton,{analyticsId:"course.assessments.assessment-overview.peerReview.peerReviewDeletedBanner.startNewReviewButton",key:"startNewReviewButton",onClick:e,className:b},c)),n.createElement(a.AnalyticsBanner,{severity:"warning",actions:y,icon:n.createElement(i.Attention,{className:E}),classes:{root:f,icon:g,action:_}},n.createElement("span",{className:"js-banner-contents"},h))})},Ggyl:function(e,t,s){"use strict";s.r(t)},H9Ny:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>({containerClass:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:e.spacing(5)}}))},HAQq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("2yjE")),o=n.__importDefault(s("MozA"));s("Udwz");const r=s("8unJ");t.QuestionPoolQuestionHeaderReadMode=e=>{const{localize:t,questionSourceName:s,deleteQuestion:n,startEditMode:r,hasSubmissions:l,hasAssessmentModifyPermissions:u,overflowMenuButtonLabelData:c}=e;return a.default.createElement("div",{className:"question-pool-question-header question-pool-question-header--read"},a.default.createElement("div",{className:"question-pool-question-header__title-row"},a.default.createElement(i.default,Object.assign({},e,{showPointsInfo:!1})),a.default.createElement("div",{className:"question-pool-question-header__menu-icon"},a.default.createElement(o.default,{deleteQuestion:n,startEditMode:r,hasSubmissions:l,hasAssessmentModifyPermissions:u,overflowMenuButtonLabelData:c}))),a.default.createElement("div",{className:"question-pool-question-header__question-source"},t.translate("questionPools.questionHeader.questionSource",{questionSourceName:s})))},t.default=r.localizedComponentWrapper(t.QuestionPoolQuestionHeaderReadMode)},HW8w:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>({containerClass:{display:"flex",alignItems:"center",color:"green"},firstButtonClass:{borderRight:`1px solid ${e.palette.secondary.light}`}}))},HZ1V:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx"),a=s("xkx/");t.useStyles=n.makeStyles(e=>n.createStyles({base:{marginTop:"16px","& label$toggleLabel":{cursor:"pointer"}},toggleLabel:{marginLeft:"-8px",marginRight:0},toggleSwitch:{},correct:{margin:"10px 0",[e.breakpoints.up("sm")]:{margin:"21px 0 10px"}},incorrect:{margin:"16px 0 10px"},sectionHeader:{marginBottom:"10px"},sectionTitle:{},sectionInstructions:{color:a.BbSemanticPalette.textMedium},header:{display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flexDirection:"row"}},displaySettings:{display:"flex",alignItems:"center",flexDirection:"row-reverse",marginLeft:"-8px",marginRight:"auto",[e.breakpoints.up("sm")]:{flexDirection:"row",marginLeft:"auto",marginRight:"-8px"}},displaySettingsButton:{}}))},IDN4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("GOY5");class a extends n.BaseQuestionAttemptView{initializeQuestionAttempts(e){this.questionAttempts=e,this.totalQuestionCount=this.questionAttempts.length;let t=0;for(let e=0;e<this.questionAttempts.length;e++)this.augmentCurrentQuestionAttempt(this.questionAttempts[e],e,0),t+=this.isAnswerable(this.questionAttempts[e])?1:0;this.questionAttemptPages=[e],this.totalQuestionCount=t,this.questionsMatchingFilterCount=t,this.calculateUnansweredQuestionCount(),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){this.canNavigateBackward=!1,this.canNavigateForward=!1}navigateFirst(){throw new Error("Navigation is not supported when all questions at once.")}navigatePrevious(){throw new Error("Navigation is not supported when all questions at once.")}navigateNext(){throw new Error("Navigation is not supported when all questions at once.")}navigateLast(){throw new Error("Navigation is not supported when all questions at once.")}isLastPage(){return!0}}t.AllAtOnceQuestionAttemptView=a},IHpG:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("GOY5");class a extends n.BaseQuestionAttemptView{initializeQuestionAttempts(e){this.questionAttempts=e,this.totalQuestionCount=this.questionAttempts.length;let t=0;for(let e=0;e<this.questionAttempts.length;e++)this.augmentCurrentQuestionAttempt(this.questionAttempts[e],e,this.questionAttemptPages.length),t+=this.isAnswerable(this.questionAttempts[e])?1:0,this.questionAttemptPages.push([this.questionAttempts[e]]);const s=this.totalQuestionCount>1;this.nextPageIndex=s?1:null,this.lastPageIndex=s?this.questionAttempts.length-1:null,this.totalQuestionCount=t,this.questionsMatchingFilterCount=t,this.calculateUnansweredQuestionCount(),this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNavigationState()}calculateNavigationState(){1!==this.questionAttemptPages.length&&(this.canNavigateBackward=null!=this.firstPageIndex||null!=this.previousPageIndex,this.canNavigateForward=null!=this.nextPageIndex||null!=this.lastPageIndex)}navigateFirst(){this.canNavigateBackward&&null!=this.firstPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=n.NavigationOptions.First:(this.currentPageIndex=this.firstPageIndex,this.navigate()))}navigatePrevious(){this.canNavigateBackward&&null!=this.previousPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=n.NavigationOptions.Previous:(this.currentPageIndex=this.previousPageIndex,this.navigate()))}navigateNext(){this.canNavigateForward&&null!=this.nextPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=n.NavigationOptions.Next:(this.currentPageIndex=this.nextPageIndex,this.navigate()))}navigateLast(){this.canNavigateForward&&null!=this.lastPageIndex&&(this.currentPageHasUnsavedAnswers()?this.queuedNavigation=n.NavigationOptions.Last:(this.currentPageIndex=this.lastPageIndex,this.navigate()))}isPageable(){return!0}isLastPage(){return this.currentPageIndex===this.questionAttemptPages.length-1}navigate(){this.firstQuestionOnCurrentPageIndex=this.questionAttemptPages[this.currentPageIndex][0].questionIndex,this.setCurrentVisibleQuestionAttemptsPage(),this.calculateNewPageIndexesAfterNavigating()}}t.OneAtATimeQuestionAttemptView=a},IUzX:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=n.__importDefault(s("cFZT"));s("la2Y");const r=n.__importDefault(s("VE9O"));t.default=i.localizedComponentWrapper(({localize:e,headerKey:t,messageKey:s})=>a.default.createElement("div",{className:"question-reuse-sources-empty-state"},a.default.createElement(o.default,{image:r.default,passedClass:"question-reuse-sources-empty-state__image"}),a.default.createElement("h3",{className:"question-reuse-sources-empty-state__title"},e.translate(t)),a.default.createElement("div",{className:"question-reuse-sources-empty-state__message"},e.translate(s))))},J495:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("zGdY"),o=s("AuQm"),r=s("j92x"),l=s("6GoY"),u=s("FgpP"),c=s("t6ux"),d=n.__importDefault(s("CCvt")),p=n.__importDefault(s("OjB1")),m=s("/R3Y"),h=s("9tRF");s("ytrv");const f=n.__importDefault(s("W2w9")),g=s("wMBS");function E(e){return e.hasFullGreaterThanPartialError||e.hasPartialCreditPointsRangeError||e.hasAnswerToleranceNaNError||e.hasPartialCreditToleranceNaNError||e.hasRoundingValueError||e.hasUnitPointsPercentRangeError||e.hasUnitsGreaterThanPartialError||e.hasUnitValueEmptyError||e.hasVariableRangeError||e.hasVariableSetCountNaNError||e.hasVariableSetCountLessThanOneError}t.CLASS_PREFIX="calculated-formula-question__step-2",t.DEFAULT_FULL_CREDIT_TOLERANCE_SETTINGS={correctAnswerTolerance:{type:i.CalculatedFormulaToleranceType.Numeric,value:0}},t.DEFAULT_PARTIAL_CREDIT_SETTINGS={partialCreditPointsPercent:0,partialCreditTolerance:{type:i.CalculatedFormulaToleranceType.Numeric,value:0}},t.DEFAULT_UNITS_SETTINGS={unitValue:"",unitPointsPercent:0};class _ extends a.Component{constructor(e){super(e),this.onFloatTextFieldChangeFactory=(e,t,s)=>n=>t?this.props.onQuestionChange({[t]:{...s,[e]:n}}):this.props.onQuestionChange({[e]:n}),this.onIntegerTextFieldChangeFactory=e=>t=>{this.props.onQuestionChange({[e]:t})},this.onTextFieldChangeFactory=(e,t,s)=>n=>{this.props.onQuestionChange({[t]:{...s,[e]:n}})},this.onDropdownChangedFactory=(e,t,s)=>n=>{this.props.onQuestionChange({[t]:{...s,[e]:n.key}})},this.onCheckboxChangeFactory=e=>t=>{this.props.onQuestionChange({[e]:t.target.checked})},this.updateCorrectAnswerFormat=(e,t)=>{this.props.onQuestionChange({correctAnswerFormat:null==t?void 0:t.key})},this.updateCorrectAnswerPrecision=e=>{const t={correctAnswerPrecision:e.key};e.key===i.CalculatedFormulaAnswerPrecisionType.SignificantFigures&&this.props.question.answerScale<h.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE&&(t.answerScale=h.MIN_SIGNIFICANT_FIGURES_ROUNDING_VALUE),this.props.onQuestionChange(t)},this.handleVariableRangeError=e=>{this.setState({hasVariableRangeError:!e})},this.updateVariableDefinition=e=>{const{onAnswerSetsRelatedFieldDirty:t,onQuestionChange:s,question:n}=this.props,a=n.variableDefinitions.map(t=>t.name===e.name?{...t,...e}:t);t(!0),s({variableDefinitions:a})},this.getFullCreditRangeError=()=>{const{translateKey:e}=this.props,{hasFullGreaterThanPartialError:t,hasAnswerToleranceNaNError:s}=this.state;return s?e("stepTwo.variableSetCount.error.NaN"):t?e("stepTwo.precisionScoring.fullCreditRangeOverlapError"):""},this.getPartialCreditRangeError=()=>{const{translateKey:e}=this.props,{hasFullGreaterThanPartialError:t,hasPartialCreditToleranceNaNError:s}=this.state;return s?e("stepTwo.variableSetCount.error.NaN"):t?e("stepTwo.precisionScoring.partialCreditRangeOverlapError"):""},this.getPartialCreditPointsRangeError=()=>this.state.hasPartialCreditPointsRangeError?this.props.translateKey("stepTwo.precisionScoring.rangeError"):"",this.getVariableSetCountError=()=>{const{hasVariableSetCountNaNError:e,hasVariableSetCountLessThanOneError:t}=this.state,{translateKey:s}=this.props;return e?s("stepTwo.variableSetCount.error.NaN"):t?s("stepTwo.variableSetCount.error.negative"):""},this.getRoundingValueError=()=>{const{question:e,translateKey:t}=this.props,s=h.getMinimumRoundingValue(e.correctAnswerPrecision);return this.state.hasRoundingValueError?t("stepTwo.rounding.invalidInputError",{min:s,max:h.MAX_ROUNDING_VALUE}):""},this.handleGoToNextStep=()=>{const{question:e}=this.props;E(this.state)||(!function(e){return h.isAnswerScaleValid(e)&&h.isAnswerToleranceValid(e)&&h.isPartialCreditPointsPercentValid(e)&&h.isPartialCreditToleranceValid(e)&&h.isPartialCreditValueGreaterThanAnswerValue(e)&&h.isUnitPointsPercentValid(e)&&h.isUnitValueValid(e)&&h.isVariableDefinitionsValid(e)&&h.isVariableSetCountValid(e)}(e)?this.checkForErrors():this.props.onGoToNextStep())},this.checkForErrors=()=>{this.setState(this.getErrorStateFromQuestion())},this.getErrorStateFromQuestion=()=>({...this.getPrecisionScoringErrorStateFromQuestion(),...this.getRoundingValueErrorStateFromQuestion(),...this.getUnitPointsPercentErrorStateFromQuestion(),...this.getUnitValueErrorStateFromQuestion(),...this.getVariableSetCountErrorStateFromQuestion()}),this.getPrecisionScoringErrorStateFromQuestion=()=>({hasFullGreaterThanPartialError:!h.isPartialCreditValueGreaterThanAnswerValue(this.props.question),hasPartialCreditPointsRangeError:!h.isPartialCreditPointsPercentValid(this.props.question),hasAnswerToleranceNaNError:!h.isAnswerToleranceValid(this.props.question),hasPartialCreditToleranceNaNError:!h.isPartialCreditToleranceValid(this.props.question),hasUnitsGreaterThanPartialError:!h.isPartialCreditPercentGreaterThanUnitsPercent(this.props.question)}),this.checkForPrecisionScoringErrors=()=>{this.setState(this.getPrecisionScoringErrorStateFromQuestion())},this.getRoundingValueErrorStateFromQuestion=()=>({hasRoundingValueError:!h.isAnswerScaleValid(this.props.question)}),this.checkForRoundingValueError=()=>{this.setState(this.getRoundingValueErrorStateFromQuestion())},this.getUnitPointsPercentErrorStateFromQuestion=()=>({hasUnitPointsPercentRangeError:!h.isUnitPointsPercentValid(this.props.question),hasUnitsGreaterThanPartialError:!h.isPartialCreditPercentGreaterThanUnitsPercent(this.props.question)}),this.checkForUnitPointsPercentErrors=()=>{this.setState(this.getUnitPointsPercentErrorStateFromQuestion())},this.getUnitValueErrorStateFromQuestion=()=>({hasUnitValueEmptyError:!h.isUnitValueValid(this.props.question)}),this.checkForUnitValueErrors=()=>{this.setState(this.getUnitValueErrorStateFromQuestion())},this.getVariableSetCountErrorStateFromQuestion=()=>{const{variableSetCount:e}=this.props.question;return{hasVariableSetCountNaNError:null==e,hasVariableSetCountLessThanOneError:null!=e&&e<h.MIN_ANSWER_SETS}},this.checkForVariableSetCountErrors=()=>{this.setState(this.getVariableSetCountErrorStateFromQuestion())},this.getToleranceTypeDropdown=(e,s,n,o)=>{const{translateKey:r}=this.props,l=[{key:i.CalculatedFormulaToleranceType.Numeric,className:`${t.CLASS_PREFIX}__precision-type--numeric`,text:r("stepTwo.precisionScoring.numberOption"),index:0,ariaLabel:r("stepTwo.precisionScoring.numberOption"),selected:e===i.CalculatedFormulaToleranceType.Numeric},{key:i.CalculatedFormulaToleranceType.Percent,className:`${t.CLASS_PREFIX}__precision-type--percent`,text:r("stepTwo.precisionScoring.percentageOption"),index:1,ariaLabel:r("stepTwo.precisionScoring.percentageOption"),selected:e===i.CalculatedFormulaToleranceType.Percent}];return a.default.createElement("div",{className:o},a.default.createElement(u.Dropdown,{analyticsId:`${n}.dropdown`,options:l,onChanged:s,selectedKey:e}))},this.getRoundingValueLabel=e=>{const{translateKey:t}=this.props;return e===i.CalculatedFormulaAnswerPrecisionType.Decimal?t("stepTwo.rounding.valueArialLabel.decimal"):t("stepTwo.rounding.valueArialLabel.significantFigure")},this.toggleAnswerToleranceOptionsVisibility=e=>{this.props.onQuestionChange({...t.DEFAULT_FULL_CREDIT_TOLERANCE_SETTINGS}),this.setState({areAnswerToleranceOptionsVisible:e.target.checked,hasFullGreaterThanPartialError:!1})},this.toggleAllowPartialCredit=e=>{const s=e.target.checked;this.props.onQuestionChange({...t.DEFAULT_PARTIAL_CREDIT_SETTINGS,allowPartialCredit:s}),this.setState({hasPartialCreditPointsRangeError:!1,hasFullGreaterThanPartialError:!1,hasUnitsGreaterThanPartialError:!h.isPartialCreditPercentGreaterThanUnitsPercent({...this.props.question,allowPartialCredit:s})})},this.toggleUnitsRequired=e=>{const s=e.target.checked;this.props.onQuestionChange({units:{...t.DEFAULT_UNITS_SETTINGS,unitsRequired:s}}),this.setState({hasUnitPointsPercentRangeError:!1,hasUnitsGreaterThanPartialError:!1,hasUnitValueEmptyError:!1})};const{correctAnswerTolerance:s}=e.question;this.state={areAnswerToleranceOptionsVisible:s&&s.value>0,hasFullGreaterThanPartialError:!1,hasAnswerToleranceNaNError:!1,hasPartialCreditToleranceNaNError:!1,hasPartialCreditPointsRangeError:!1,hasRoundingValueError:!1,hasUnitPointsPercentRangeError:!1,hasUnitsGreaterThanPartialError:!1,hasUnitValueEmptyError:!1,hasVariableRangeError:!1,hasVariableSetCountNaNError:!1,hasVariableSetCountLessThanOneError:!1}}componentDidMount(){this.checkForErrors()}componentDidUpdate(e,t){const s=E(t),n=E(this.state);s!==n&&this.props.onValidate(!n),e.question.variableSetCount!==this.props.question.variableSetCount&&this.props.onAnswerSetsRelatedFieldDirty(!0)}render(){var e;const{areAnswerToleranceOptionsVisible:s,hasRoundingValueError:n,hasUnitPointsPercentRangeError:_,hasUnitsGreaterThanPartialError:b,hasUnitValueEmptyError:y}=this.state,{hasSubmissions:C,onGoBackStep:w,question:v,translateKey:S}=this.props,{answerScale:P,allowPartialCredit:A,correctAnswerFormat:T,correctAnswerPrecision:I,correctAnswerTolerance:D,displayRoundingSettingsToStudent:R,partialCreditPointsPercent:F,partialCreditTolerance:Q,units:N,variableDefinitions:x,variableSetCount:k}=v,q=this.getRoundingValueLabel(I),L=this.getFullCreditRangeError(),M=this.getPartialCreditRangeError(),O=this.getPartialCreditPointsRangeError(),B=this.getVariableSetCountError();return a.default.createElement("div",{className:t.CLASS_PREFIX},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-format`},a.default.createElement(l.ChoiceGroup,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerFormat.choiceGroup`,legendLabel:S("stepTwo.answerFormat.title"),defaultSelectedKey:T,options:[{key:i.CalculatedFormulaAnswerFormatType.Normal,text:S("stepTwo.answerFormat.normalOption"),checked:T===i.CalculatedFormulaAnswerFormatType.Normal},{key:i.CalculatedFormulaAnswerFormatType.Exponential,text:S("stepTwo.answerFormat.exponentialOption"),checked:T===i.CalculatedFormulaAnswerFormatType.Exponential}],onChange:this.updateCorrectAnswerFormat,disabled:C})),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__rounding-inputs`},a.default.createElement(u.Dropdown,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.roundingType.dropdown`,selectedKey:I,label:S("stepTwo.rounding.title"),options:[{key:i.CalculatedFormulaAnswerPrecisionType.Decimal,text:S("stepTwo.rounding.decimalOption"),index:0,ariaLabel:S("stepTwo.rounding.decimalOption"),selected:I===i.CalculatedFormulaAnswerPrecisionType.Decimal},{key:i.CalculatedFormulaAnswerPrecisionType.SignificantFigures,text:S("stepTwo.rounding.significantFigureOption"),index:1,ariaLabel:S("stepTwo.rounding.significantFigureOption"),selected:I===i.CalculatedFormulaAnswerPrecisionType.SignificantFigures}],onChanged:this.updateCorrectAnswerPrecision,disabled:C}),a.default.createElement("div",{className:m.removeExtraWhitespace(`\n                            ${t.CLASS_PREFIX}__rounding-inputs__text-field\n                            ${n?`${t.CLASS_PREFIX}__rounding-inputs__text-field--has-error`:""}\n                        `)},a.default.createElement(o.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.rounding.textField`,ariaLabel:q,className:n?"has-error":"",disabled:C,helperText:this.getRoundingValueError(),onBlur:this.checkForRoundingValueError,onChange:this.onIntegerTextFieldChangeFactory("answerScale"),max:h.MAX_ROUNDING_VALUE,min:h.getMinimumRoundingValue(I),numberFormatOptions:{maximumFractionDigits:0},validate:()=>!this.getRoundingValueError(),value:P}))),a.default.createElement(r.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.displayRoundingSettings.checkbox`,checked:R,className:`${t.CLASS_PREFIX}__display-rounding-settings__checkbox`,onChange:this.onCheckboxChangeFactory("displayRoundingSettingsToStudent"),label:S("stepTwo.rounding.displayRoundingSettingsToStudent")}),a.default.createElement("fieldset",{className:`${t.CLASS_PREFIX}__fieldset ${t.CLASS_PREFIX}__precision-scoring`},a.default.createElement("legend",{className:`${t.CLASS_PREFIX}__fieldset__legend`},S("stepTwo.precisionScoring.title")),a.default.createElement(r.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.fullCredit.checkbox`,checked:s,className:`${t.CLASS_PREFIX}__full-credit-precision__checkbox`,onChange:this.toggleAnswerToleranceOptionsVisibility,label:S("stepTwo.precisionScoring.fullCreditLabel")}),s&&a.default.createElement("div",{className:`${t.CLASS_PREFIX}__precision-scoring-input-group`},this.getToleranceTypeDropdown(D&&D.type,this.onDropdownChangedFactory("type","correctAnswerTolerance",D),`${c.ANALYTICS_ID_PREFIX}.precisionScoring.fullCredit.toleranceType`,`${t.CLASS_PREFIX}__full-credit-precision__type-dropdown`),a.default.createElement(o.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.fullCreditTolerance.textField`,className:`${t.CLASS_PREFIX}__full-credit-precision__value-input${L?" has-error":""}`,label:S("stepTwo.precisionScoring.positiveNegativeIndicator"),onBlur:this.checkForPrecisionScoringErrors,onChange:this.onFloatTextFieldChangeFactory("value","correctAnswerTolerance",D),helperText:L,validate:()=>!L,value:D.value})),a.default.createElement(r.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCredit.checkbox`,checked:A,className:`${t.CLASS_PREFIX}__partial-credit-precision__checkbox`,onChange:this.toggleAllowPartialCredit,label:S("stepTwo.precisionScoring.partialCreditLabel")}),A&&a.default.createElement("div",null,a.default.createElement("div",{className:`${t.CLASS_PREFIX}__precision-scoring-input-group`},this.getToleranceTypeDropdown(Q&&Q.type,this.onDropdownChangedFactory("type","partialCreditTolerance",Q),`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCredit.toleranceType`,`${t.CLASS_PREFIX}__partial-credit-precision__type-dropdown`),a.default.createElement(o.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCreditTolerance.textField`,className:`${t.CLASS_PREFIX}__partial-credit-precision-value-input${M?" has-error":""}`,helperText:M,label:S("stepTwo.precisionScoring.positiveNegativeIndicator"),onBlur:this.checkForPrecisionScoringErrors,onChange:this.onFloatTextFieldChangeFactory("value","partialCreditTolerance",Q),validate:()=>!M,value:Q.value})),a.default.createElement(o.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.precisionScoring.partialCredit.creditToAward.textField`,className:`${t.CLASS_PREFIX}__precision-scoring-partial-credit-percentage${O?" has-error":""}`,helperText:O,label:S("stepTwo.precisionScoring.creditToAwardLabel"),onChange:this.onFloatTextFieldChangeFactory("partialCreditPointsPercent"),onBlur:this.checkForPrecisionScoringErrors,max:100,min:0,validate:()=>!O,value:F}))),a.default.createElement(p.default,{hasUnitPointsPercentRangeError:_,hasUnitsGreaterThanPartialError:b,hasUnitValueEmptyError:y,onUnitPointsPercentChange:this.onFloatTextFieldChangeFactory("unitPointsPercent","units",N),onUnitPointsPercentBlur:this.checkForUnitPointsPercentErrors,onUnitsRequiredChange:this.toggleUnitsRequired,onUnitValueBlur:this.checkForUnitValueErrors,onUnitValueChange:this.onTextFieldChangeFactory("unitValue","units",N),unitPointsPercent:N.unitPointsPercent,unitsRequired:null!==(e=N.unitsRequired)&&void 0!==e&&e,unitValue:N.unitValue}),a.default.createElement(d.default,{disabled:C,onValidate:this.handleVariableRangeError,onVariableDefinitionChange:this.updateVariableDefinition,variableDefinitions:x}),a.default.createElement(o.LocalizedNumberInput,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.answerSetCount.textField`,className:`${t.CLASS_PREFIX}__variable-answer-sets-input${B?" has-error":""}`,disabled:C||!c.doesQuestionHaveVariables(this.props.question),helperText:B,label:S("stepTwo.variableSetCount.title"),numberFormatOptions:{maximumFractionDigits:0},min:h.MIN_ANSWER_SETS,onBlur:this.checkForVariableSetCountErrors,onChange:this.onIntegerTextFieldChangeFactory("variableSetCount"),required:!0,validate:()=>!B,value:k,id:"calculated_formula_question_sets"}),a.default.createElement(f.default,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.stepTwo`,showBack:!0,onBackClick:w,showNext:!0,isNextDisabled:E(this.state),onNextClick:this.handleGoToNextStep}),a.default.createElement(g.OffScreenAnnouncement,{type:"polite",message:S("stepTwo.stepNumber"),changeTrigger:1}))}}t.BaseCalculatedFormulaQuestionEditStepTwo=_,t.default=_},JKrv:function(e,t,s){"use strict";s.r(t)},KTc4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("/R3Y");s("t70R");t.default=({show:e,instructions:t})=>n.default.createElement("div",{className:a.removeExtraWhitespace(`\n        question-instructions\n        question-instructions--${e?"visible":"hidden"}\n      `),"aria-hidden":!e},t)},KTib:function(e,t,s){"use strict";s.r(t)},LeqM:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),i=s("8unJ");t.default=i.localizedComponentWrapper(({localize:e,show:t,usageCount:s})=>t?n.default.createElement(a.Notification,{type:a.NotificationType.Caution,disableAutoDismiss:!0,message:e.translate("assessments.canvas.question.multipleReferencesNotification.message",{usageCount:s})}):null)},Lk6F:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("nsO7")),i=s("Zwiy"),o=s("8jBL"),r=s("myse"),l=n.__importDefault(s("ERkP")),u=s("8unJ"),c=s("uDfI"),d=s("9OUN"),p=s("JfV0"),m=s("Y+9S");s("4bjT");const h=n.__importDefault(s("9qOT")),f=n.__importDefault(s("9HIK")),g=n.__importDefault(s("9mqG")),E=s("X3OV"),_=s("Y+9S");class b extends l.default.Component{constructor(e){if(super(e),this.dismissPanel=()=>this.state.isAnyQuestionDirty?(this.setCloseDialogVisibility(!0),!1):(m.notifyMobileApp(m.MessageType.QuestionPoolPanelClosed),this.props.closePanel(),!0),this.setCloseDialogVisibility=e=>{this.setState({isShowingCloseDialog:e})},this.hasMoreQuestions=()=>this.state.paging&&!a.isEmpty(this.state.paging.nextPage),this.onScroll=e=>{if(this.state.isLoadingQuestions||!this.hasMoreQuestions())return;const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&this.loadMoreQuestions()},this.onLoadMoreButtonClick=()=>{this.loadMoreQuestions(!0)},this.getLoadMoreQuestionsButtonText=()=>{const{localize:e}=this.props,{offset:t,count:s}=this.state.paging,n=b.QUESTION_POOL_QUESTION_LOAD_LIMIT,a=t+n;if(this.hasMoreQuestions()){const t=s-a>n?n:s-a;return e.translate("questionPools.moreQuestions.enabled",{count:t})}return e.translate("questionPools.moreQuestions.disabled")},this.loadMoreQuestions=e=>{const{courseId:t,assessmentId:s,questionPoolId:n,loadQuestionsFromQuestionBlock:a}=this.props;!this.state.isLoadingQuestions&&this.hasMoreQuestions()&&(this.setState(()=>({isLoadingQuestions:!0})),a({courseId:t,assessmentId:s,questionBlockId:n,offset:this.state.paging.offset+b.QUESTION_POOL_QUESTION_LOAD_LIMIT,limit:b.QUESTION_POOL_QUESTION_LOAD_LIMIT}).then(t=>{this.setState(s=>{const n=e?t.questions[0].id:s.firstNewQuestionBankId;return{paging:t.paging,isLoadingQuestions:!1,firstNewQuestionBankId:n,totalQuestionCount:t.paging.count}})}))},this.addQuestionsToPool=()=>{const{closePanel:e,openQuestionPicker:t}=this.props;e(!0),t()},this.deleteQuestionFromPool=(...e)=>{this.props.deleteQuestionFromQuestionBlock(...e).then(()=>{this.setState(e=>({totalQuestionCount:e.totalQuestionCount-1}))})},this.setIsAnyQuestionDirty=e=>{this.setState({isAnyQuestionDirty:e})},this.state={isAnyQuestionDirty:!1,isShowingCloseDialog:!1,totalQuestionCount:0,isLoadingQuestions:void 0,paging:void 0,firstNewQuestionBankId:void 0},m.isInMobileApp()){const t={type:m.MessageType.QuestionPoolPanelOpened,status:m.MessageStatus.Success,pageTitle:e.localize.translate("questionPools.panelHeader")};m.sendMessageToMobile(t),_.dismissPanel(this.dismissPanel)}}componentWillUnmount(){_.dismissPanel(void 0)}UNSAFE_componentWillMount(){const{courseId:e,assessmentId:t,questionPoolId:s}=this.props;if(e){this.setState({isLoadingQuestions:!0});const n={courseId:e,assessmentId:t,questionBlockId:s,limit:b.QUESTION_POOL_QUESTION_LOAD_LIMIT};this.props.loadQuestionsFromQuestionBlock(n).then(e=>{this.setState({paging:e.paging,isLoadingQuestions:!1,totalQuestionCount:e.paging.count})})}}render(){const{closePanel:e,courseId:t,localize:s,hasSubmissions:n,hasAssessmentModifyPermissions:a,questions:u,assessmentTitle:c,persistQuestion:d,assessmentId:p,questionPoolId:m,localizationPrefix:E,analyticsEventAugmentor:_,commonContext:b}=this.props,{firstNewQuestionBankId:y,isLoadingQuestions:C,isShowingCloseDialog:w,paging:v,totalQuestionCount:S}=this.state,P=_(r.AnalyticsEventTypes.CLICK_EVENT,this.addQuestionsToPool,"questionPool.panel.add.button"),A=`questionPools.moreQuestions.enabled${this.hasMoreQuestions()?"enabled":"disabled"}`,T=_(r.AnalyticsEventTypes.CLICK_EVENT,this.onLoadMoreButtonClick,A),I={url:s.translate("questionPools.pageHelpUrl")};return l.default.createElement(i.BbPanel,{isOpen:!0,type:i.BbPanelType.full,onDismiss:this.dismissPanel,excludeContentPadding:!0,closeButtonAriaLabel:s.translate("questionPools.cancel"),className:"question-pool-panel",onScroll:this.onScroll,pageHelpProps:I,stackIndex:3,analyticsId:"questionPools.panel",heightOffset:b.panelHeightOffset},l.default.createElement(i.BbPanelHeader,{smallHeaderTitle:c,title:s.translate("questionPools.panelHeader"),analyticsId:"questionPools.panelHeader"}),l.default.createElement("div",{className:"question-pool-panel__content-scroll-wrapper"},l.default.createElement("div",{className:"question-pool-panel__content"},u&&l.default.createElement("div",{className:"question-pool-panel__top-bar"},l.default.createElement("span",{className:"question-pool-panel__question-count"},s.translate("questionPools.questionCount",{count:S})),a&&!n&&l.default.createElement("button",{className:"question-pool-panel__add-button-container button clear",onClick:P,"data-analytics-id":"questionPool.panel.add.button"},l.default.createElement("span",{className:"question-pool-panel__add-button-label"},s.translate("questionPools.addQuestionButtonLabel")),l.default.createElement(o.AddCircle,{id:"question-pool-panel_add-button-icon"}))),l.default.createElement(h.default,{courseId:t,questions:u,hasSubmissions:n,hasAssessmentModifyPermissions:a,deleteQuestion:this.deleteQuestionFromPool,isLoading:C,firstNewQuestionBankId:y,setIsAnyQuestionDirty:this.setIsAnyQuestionDirty,persistQuestion:d,questionPoolId:m,assessmentId:p,localizationPrefix:E}),v&&l.default.createElement("button",{className:"question-pool-panel__load-more-button",onClick:T,"data-analytics-id":A,disabled:!this.hasMoreQuestions()},this.getLoadMoreQuestionsButtonText()),u&&0===u.length&&!C&&l.default.createElement(g.default,null))),w&&l.default.createElement(f.default,{setCloseDialogVisibility:this.setCloseDialogVisibility,closePanel:e}))}}t.QuestionPoolPanel=b,b.QUESTION_POOL_QUESTION_LOAD_LIMIT=50;const y=c.connect((e,t)=>({questions:p.select.question.getQuestionsByQuestionBlockId(e,t.questionPoolId)}),e=>d.bindActionCreators({loadQuestionsFromQuestionBlock:p.actions.question.loadQuestionsFromQuestionBlock,deleteQuestionFromQuestionBlock:p.actions.question.deleteQuestionFromQuestionBlock},e))(b);t.default=u.localizedComponentWrapper(E.withAssessmentCommonContext(r.withAnalytics(y)))},"M+qG":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("w8C8"),o=s("XBaz"),r=n.__importDefault(s("+4s7")),l=s("HW8w"),u=s("8unJ");t.default=u.localizedComponentWrapper(({localize:e,onCodeRefresh:t,onCodeCopy:s})=>{const{containerClass:n,firstButtonClass:u}=l.useStyles();return a.createElement("div",{className:n},a.createElement(r.default,{className:u,analyticsId:"assessments.settings.accessCode.copy",onClick:s,tooltip:e.translate("assessments.settings.accessCode.copy"),activeTooltip:e.translate("assessments.settings.accessCode.copied")},a.createElement(i.Duplicate,null)),a.createElement(r.default,{analyticsId:"assessments.settings.accessCode.refresh",onClick:t,tooltip:e.translate("assessments.settings.accessCode.refresh"),activeTooltip:e.translate("assessments.settings.accessCode.refreshed")},a.createElement(o.Refresh,null)))})},M1C4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=n.__importDefault(s("O94r")),o=s("tN4z"),r=s("mrT9"),l=s("n3Pa"),u=s("tpZv");t.AssessmentNavButton=({id:e,label:t,ariaLabel:s,icon:n,navigate:c,onClick:d,disabled:p})=>{const m=l.useStyles(),h=c===u.NavigationDirection.Forward?m.forwardSectionRoot:m.backwardSectionRoot,f=c===u.NavigationDirection.Forward?m.forwardSectionLabel:m.backwardSectionLabel;return a.createElement(o.AnalyticsIconButton,{name:e,"aria-label":s,analyticsId:"assessments.navigation-button.nav-button",onClick:()=>d(e),disabled:p,classes:{root:i.default(m.button,h),label:f}},n,a.createElement(r.Typography,{component:"span",className:m.buttonLabel},t))}},MDkG:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("nBlB"),i=s("j9WP");t.default=a.DragNDropItem(({checkAndDisableAssessmentSettings:e,courseId:t,index:s,dragPointRef:a,itemRef:o,alignedGoals:r,question:l,questionTitle:u,onQuestionEdit:c,onQuestionMadeDirty:d,persistQuestion:p,deleteQuestion:m,questionBeingEditedId:h,isAnyQuestionDirty:f,hasSubmissions:g,hasAssessmentModifyPermissions:E,openGoals:_,pluginsConfig:b,dragButtonAriaLabel:y,babelfishInstance:C,currentLocale:w,disableInteraction:v,openPoolQuestionPanel:S,addQuestionsToEmptyPool:P,localizationPrefix:A,showFeatureAnnouncement:T})=>{const I=s+1;return n.default.createElement("div",{className:`js-assessment-question-${I}`,ref:o},n.default.createElement(i.AssessmentCanvasQuestion,Object.assign({checkAndDisableAssessmentSettings:e,courseId:t,questionBeingEditedId:h,isAnyQuestionDirty:f,alignedGoals:r,question:l,questionTitle:u,onQuestionEdit:c,onQuestionMadeDirty:d,persistQuestion:p,deleteQuestion:m,hasSubmissions:g,hasAssessmentModifyPermissions:E,openGoals:_,pluginsConfig:b,dragButtonAriaLabel:y,dragPointRef:a,babelfishInstance:C,currentLocale:w,disableInteraction:v,openPoolQuestionPanel:S,addQuestionsToEmptyPool:P,localizationPrefix:A,showFeatureAnnouncement:T},{})))})},MmQQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("qgI1");t.LocalizedPeerNotEnoughSubmissionsBanner=n.LocalizedPeerNotEnoughSubmissionsBanner;var a=s("AepM");t.LocalizedPeerReviewPeriodOpenBanner=a.LocalizedPeerReviewPeriodOpenBanner;var i=s("GaPR");t.LocalizedPeerReviewHasBeenDeletedBanner=i.LocalizedPeerReviewHasBeenDeletedBanner},MozA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("pfaR");t.default=n.default},Mx6v:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("uDfI"),o=s("9OUN"),r=s("JfV0"),l=s("E1pj"),u=n.__importDefault(s("afDw")),c=(n.__importDefault(s("VsDy")),s("P5AP"));class d extends a.Component{constructor(e){super(e),this.state={hasLoadedQuestions:!1,isQuestionLoadingInProgress:!0}}componentDidMount(){const{courseId:e,contentId:t,loadContents:s}=this.props;e&&t&&s({courseId:e,contentId:t})}componentDidUpdate(e){const{assessment:t,courseId:s,loadGradebookColumn:n,loadQuestions:a}=this.props,{hasLoadedQuestions:i}=this.state;!e.assessment&&t&&n({courseId:s,columnId:t.gradableItemId}),t&&(i||a({courseId:s,assessmentId:t.id,refreshState:!0,expand:"alignedGoals,usageCount"}).then(()=>{this.setState(()=>({isQuestionLoadingInProgress:!1,hasLoadedQuestions:!0}))}))}render(){const{allyService:e,contentId:t,features:s,UltraWindowSize:n}=this.props;return a.default.createElement("div",null,a.default.createElement(c.AllyProvider,{allyService:e,contentId:t},a.default.createElement(u.default,Object.assign({},this.props,{isLoadingInProgress:this.state.isQuestionLoadingInProgress})),s&&s.reactAssessmentsSettings&&!1))}}t.AssessmentPanel=d;const p=i.connect((e,t)=>({assessment:r.select.assessment.getAssessmentByContentId(e,t.contentId),questions:r.select.question.getQuestionsByContentId(e,t.contentId),content:r.select.content.getContentById(e,t.contentId),gradebookColumn:r.select.gradebookColumn.getGradebookColumnByContentId(e,t.contentId)}),e=>o.bindActionCreators({loadContents:r.actions.content.loadContents,loadGradebookColumn:r.actions.gradebookColumn.loadGradebookColumn,persistContent:r.actions.content.persistContent,persistGradebookColumn:r.actions.gradebookColumn.persistGradebookColumn,createQuestion:r.actions.question.createQuestion,deleteQuestion:r.actions.question.deleteQuestion,loadQuestions:r.actions.question.loadQuestions,persistQuestion:r.actions.question.persistQuestion,removeRubricAssociations:r.actions.gradebookColumn.removeRubricAssociations},e))(l.windowResizingResponsiveComponentWrapper(d));t.default=p},NHtK:function(e,t,s){"use strict";s.r(t)},NPG5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("Pfoe")),o=s("3ZJq");s("TAB1");const r=s("8unJ");t.default=r.localizedComponentWrapper(e=>{const{answersInfo:t,answersInfoLabel:s,localize:n,question:r,questionTextClassName:l}=e;return a.default.createElement("div",{className:"readonly-multiple-answer-question"},a.default.createElement("div",{className:l},a.default.createElement(i.default,{id:r.id,bbml:r.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-multiple-answer-question__instructions readonly-answer__main readonly-answer__instructions"},n.translate("assessments.canvas.question.multipleAnswer.answerInstructions")),t&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),a.default.createElement("ol",{className:"readonly-multiple-answer-question__list"},r.answers.map((e,s)=>a.default.createElement("li",{key:e.id,className:"readonly-multiple-answer-question__li readonly-answer__container"},a.default.createElement("div",{className:"readonly-multiple-answer-question__answer readonly-answer__main"},a.default.createElement("span",{className:"readonly-multiple-answer-question__text"},a.default.createElement(i.default,{bbml:e.answerText.rawText,id:e.id,isReadOnly:!0})),e.correctAnswer&&a.default.createElement("span",{className:"readonly-multiple-answer-question__correct"},n.translate("assessments.canvas.question.multipleAnswer.correctAnswer"))),t&&a.default.createElement("div",{className:"readonly-multiple-answer-question__answers-info readonly-answer__info"},t[s])))),a.default.createElement(o.AutomatedQuestionFeedbackRead,{question:r}))})},Nr1y:function(e,t,s){"use strict";s.r(t)},NzPg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importStar(s("nsO7")),o=s("MC1S"),r=s("E1pj"),l=s("JfV0"),u=s("3ZJq"),c=n.__importDefault(s("PCGI")),d=s("gTAB"),p=s("WGaE"),m=n.__importDefault(s("R6T4")),h=n.__importDefault(s("rLAU")),f=n.__importStar(s("TIvv")),g=n.__importStar(s("AiU9")),E=n.__importDefault(s("CvmH")),_=n.__importStar(s("OPED")),b=n.__importStar(s("jPx/")),y=s("Vng8");s("4Pbl");const C=s("1Xy2"),w=n.__importDefault(s("7LMM")),v=s("8unJ");t.default=r.windowResizingResponsiveComponentWrapper(v.localizedComponentWrapper(e=>{const{activeEditorId:t,canDeleteDistractor:s,canDeletePromptAnswerPair:n,editMode:r,localize:v,onDistractorAddition:S,onDistractorDeletion:P,onPromptAnswerPairAddition:A,onPromptAnswerPairDeletion:T,onQuestionChange:I,onScoringOptionsChange:D,question:R,setActiveEditorId:F,startEditMode:Q,UltraWindowSize:N,pluginsConfig:x}=e,k=R.answers.filter(e=>e.isDistractor),q=b.reusableAnswers(R),L=b.answerIdToPromptIndexMap(R),M=d.EditModeEnum.INACTIVE===r,O=!M&&y.hasLinkedQuestion(R),B=R.prompts.length>=l.MATCHING_MAXIMUM_AMOUNT_OF_PROMPT_ANSWER_PAIRS,V=B?v.translate("assessments.canvas.question.matching.addPairMaxReached",{maxCount:l.MATCHING_MAXIMUM_AMOUNT_OF_PROMPT_ANSWER_PAIRS}):v.translate("assessments.canvas.question.matching.addPair"),$=k.length>=l.MATCHING_MAXIMUM_AMOUNT_OF_DISTRACTORS,z=$?v.translate("assessments.canvas.question.matching.addDistractorMaxReached",{maxCount:l.MATCHING_MAXIMUM_AMOUNT_OF_DISTRACTORS}):v.translate("assessments.canvas.question.matching.addDistractor"),j=y.isNewQuestion(e.question),U=()=>!0===i.get(e,"question.permissions.addOrRemoveAnswer")&&!0===i.get(e,"question.permissions.changeMatchingAnswerIndex")||j,K=()=>!0===i.get(e,"question.permissions.addOrRemovePrompt")&&!0===i.get(e,"question.permissions.addOrRemoveAnswer")&&!0===i.get(e,"question.permissions.changeMatchingAnswerIndex")||j,W=e=>{e.preventDefault()},G=[{key:C.partialCreditNoPenalty},{key:C.noPartialCredit},{key:C.partialCreditWithPenalty},{key:C.partialCreditOverallNegative}];return a.default.createElement("div",{className:`matching ${r?"matching--edit":"matching--read"}`},a.default.createElement(c.default,{editMode:r,question:R},a.default.createElement(p.LinkedQuestionNotification,{show:O,usageCount:R.usageCount}),a.default.createElement(f.default,Object.assign({},f.getPluggableQuestionHeaderProps(e,I))),a.default.createElement(g.default,Object.assign({},g.getQuestionControlProps(e))),a.default.createElement(E.default,{instructions:v.translate("assessments.canvas.question.matching.instructions"),show:!M}),a.default.createElement(_.default,Object.assign({},_.getQuestionTextProps(e,I)))),a.default.createElement("div",{className:"matching__container"},a.default.createElement("div",{className:"matching__pairs"},!(null==N?void 0:N.isSmallBreakpoint())&&a.default.createElement("div",{className:"matching__column-titles-container"},a.default.createElement("div",{className:`matching__column-title ${M?"":"field-required"}`},v.translate("assessments.canvas.question.matching.headers.prompts")),a.default.createElement("div",{className:`matching__column-title ${M?"":"field-required"}`},v.translate("assessments.canvas.question.matching.headers.answers"))),a.default.createElement("ol",{className:"matching__list"},R.prompts.map((t,s)=>a.default.createElement("li",{key:t.id,className:"matching__list-item"},a.default.createElement(h.default,Object.assign({},e,{answerIsReused:b.isPairReused(R,t.id),answer:R.answers[t.matchingAnswerIndex],answerIdToPromptIndexMap:L,canDeletePromptAnswerPair:n,hasRemovePromptAnswerPairPermissions:K(),hasReuseAnswerPermissions:U(),index:s,onPromptAnswerPairDeletion:T,prompt:t,reusableAnswers:q,reusedElsewherePair:b.isPairReused(R,t.id),startEditMode:Q}))))),!M&&a.default.createElement("div",{className:"matching__actions-container"},a.default.createElement("div",{className:"matching__action"},(()=>!0===i.get(e,"question.permissions.addOrRemovePrompt")&&!0===i.get(e,"question.permissions.addOrRemoveAnswer")||j)()&&a.default.createElement(o.Link,{className:"matching__add-pair",onClick:A,onMouseDown:W,type:"button",disabled:B,analyticsId:"assessments.canvas.question.matching.add.pair.link"},V)),a.default.createElement("span",{className:"matching__action"},v.translate("assessments.canvas.question.matching.randomAnswers")))),(!M||M&&k.length>0)&&a.default.createElement("div",{className:"matching__distractors"},a.default.createElement("div",{className:"matching__distractors-list"},a.default.createElement("div",{className:`matching__distractors-list-label ${1!==R.prompts.length||M?"":"field-required"}`},a.default.createElement("span",null,v.translate("assessments.canvas.question.matching.additionalAnswers"))),a.default.createElement("ol",{className:"matching__list matching__distractors-list-items"},k.map((t,n)=>a.default.createElement("li",{className:"matching__distractors-list-items-item",key:t.ui.id},a.default.createElement(m.default,Object.assign({},e,{answer:t,canDeleteDistractor:s,hasRemoveAnswerPermissions:U(),index:n,onDistractorDeletion:P})))))),a.default.createElement("div",{className:"matching__distractor-actions"},!M&&(()=>!0===i.get(e,"question.permissions.addOrRemoveAnswer")||j)()&&a.default.createElement(o.Link,{className:"matching__add-distractor",onClick:S,onMouseDown:W,type:"button",disabled:$,analyticsId:"assessments.canvas.question.matching.add.disctractor.link"},z)))),a.default.createElement(w.default,{question:e.question,onScoringOptionsChange:D,editMode:e.editMode,isAnswersEditMode:!0,options:G,translationKeyPrefix:"assessments.canvas.question.matching.scoringOptions"}),a.default.createElement(u.AutomatedQuestionFeedback,{activeEditorId:t,editMode:r,onQuestionChange:I,question:R,setActiveEditorId:F,pluginsConfig:x}))}))},O55a:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=s("M0dR"),r=s("0x+l"),l=s("yETo"),u=n.__importDefault(s("Pfoe")),c=n.__importDefault(s("O94r"));t.SELECTOR_PREFIX="automated-question-feedback-read",t.AutomatedQuestionFeedbackReadComponent=({localize:e,question:s,className:n,pluginsConfig:i})=>{var d,p;const m=l.useStyles(),[h,f]=a.default.useState(!1);if(!(null===(d=s.correctResponseFeedback)||void 0===d?void 0:d.rawText)&&!(null===(p=s.incorrectResponseFeedback)||void 0===p?void 0:p.rawText))return null;const g=`${t.SELECTOR_PREFIX}_content${s.id}`;return a.default.createElement("div",{className:c.default(m.base,n,t.SELECTOR_PREFIX)},a.default.createElement(o.AnalyticsTypography,{component:"h4",variant:"h4"},a.default.createElement("button",{className:c.default(m.contentToggle,`${t.SELECTOR_PREFIX}__content-toggle`),onClick:()=>f(!h),type:"button","aria-expanded":h,"aria-controls":h?g:void 0},a.default.createElement("span",null,e.translate("automatedQuestionFeedback.read.contentToggleLabel")),h?a.default.createElement(r.ArrowUp,null):a.default.createElement(r.ArrowDown,null))),h&&(()=>{var n,r;const l=`-${t.SELECTOR_PREFIX}_correct-feedback${s.id}`,d=`-${t.SELECTOR_PREFIX}_incorrect-feedback${s.id}`,p=`${t.SELECTOR_PREFIX}_incorrect-section-title_${s.id}`,h=`${t.SELECTOR_PREFIX}_correct-section-title_${s.id}`;return a.default.createElement("div",{id:g},(null===(n=s.correctResponseFeedback)||void 0===n?void 0:n.rawText)&&a.default.createElement("div",{className:c.default(m.contentSection,`${t.SELECTOR_PREFIX}__content-section`)},a.default.createElement("div",{className:m.sectionHeader},a.default.createElement(o.AnalyticsTypography,{id:h,component:e=>a.default.createElement("label",Object.assign({htmlFor:`bb-editor${l}`},e)),variant:"h6",className:m.sectionTitle},e.translate("automatedQuestionFeedback.correctAnswerLabel"))),a.default.createElement(u.default,{bbml:s.correctResponseFeedback.rawText,id:l,isReadOnly:!0,ariaLabelledBy:h,pluginsConfig:i})),(null===(r=s.incorrectResponseFeedback)||void 0===r?void 0:r.rawText)&&a.default.createElement("div",{className:c.default(m.contentSection,`${t.SELECTOR_PREFIX}__content-section`)},a.default.createElement("div",{className:m.sectionHeader},a.default.createElement(o.AnalyticsTypography,{id:p,component:e=>a.default.createElement("label",Object.assign({htmlFor:`bb-editor${d}`},e)),variant:"h6",className:m.sectionTitle},e.translate("automatedQuestionFeedback.incorrectAnswerLabel"))),a.default.createElement(u.default,{bbml:s.incorrectResponseFeedback.rawText,id:d,isReadOnly:!0,ariaLabelledBy:p,pluginsConfig:i})))})())},t.default=i.localizedComponentWrapper(t.AutomatedQuestionFeedbackReadComponent)},O761:function(e,t,s){"use strict";s.r(t)},OIpQ:function(e,t,s){"use strict";s.r(t)},OPED:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("3UQ0");t.default=n.default,t.getQuestionTextProps=n.getQuestionTextProps},OfVW:function(e,t,s){"use strict";s.r(t)},OjB1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),i=s("j92x"),o=s("8h7I"),r=s("AuQm"),l=s("E1pj"),u=s("t6ux"),c=s("/R3Y");s("p3LL"),t.CLASS_PREFIX="calculated-formula-question__step-2__answer-units",t.TRANSLATION_KEY_PREFIX="assessments.canvas.question.calculatedFormula.stepTwo.answerUnits",t.BaseAnswerUnits=({localize:e,onUnitPointsPercentChange:s,onUnitsRequiredChange:a,onUnitValueChange:d,onUnitPointsPercentBlur:p,onUnitValueBlur:m,unitPointsPercent:h,unitsRequired:f,unitValue:g,hasUnitValueEmptyError:E,hasUnitPointsPercentRangeError:_,hasUnitsGreaterThanPartialError:b})=>{const[y]=n.useState(l.getId("calculated-formula-question-instructions-")),C=E?e.translate(`${t.TRANSLATION_KEY_PREFIX}.error.empty`):null;let w=null;if(_)w=e.translate(`${t.TRANSLATION_KEY_PREFIX}.error.outOfRange`);else if(b){const t="assessments.canvas.question.calculatedFormula.stepTwo.precisionScoring";w=e.translate(`${t}.partialCreditLessThanUnitsCreditError`)}return n.default.createElement("fieldset",{className:c.removeExtraWhitespace(`\n                calculated-formula-question__step-2__fieldset\n                ${t.CLASS_PREFIX}__fieldset\n            `)},n.default.createElement("legend",{className:c.removeExtraWhitespace(`\n                    calculated-formula-question__step-2__fieldset__legend\n                    ${t.CLASS_PREFIX}__legend\n                `)},e.translate(`${t.TRANSLATION_KEY_PREFIX}.title`)),n.default.createElement(i.Checkbox,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.answerUnits.required`,checked:f,className:`${t.CLASS_PREFIX}__required-checkbox`,label:e.translate(`${t.TRANSLATION_KEY_PREFIX}.required`),onChange:a}),f&&n.default.createElement("div",{className:`${t.CLASS_PREFIX}__fields-container`},n.default.createElement("div",{className:`${t.CLASS_PREFIX}__units-container`},n.default.createElement(o.TextField,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.answerUnits`,"aria-describedby":y,ariaLabel:e.translate(`${t.TRANSLATION_KEY_PREFIX}.title`),className:`${t.CLASS_PREFIX}__units-input`,errorMessage:C,onBlur:m,onChanged:d,value:null!=g?g:""})),n.default.createElement("div",{className:`${t.CLASS_PREFIX}__units-input-instructions`,id:y},e.translate(`${t.TRANSLATION_KEY_PREFIX}.instructions`)),n.default.createElement(r.LocalizedNumberInput,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.answerUnits.pointsPercentage`,className:`${t.CLASS_PREFIX}__points-percentage-input`,helperText:w,label:e.translate(`${t.TRANSLATION_KEY_PREFIX}.percentageLabel`),max:100,min:0,onBlur:p,onChange:s,validate:()=>!w,value:null!=h?h:null})))},t.default=a.localizedComponentWrapper(t.BaseAnswerUnits)},On2X:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=n.__importStar(s("nsO7")),o=s("8unJ"),r=s("aPd7"),l=s("/R3Y"),u=n.__importDefault(s("2yjE"));s("WARa");const c=300;class d extends a.PureComponent{constructor(){super(...arguments),this.getPreviewText=()=>{const e=r.getPlainTextFromBbML(this.props.question.questionText.rawText);return e.length<=c?e:l.truncateString(e,c)}}render(){const{question:e,questionTitle:t}=this.props,s=e.alignedGoals&&e.alignedGoals.length>0;return a.default.createElement("div",{className:"question-preview"},t&&a.default.createElement(u.default,Object.assign({id:e.id,canEnterEditMode:!1,editMode:0,onQuestionChange:i.noop,points:e.points,question:e,questionTitle:t,onPointsClick:i.noop,hasSubmissions:!1,hasQuestionEditPermissions:!1,hasAlignedGoals:s,openGoals:i.noop,goalAriaLabel:"",disableFocus:!0,analyticsId:"questionPreview.questionText"},{})),a.default.createElement("div",{className:"question-preview__question-text",id:`bb-editor${e.id}`},this.getPreviewText()))}}t.default=o.localizedComponentWrapper(d)},OyKE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=s("M0dR"),r=s("0x+l"),l=s("rZf7"),u=n.__importDefault(s("Pfoe")),c=n.__importDefault(s("O94r"));t.SELECTOR_PREFIX="automated-question-feedback-attempt-review",t.AutomatedQuestionFeedbackAttemptReviewComponent=({feedback:e,isCollapsible:s,localize:n,editorPluginsOptions:i})=>{const d=l.useStyles(),[p,m]=a.default.useState(!1);if(!e)return null;const h=Math.floor(1e6*Math.random()+1),f=`${t.SELECTOR_PREFIX}__feedback-${h}`,g=`${t.SELECTOR_PREFIX}_content${h}`,E=e=>a.default.createElement("label",Object.assign({htmlFor:f},e));return a.default.createElement("div",{className:c.default(d.base,t.SELECTOR_PREFIX)},s&&(()=>a.default.createElement(o.AnalyticsTypography,{component:"div",variant:"body1"},a.default.createElement("button",{className:c.default(d.contentToggle,`${t.SELECTOR_PREFIX}__content-toggle`),onClick:()=>m(!p),type:"button","aria-expanded":p,"aria-controls":p?g:void 0},a.default.createElement("span",null,p?n.translate("automatedQuestionFeedback.attemptReview.hideFeedbackToggleLabel"):n.translate("automatedQuestionFeedback.attemptReview.showFeedbackToggleLabel")),p?a.default.createElement(r.ArrowUp,{className:d.contentToggleIcon}):a.default.createElement(r.ArrowDown,{className:d.contentToggleIcon}))))(),(!s||p)&&(()=>a.default.createElement("div",{className:c.default(d.base,`${t.SELECTOR_PREFIX}__content-section`),id:g},a.default.createElement("div",{className:d.contentSection},a.default.createElement("div",{className:d.sectionHeader},a.default.createElement(r.Feedback,{className:d.feedbackIcon}),a.default.createElement(o.AnalyticsTypography,{component:E,variant:"h4",className:d.contentTitle},n.translate("automatedQuestionFeedback.attemptReview.feedbackLabel"))),a.default.createElement(u.default,{bbml:e,id:f,isReadOnly:!0,refreshBbml:!0,pluginsConfig:i}))))())},t.default=i.localizedComponentWrapper(t.AutomatedQuestionFeedbackAttemptReviewComponent)},Oyt1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=s("MC1S"),i=s("WOfr"),o=s("RrOo"),r=n.__importStar(s("nsO7")),l=n.__importStar(s("ERkP")),u=s("8unJ"),c=n.__importDefault(s("xyjg"));s("dn4g");class d extends l.PureComponent{constructor(){super(...arguments),this.mainHeading=null,this.focusFirstSourceHeading=()=>{this.mainHeading&&this.mainHeading.focus()},this.isQuestionSelected=e=>{const{isSelectAllQuestions:t,deselectedQuestions:s,selectedQuestions:n}=this.props,a=r.isUndefined(s[e]),i=!r.isUndefined(n[e]);return t&&a||i},this.renderSelectDeselectAll=()=>{const{hideSelectDeselectAll:e,localize:t,onClearAllQuestionSelection:s,onSelectAllQuestions:n}=this.props;return e?null:l.default.createElement("div",{className:"question-picker-results-list__select-deselect-all"},l.default.createElement(a.Link,{className:"js-select-all-questions",onClick:n,analyticsId:"questionPicker.questionList.selectAll.link"},t.translate("questionPicker.questionList.selectAll")),l.default.createElement("span",null," | "),l.default.createElement(a.Link,{className:"js-deselect-all-questions",onClick:s,analyticsId:"questionPicker.questionList.clearAll.link"},t.translate("questionPicker.questionList.clearAll")))},this.renderQuestions=()=>{const{courseId:e,items:t,onItemSelect:s,questionToFocus:n,sources:a,localizationPrefix:u}=this.props,d=r.mapKeys(a,e=>e.id),p=r.groupBy(t,"assessmentId");return Object.entries(p).map(([t,a],r)=>{const p=d[t],m=p?p.title:"",h=p&&"Pool"===p.type?i.QuestionBank:o.Test,f=`heading_${t}`;return l.default.createElement("div",{key:t,className:"js-source-question-grouping"},l.default.createElement("div",{className:"question-picker-results-list__heading-group"},l.default.createElement(h,{className:"question-picker-results-list__heading-icon",color:"primary"}),l.default.createElement("h2",{id:f,className:"question-picker-results-list__heading-text js-question-group-heading",ref:e=>{0===r&&(this.mainHeading=e)}},m)),a.map(a=>{const i=this.isQuestionSelected(a.id);return l.default.createElement("div",{key:a.id},l.default.createElement(c.default,{courseId:e,assessmentId:t,onSelectQuestion:s,question:a,focused:n===a.id,selected:i,sourceHeaderId:f,localizationPrefix:u}))}))})}}componentDidUpdate(e){e.isShowingFilterPanel&&!this.props.isShowingFilterPanel&&this.focusFirstSourceHeading()}render(){const{isLoadingMore:e}=this.props;return l.default.createElement("div",{className:"question-picker-results-list"},this.renderSelectDeselectAll(),this.renderQuestions(),e&&l.default.createElement(a.Spinner,{className:"question-picker-results-list__spinner",size:a.SpinnerSize.large}))}}d.defaultProps={hideSelectDeselectAll:!1,isShowingFilterPanel:!0},t.UnwrappedQuestionPickerResultsList=d,t.default=u.localizedComponentWrapper(d)},P5AP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP"));t.DEFAULT_VALUE={service:{getXythosIdFromContentFileUrl:e=>null,update:()=>{},isAvailable:()=>Promise.resolve(!1),getIndexMapFromBbML:e=>null},contentId:null,isAvailable:!1};const a=n.default.createContext(t.DEFAULT_VALUE);t.AllyProvider=({allyService:e,contentId:s,children:i})=>{const[o,r]=n.useState({service:e||t.DEFAULT_VALUE.service,contentId:s,isAvailable:t.DEFAULT_VALUE.isAvailable});return n.useEffect(()=>{e.isAvailable().then(e=>{r({...o,isAvailable:e})})},[e,s]),n.default.createElement(a.Provider,{value:o},i)},t.withAlly=e=>t=>n.default.createElement(a.Consumer,null,({service:s,contentId:a,isAvailable:i})=>n.default.createElement(e,Object.assign({},t,{ally:{contentId:a,isAvailable:i,service:s}}))),t.default=a},PBaB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("DRH8"),a=s("RxZr");t.isToleranceSet=e=>!!(null==e?void 0:e.toleranceValue)&&0!==e.toleranceValue,t.getAnswerOrToleranceDisplayValue=(e,t,s)=>n.getDisplayValue(e,t,!0,s,{maximumFractionDigits:a.MAX_DIGITS})},PCGI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("G5c7");t.default=n.default},Pfoe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("kBJj"),i=s("8unJ"),o=s("JfV0");s("DeRc");const r=s("P5AP");t.BB_EDITOR_CONTAINER_CLASSNAME="bb-editor-wrapper";const l="bb-editor";class u extends n.Component{constructor(e){super(e),this.ref=null,this.focusEditor=()=>{const e=this.ref.querySelector(".bb-editor");e&&e.focus()},this.updateEditorStyle=()=>{const e=this.ref.classList;this.props.isReadOnly?e.add("read-only"):e.remove("read-only")},this.onEditorBlur=()=>{this.setState(()=>({hasFocus:!1}),this.props.setActiveEditorId(null)),this.props.onBlur&&this.props.onBlur()},this.onEditorFocus=()=>{const{id:e,setActiveEditorId:t}=this.props;this.setState(()=>({hasFocus:!0}),t(e)),this.props.onFocus&&this.props.onFocus()},this.onTextChange=e=>{this.props.refreshBbml||this.props.onChange(e)},this.isToolbarHidden=()=>{const{keepToolbarVisible:e}=this.props;return!e&&!this.state.hasFocus},this.state={ally:this.buildAlly(),bbml:e.bbml,hasFocus:!1,plugins:this.buildPlugins()}}componentDidMount(){this.setState(()=>({bbml:null})),this.updateEditorStyle()}UNSAFE_componentWillReceiveProps(e){e.refreshBbml?this.setState(()=>({bbml:e.bbml})):null!==this.state.bbml&&this.setState(()=>({bbml:null}))}shouldComponentUpdate(e){return!e.id||!e.activeEditorId||e.id===e.activeEditorId}componentDidUpdate(e,t){var s,n;this.updateEditorStyle(),this.props.id===this.props.activeEditorId&&!t.hasFocus&&this.focusEditor();const a=["babelfishInstance","babelfishFormatInstance","courseId","currentLocale","pluginsConfig","plugins"].some(t=>e[t]!==this.props[t]),i=(null===(s=this.props.ally)||void 0===s?void 0:s.service)!==(null===(n=e.ally)||void 0===n?void 0:n.service);(i||a)&&this.setState({...i?{ally:this.buildAlly()}:null,...a?{plugins:this.buildPlugins()}:null})}buildAlly(){const{service:e}=this.props.ally;return{service:e,indexMap:new Map}}buildPlugins(){const{babelfishInstance:e,babelfishFormatInstance:t,courseId:s,currentLocale:n,pluginsConfig:i,plugins:r}=this.props,l={apiBasePath:o.config.apiBasePath,babelfishFormatInstance:t,babelfishInstance:e,locale:n,xsrfToken:o.config.xsrf},u=[...r,a.insertLocalFile({...l}),a.link(),a.image(),a.video(),a.math({...l,courseId:s})];return i&&i.contentMarket&&u.push(a.contentMarket({...i.contentMarket,...l})),i&&i.insertCloudStorageIntegrationFile&&u.push(a.insertCloudStorageIntegrationFile({...i.insertCloudStorageIntegrationFile,...l})),i&&i.insertYoutubeVideo&&u.push(a.insertYoutubeVideo({...i.insertYoutubeVideo,...l})),u}render(){const{ally:e,babelfishInstance:s,babelfishFormatInstance:i,courseId:o,currentLocale:r,id:u,localize:c,pluginsConfig:d,...p}=this.props,{ally:m,bbml:h,hasFocus:f,plugins:g}=this.state,E=f?this.props:p,_=`${l}${u}`;return n.default.createElement("div",{ref:e=>{this.ref=e},className:t.BB_EDITOR_CONTAINER_CLASSNAME},n.default.createElement(a.BbEditor,Object.assign({},E,{ariaDescribedBy:_,bbml:h,editorId:_,isToolbarHidden:this.isToolbarHidden(),onBlur:this.onEditorBlur,onChange:this.onTextChange,onFocus:this.onEditorFocus,plugins:g,rootContentId:e.contentId,ally:m})))}}u.defaultProps={plugins:[],keepToolbarVisible:!1,toolbarSet:"default"},t.RawBbEditorWrapper=u,t.default=r.withAlly(i.localizedComponentWrapper(u))},QJmz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("nsO7"),a=new Map;t.setToggle=function(e,t){if(!n.isString(e)||!n.isBoolean(t))throw new Error("Toggle name must be String type, toggle value must be Boolean type");a.set(e,t)},t.getToggle=function(e){return a.get(e)},t.getToggles=function(){const e={};return a.forEach((t,s)=>{e[s]=t}),e},t.clearToggles=function(){a.clear()}},Qpu5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({root:{backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.border.main}`,borderTop:"none",padding:"20px"},answerLabelTooltip:{minWidth:"30px",minHeight:"0px"},textFieldContainer:{maxWidth:"300px",display:"block"},textField:{width:"100%",'& input[type="text"]':{margin:0,border:"none"}},checkboxLabel:{marginBottom:"-3px",marginLeft:"-8px"},checkboxLabelDescription:{color:e.palette.text.secondary,marginLeft:"24px"},toleranceTextFieldContainer:{marginLeft:"24px",marginTop:"6px"},toleranceTextField:{marginTop:"15px"},helperText:{display:"block"}}))},QpzK:function(e,t,s){"use strict";s.r(t)},R6T4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("MC1S"),o=s("8unJ"),r=s("gTAB"),l=n.__importDefault(s("Pfoe")),u=s("2yjE"),c=s("0x+l");s("Ggyl");class d extends a.Component{constructor(){super(...arguments),this.onAnswerChange=e=>{const{answer:t}=this.props,s={...t,answerText:{rawText:e.toBbML()}};this.props.onAnswerChange(s)},this.onDelete=()=>{this.props.onDistractorDeletion(this.props.answer.ui.id)}}render(){const{answer:e,canDeleteDistractor:t,editMode:s,hasRemoveAnswerPermissions:n,index:o,localize:d,question:p,questionTitle:m}=this.props,h=r.EditModeEnum.INACTIVE===s,f=o+1,g=`distractor-header-${p.id}-${o}`,E=`${u.QUESTION_TITLE_ID_PREFIX}${p.id} ${g}`,_=d.translate("assessments.canvas.question.matching.deleteDistractorAriaLabel",{questionTitle:m,distractorNumber:f});return a.default.createElement("div",{className:`matching-distractor\n                ${h?"matching-distractor--read":"matching-distractor--edit"}`},a.default.createElement("div",{className:"matching-distractor__answer"},a.default.createElement("div",{className:"matching-distractor__text"},a.default.createElement("div",{id:g,className:"sr-only"},d.translate("assessments.canvas.question.matching.headers.distractor",{distractorNumber:f})),a.default.createElement(l.default,Object.assign({},this.props,{ariaLabelledBy:E,bbml:e.answerText.rawText,id:`distractor-${e.ui.id}`,isReadOnly:h,onChange:this.onAnswerChange,placeholder:d.translate("assessments.canvas.question.matching.placeholders.distractor",{distractorNumber:f}),toolbarSet:"minimal",ariaRequired:!0})))),!h&&n&&a.default.createElement("div",{className:"matching-distractor__delete"},a.default.createElement(i.IconButton,{icon:a.default.createElement(c.Trash,null),onClick:this.onDelete,className:"matching-distractor__delete-button",disabled:!t(),ariaLabel:_,"aria-describedby":`bb-editor${e.ui.id}`,analyticsId:"assessments.canvas.question.matching.deleteDistractor"})))}}t.UnwrappedMatchingDistractor=d,t.default=o.localizedComponentWrapper(d)},"RW+D":function(e,t,s){"use strict";s.r(t)},RtIR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("kBJj"),a=s("JfV0"),i=s("aPd7"),o=s("zGdY");t.default=function(e,t,s,r="assessments.canvas"){const l=`${r}.${e}.button${{FILE:"File",TEXT:"Text",default:"Question"}[t.subType||"default"]}${a.Questions.isQuestionBlock(t)?"Block":""}`;let u=s;if(!s&&t.questionText){const e=t.questionText.rawText,s=i.getPlainTextFromBbML(e).substring(0,180);if(t.subType===o.QuestionSubType.File){const t=i.parseFilesFromBbML(e)[0];if(t){const e=t.bbfile;u=n.getFileNameWithTypeExtension(e.linkName,e.mimeType)}else u=s}else u=s}return{string:l,relation:u}}},S0GT:function(e,t,s){"use strict";s.r(t)},S9Gz:function(e,t,s){"use strict";s.r(t)},SIAs:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("Pfoe"));s("fTte");const o=s("8unJ");t.default=o.localizedComponentWrapper(e=>{const{localize:t,question:s,questionTextClassName:n}=e;return a.default.createElement("div",{className:"readonly-essay-question"},a.default.createElement("div",{className:n},a.default.createElement(i.default,{id:s.id,bbml:s.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-essay-question__instructions readonly-answer__instructions readonly-answer__main"},t.translate("assessments.canvas.question.essay.instructions"))))})},Sa8I:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Sf9Z");t.TimeLimitOverriddenByDueDateBanner=n.TimeLimitOverriddenByDueDateBanner},Sf9Z:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),i=s("IVC4"),o=s("8unJ"),r=s("U9G1");t.TimeLimitOverriddenByDueDateBanner=o.localizedComponentWrapper(({localize:e})=>{const[t,s]=n.useState(!0),{bannerClass:o,iconWrapperClass:l,iconClass:u}=r.useStyles();if(!t)return null;const c=e.translate("banners.autoSubmissionAssessments.timeLimitOverriddenByDueDate.notice"),d=e.translate("banners.autoSubmissionAssessments.timeLimitOverriddenByDueDate.dismissButton");return n.createElement(a.AnalyticsBanner,{severity:"warning",icon:n.createElement(i.Attention,{className:u}),classes:{root:o,icon:l,action:l},onClose:()=>s(!1),closeText:d},n.createElement("span",{className:"js-banner-contents"},c))})},Syma:function(e,t,s){"use strict";s.r(t)},TAB1:function(e,t,s){"use strict";s.r(t)},TIvv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("vN+o");t.default=n.default,t.getPluggableQuestionHeaderProps=n.getPluggableQuestionHeaderProps},Tibe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("Ag5V")),o=n.__importDefault(s("VlbA")),r=s("Vng8"),l=n.__importDefault(s("PCGI")),u=s("gTAB"),c=n.__importStar(s("TIvv")),d=n.__importDefault(s("ZfLe")),p=n.__importStar(s("AiU9")),m=s("o7ef");s("hp7Q"),t.QuestionBlock=e=>{const t=t=>{e.onQuestionChange(t,r.hasQuestionBlockQuestionChanged)},s={...e,onQuestionChange:t},n=u.EditModeEnum.ACTIVE===e.editMode,d=e.localize.translate(`${m.LOCALE_KEY_BASE}.editTitle`),h={...c.getPluggableQuestionHeaderProps(e,t),...n&&{questionTitle:d},hideFullCreditCheckbox:!0,points:e.question.pointsPerQuestion};return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,{editMode:e.editMode,question:e.question},a.default.createElement(c.default,Object.assign({},h)),a.default.createElement(p.default,Object.assign({},p.getQuestionControlProps(e)))),n?a.default.createElement(i.default,Object.assign({},s)):a.default.createElement(o.default,Object.assign({},s)))};const h=d.default(t.QuestionBlock);t.default=h},TrYj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=n.__importDefault(s("cFZT"));s("h2mW");const r=n.__importDefault(s("VE9O"));t.default=i.localizedComponentWrapper(({localize:e})=>a.default.createElement("div",{className:"question-pools-empty-state"},a.default.createElement(o.default,{image:r.default,passedClass:"question-pools-empty-state__image",presentationOnly:!0}),a.default.createElement("h3",{className:"question-pools-empty-state__title"},e.translate("questionPools.emptyState.dueToDeletion.header")),a.default.createElement("div",{className:"question-pools-empty-state__message"},e.translate("questionPools.emptyState.dueToDeletion.message"))))},U9G1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({bannerClass:{display:"flex",flexWrap:"wrap",marginInlineStart:"-12px",marginInlineEnd:"-12px",[e.breakpoints.up("sm")]:{marginInlineStart:"-30px",marginInlineEnd:"-30px"}},iconWrapperClass:{alignSelf:"flex-start"},iconClass:{color:e.palette.primary.main},actionClass:{flexBasis:"100%",justifyContent:"flex-end"},buttonClass:{flexBasis:"initial"}}))},Ucbz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("MC1S"),r=n.__importDefault(s("fCe2")),l=s("0x+l");s("cTTT"),t.KEYWORD_BLOCK_ID="keyword";class u extends a.Component{constructor(e){super(e),this.mainHeading=null,this.focusPanelHeader=()=>{this.mainHeading.focus()},this.keywordPickerOnRenderItem=e=>a.default.createElement(o.TagItem,Object.assign({},e),e.item.name),this.keywordPickerOnChange=e=>{this.props.criteriaConfig.onSetKeywords(e.map(e=>e.key))},this.toggleBlockContentVisibility=e=>{const{blockStateMap:t}=this.state,s=t[e];s.expanded=!s.expanded,this.setState(()=>({blockStateMap:t}))},this.keywordPickerRemoveButtonAriaLabel=e=>this.props.localize.translate("questionPicker.filterPanel.keywordSearch.removeButtonAriaLabel",{item:e.name}),this.getItemAddedStatusMessage=e=>this.props.localize.translate("questionPicker.filterPanel.keywordSearch.addedToList",{text:e}),this.renderFilterPanel=()=>{const{criteriaConfig:e,localize:s,onPanelClose:n,onClearCriteria:i}=this.props,{blockStateMap:u}=this.state,c=e.selectedKeywords&&e.selectedKeywords.length,d=0===r.default(e).length&&!c,p=s.translate("questionPicker.filterPanel.keywordSearch.heading"),m=c?e.selectedKeywords.map(e=>({key:e,name:e})):[],h=u[t.KEYWORD_BLOCK_ID]&&u[t.KEYWORD_BLOCK_ID].expanded,f=h?"open":"close";return a.default.createElement("div",{className:"filter-panel__container"},a.default.createElement("div",{className:"filter-panel__header"},a.default.createElement("div",{className:"filter-panel__title-wrapper"},a.default.createElement("h2",{className:"filter-panel__title",ref:e=>{this.mainHeading=e}},s.translate("questionPicker.filterPanel.header")),a.default.createElement(o.IconButton,{className:"filter-panel__close-button js-close-filter",onClick:n,ariaLabel:s.translate("questionPicker.filterPanel.closeLabel"),"data-is-visible":!0,icon:a.default.createElement(l.Close,null),analyticsId:"questionPicker.filterPanel.closeLabel"})),a.default.createElement(o.Link,{className:"filter-panel__clear-all",disabled:d,onClick:i,analyticsId:"questionPicker.filterPanel.clearAll.link"},s.translate("questionPicker.filterPanel.clearAll"))),e&&e.onSetKeywords&&a.default.createElement("div",{className:"filter-panel__block",id:`${t.KEYWORD_BLOCK_ID}-block`},a.default.createElement("div",{className:"filter-panel__block-header"},a.default.createElement("h2",{className:"filter-panel__block-title"},p),a.default.createElement(o.IconButton,{className:`filter-panel__block-toggle js-block-toggle\n                                filter-panel__block-toggle--${f}`,onClick:()=>this.toggleBlockContentVisibility(t.KEYWORD_BLOCK_ID),ariaLabel:p,"aria-expanded":h,"data-is-visible":!0,icon:a.default.createElement(l.ArrowDown,null),analyticsId:"questionPicker.filterPanel.blockToggle"})),u[t.KEYWORD_BLOCK_ID]&&u[t.KEYWORD_BLOCK_ID].expanded&&a.default.createElement(o.KeywordPicker,{selectedItems:m,onChange:this.keywordPickerOnChange,removeButtonAriaLabel:this.keywordPickerRemoveButtonAriaLabel,inputLabel:s.translate("questionPicker.filterPanel.keywordSearch.placeholderText"),onRenderItem:this.keywordPickerOnRenderItem,getItemAddedStatusMessage:this.getItemAddedStatusMessage,analyticsId:"questionPicker.filterPanel.keywordPicker"})),e&&e.blocks&&e.blocks.map(e=>{const t=u[e.id]&&u[e.id].expanded,s=t?"open":"close";return a.default.createElement("div",{key:e.id,className:"filter-panel__block",id:`${e.id}-block`},a.default.createElement("div",{className:"filter-panel__block-header"},e.name&&a.default.createElement("h2",{className:"filter-panel__block-title"},e.name),a.default.createElement(o.IconButton,{className:`filter-panel__block-toggle js-block-toggle\n                                        filter-panel__block-toggle--${s}`,onClick:()=>this.toggleBlockContentVisibility(e.id),ariaLabel:e.name,"aria-expanded":t,"data-is-visible":!0,icon:a.default.createElement(l.ArrowDown,null),analyticsId:`quesitonPicker.filterPanel.${t?"collapse":"expand"}`})),u[e.id]&&u[e.id].expanded&&a.default.createElement("div",{className:"filter-panel__groups"},e.groups.map(e=>a.default.createElement("fieldset",{key:e.id,className:"filter-panel__group"},a.default.createElement("legend",{className:"filter-panel__group-title"},e.name||""),e.items.map(t=>a.default.createElement("div",{key:t.id,className:"filter-panel__item"},a.default.createElement(o.Checkbox,{id:t.id,className:"filter-panel__item-checkbox",checked:t.selected,onChange:(s,n)=>e.onSelect(t.id,n),label:t.name,analyticsId:"questionPicker.filterPanel"})))))))}))},this.state={blockStateMap:null}}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&this.focusPanelHeader()}static getDerivedStateFromProps(e,t){const{criteriaConfig:s}=e,{blockStateMap:n}=t;return u.shouldUpdateBlockStateMap(s,n)?u.initBlockStateMap(s):null}render(){return this.props.isOpen?this.renderFilterPanel():null}}t.FilterPanelPure=u,u.shouldUpdateBlockStateMap=(e,s)=>{if(null===s)return!0;const n=e.blocks.map(e=>e.id),a=Object.keys(s).filter(e=>e!==t.KEYWORD_BLOCK_ID);return n.length!==a.length},u.initBlockStateMap=e=>{const s=Object.create({});return e.blocks.forEach(e=>{const t=e.expanded,n=e.id;s[n]={expanded:t}}),s[t.KEYWORD_BLOCK_ID]={expanded:e.isKeywordExpanded},{blockStateMap:s}},t.default=i.localizedComponentWrapper(u)},Udwz:function(e,t,s){"use strict";s.r(t)},UunF:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("E1pj"),o=n.__importDefault(s("Pfoe")),r=n.__importStar(s("jPx/")),l=s("2yjE"),u=s("1Xy2"),c=s("3ZJq");s("OIpQ");const d=s("8unJ");t.ReadonlyMatchingQuestionBase=e=>{const{answersInfo:t,answersInfoLabel:s,hideDistractors:n,localize:i,question:d,UltraWindowSize:p,questionTextClassName:m}=e,h=u.getSelectedScoringOption(d),f=i.translate(`assessments.canvas.question.matching.scoringOptions.${h.key}`),g=i.translate("assessments.canvas.question.matching.scoringOptions.readPlaceholder",{scoringOption:f}),E=d.answers.filter(e=>e.isDistractor);return a.default.createElement("div",{className:"readonly-matching__container"},a.default.createElement("div",{className:m},a.default.createElement(o.default,{id:d.id,bbml:d.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-matching__pairs"},a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-multiple-answer-question__instructions readonly-answer__main readonly-answer__instructions"},!p.isSmallBreakpoint()&&a.default.createElement("div",{className:"readonly-matching__column-titles-container"},a.default.createElement("div",{className:"readonly-matching__column-title"},i.translate("assessments.canvas.question.matching.headers.prompts")),a.default.createElement("div",{className:"readonly-matching__column-title"},i.translate("assessments.canvas.question.matching.headers.answers")))),t&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),a.default.createElement("ol",{className:"readonly-matching__list"},d.prompts.map((e,s)=>((e,s)=>{const n=s+1,u=`answer-header-${d.id}-${n}`,c=`prompt-header-${d.id}-${s}`,m=`${l.QUESTION_TITLE_ID_PREFIX}${d.id} ${c}`,h=p.isSmallBreakpoint()?i.translate("assessments.canvas.question.matching.indexMobile",{pairNumber:n}):i.translate("assessments.canvas.question.matching.index",{pairNumber:n});return a.default.createElement("li",{key:e.id,className:"readonly-matching__list-item readonly-answer__container"},a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__container readonly-answer__main"},a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__element readonly-matching-prompt-answer-pair__element-index"},h),a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__element readonly-matching-prompt-answer-pair__element-prompt"},a.default.createElement("div",{className:"readonly-matching-prompt-answer-pair__text"},a.default.createElement("div",{id:c,className:"sr-only"},i.translate("assessments.canvas.question.matching.headers.prompt",{pairNumber:n})),a.default.createElement(o.default,{ariaLabelledBy:m,bbml:e.promptText.rawText,id:`prompt-${e.id}`,isReadOnly:!0,ariaRequired:!0}))),p.isSmallBreakpoint()&&a.default.createElement("div",{className:"\n                        readonly-matching-prompt-answer-pair__element\n                        readonly-matching-prompt-answer-pair__element-answer-label\n                    "},i.translate("assessments.canvas.question.matching.answerLabel")),a.default.createElement("div",{className:"readonly-matching-answer"},a.default.createElement("div",{className:"readonly-matching-answer__text"},a.default.createElement("div",{id:u,className:"sr-only"},i.translate("assessments.canvas.question.matching.headers.answer",{pairNumber:n})),a.default.createElement(o.default,{ariaLabelledBy:m,bbml:d.answers[e.matchingAnswerIndex].answerText.rawText,id:r.getAnswerEditorId(e.id),isReadOnly:!0,ariaRequired:!0})))),t&&a.default.createElement("div",{className:"readonly-matching-question__answers-info readonly-answer__info"},t[s]))})(e,s))),!n&&E.length>0&&a.default.createElement("div",{className:"readonly-matching__distractors"},a.default.createElement("div",{className:"readonly-matching__distractors-list"},a.default.createElement("div",{className:"readonly-matching__distractors-list-label"},a.default.createElement("span",null,i.translate("assessments.canvas.question.matching.additionalAnswers"))),a.default.createElement("ol",{className:"readonly-matching__list matching__distractors-list-items"},E.map((e,t)=>((e,t)=>{const s=t+1,n=`distractor-header-${d.id}-${t}`,r=`${l.QUESTION_TITLE_ID_PREFIX}${d.id} ${n}`;return a.default.createElement("li",{className:"readonly-matching__distractors-list-items-item",key:e.ui.id},a.default.createElement("div",{className:"readonly-matching-distractor"},a.default.createElement("div",{className:"readonly-matching-distractor__answer"},a.default.createElement("div",{className:"readonly-matching-distractor__text"},a.default.createElement("div",{id:n,className:"sr-only"},i.translate("assessments.canvas.question.matching.headers.distractor",{distractorNumber:s})),a.default.createElement(o.default,{ariaLabelledBy:r,bbml:e.answerText.rawText,id:`distractor-${e.ui.id}`,isReadOnly:!0,ariaRequired:!0})))))})(e,t))))),a.default.createElement("div",{className:"readonly-matching-question-scoring-options__text"},g)),a.default.createElement(c.AutomatedQuestionFeedbackRead,{question:d}))},t.default=i.windowResizingResponsiveComponentWrapper(d.localizedComponentWrapper(t.ReadonlyMatchingQuestionBase))},UyCi:function(e,t,s){"use strict";s.r(t)},V5y2:function(e,t,s){"use strict";s.r(t)},VE9O:function(e,t){e.exports='<svg viewBox="0 0 200 200" enable-background="new 0 0 220 200" xml:space="preserve" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><rect id="path-1" x="38" y="45" width="123" height="98"></rect><filter x="-0.4%" y="-0.5%" width="100.8%" height="101.0%" filterUnits="objectBoundingBox" id="filter-2"><feOffset dx="-1" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 0.619607843 0 0 0 0 0.37254902 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><rect id="path-3" x="49" y="51" width="101" height="54"></rect><rect id="path-4" x="4.36879433" y="0.4" width="51.6312057" height="5.6"></rect><filter x="-1.0%" y="-8.9%" width="101.9%" height="117.9%" filterUnits="objectBoundingBox" id="filter-5"><feOffset dx="-1" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><path d="M1.3624191,8.8830687 C19.7046892,31.039105 47.4182328,45.1543624 78.4285714,45.1543624 C109.43891,45.1543624 137.152454,31.039105 155.494724,8.8830687 L1.3624191,8.8830687 Z" id="path-6"></path><filter x="-0.3%" y="-1.4%" width="100.6%" height="102.8%" filterUnits="objectBoundingBox" id="filter-7"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 0.850980392 0 0 0 0 0.639215686 0 0 0 0 0.247058824 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><path d="M2.7181596,9.45633792 C20.6841572,26.6893216 45.0713141,37.2796421 71.9319728,37.2796421 C98.7926315,37.2796421 123.179788,26.6893216 141.145786,9.45633792 L2.7181596,9.45633792 Z" id="path-8"></path><filter x="-0.4%" y="-1.8%" width="100.7%" height="103.6%" filterUnits="objectBoundingBox" id="filter-9"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 0.850127551 0 0 0 0 0.639317415 0 0 0 0 0.246075431 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><path d="M33.4617406,174.651613 L166.538259,174.651613 C148.861813,190.418044 125.549899,200 100,200 C74.4501008,200 51.1381873,190.418044 33.4617406,174.651613 Z" id="path-10"></path><filter x="-0.4%" y="-2.0%" width="100.8%" height="103.9%" filterUnits="objectBoundingBox" id="filter-11"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 0.619607843 0 0 0 0 0.37254902 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter><rect id="path-12" x="1.58222222" y="8" width="87.4177778" height="8"></rect><filter x="-0.3%" y="-3.1%" width="100.6%" height="106.2%" filterUnits="objectBoundingBox" id="filter-13"><feOffset dx="-0.5" dy="0.5" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter></defs><g id="200x200-version" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Banks_zeroState_illustration"><circle id="Oval" fill="#B3D0DD" fill-rule="evenodd" cx="100" cy="100" r="100"></circle><path d="M6.38116309,135.22687 L193.618837,135.22687 C179.370645,173.074325 142.829737,200 100,200 C57.1702633,200 20.6293549,173.074325 6.38116947,135.226871 Z" id="Combined-Shape" fill="#E3F4FC" fill-rule="evenodd"></path><path d="M87.6394813,36.5113231 L119.013431,5.23090674 L144.05857,33.0338491 L114.130903,63.0027453 L87.6394813,36.5113231 Z" id="Combined-Shape" fill="#758D97" fill-rule="evenodd" opacity="0.435858243"></path><path d="M83.2289256,198.599786 C35.9850833,190.622173 0,149.51347 0,100 C0,93.9801676 0.531917883,88.0845712 1.55131686,82.3576477 L38.5807712,45.3281933 L42.3262652,46.3136685 L63.8023454,24.8375884 L121.615072,141.047971 L83.2289256,198.599786 Z" id="Combined-Shape" fill="#758D97" fill-rule="evenodd" opacity="0.435858243"></path><g id="Rectangle-10"><use fill="#FF7E28" fill-rule="evenodd" xlink:href="#path-1"></use><use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use></g><path d="M37.1751185,177.805593 C28.6169015,170.886524 21.2232713,162.58412 15.3342549,153.238407 L49.4261366,107.649685 L150.723208,107.649685 L184.730334,153.135769 C178.830824,162.523339 171.414416,170.861205 162.824881,177.805593 L37.1751185,177.805593 Z" id="Combined-Shape" fill="#7F7C76" fill-rule="evenodd"></path><path d="M37.3983851,177.805593 C35.3109986,176.123665 33.2926439,174.359517 31.3482404,172.51807 C30.7255385,165.551358 30.2772573,159.31888 30.0033969,153.820638 C29.6620075,146.966628 28.6097964,141.640924 26.8467634,137.843524 L49.4261366,107.649685 L150.723208,107.649685 L184.704685,153.101462 C178.784816,162.507874 171.340408,170.858153 162.718166,177.805593 L37.3983851,177.805593 Z" id="Combined-Shape" fill="#434240" fill-rule="evenodd"></path><rect id="Rectangle-2" fill="#302F2F" fill-rule="evenodd" x="50" y="108" width="101" height="49"></rect><polygon id="Rectangle-2-Copy" fill="#000000" fill-rule="evenodd" points="49.7917276 107.62955 150.323803 107.62955 148.541037 109.410225 101.379737 156.516231 49.7917276 156.516231"></polygon><path d="M184.759762,153.088913 C184.524409,153.463878 184.286636,153.83717 184.046466,154.208768 L150.324823,107.62955 L150.71433,107.62955 L184.759762,153.088913 Z" id="Combined-Shape" fill="#8C8C8C" fill-rule="evenodd"></path><path d="M15.9992386,154.279419 C15.7585584,153.907717 15.5202781,153.534316 15.2844199,153.159238 L49.3825216,107.62955 L49.7720285,107.62955 L15.9992386,154.279419 Z" id="Combined-Shape" fill="#8C8C8C" fill-rule="evenodd"></path><g id="Rectangle-2"><use fill="#FF7E28" fill-rule="evenodd" xlink:href="#path-3"></use><rect stroke="#C16325" stroke-width="1" x="49.5" y="51.5" width="100" height="53"></rect></g><g id="upper-handle" stroke-width="1" fill-rule="evenodd" transform="translate(70.000000, 56.000000)"><polygon id="Rectangle-11" fill="#B95C1E" points="4.44634238 0.389483548 8.16723703 6 7.3370641 7.27588099 48.4081565 7.27588099 49.4510337 6 56 6 51.0396861 12 0.0547627027 12 0.0547627027 7.27588099"></polygon><g id="Rectangle-3"><use fill="#E5E5E5" fill-rule="evenodd" xlink:href="#path-4"></use><use fill="black" fill-opacity="1" filter="url(#filter-5)" xlink:href="#path-4"></use></g></g><g id="Folders" stroke-width="1" fill-rule="evenodd" transform="translate(5.000000, 32.000000)"><g id="back" transform="translate(25.646259, 77.172260)"><g id="Folder-Copy" transform="translate(14.993197, 0.000000)"><path d="M6.141666,4.19374233 L73.9348081,4.19374233 L76.9538761,0 L93.367799,0 L96.049429,4.19374233 L104.3683,4.19374233 L104.3683,4.19374233 C106.577439,4.19374233 108.3683,5.98460333 108.3683,8.19374233 L108.3683,28.9858588 L108.3683,28.9858588 C108.3683,36.7178453 102.100286,42.9858588 94.3682998,42.9858588 L16.141666,42.9858588 L16.141666,42.9858588 C8.40967951,42.9858588 2.141666,36.7178453 2.141666,28.9858588 L2.141666,8.19374233 L2.141666,8.19374233 C2.141666,5.98460333 3.93252701,4.19374233 6.141666,4.19374233 Z" id="Rectangle-5" fill="#FECA69"></path><rect id="Rectangle-5-Copy" fill="#FCD59D" x="0" y="6.01802024" width="110.081633" height="40.8365659" rx="4"></rect></g><g id="Folder-Copy" transform="translate(11.047619, 3.149888)"><path d="M6.13899479,5.25202123 L65.4482227,5.25202123 L68.6580607,0.787472036 L86.1091531,0.787472036 L88.960231,5.25202123 L111.07792,5.25202123 L111.07792,5.25202123 C113.287059,5.25202123 115.07792,7.04288223 115.07792,9.25202123 L115.07792,32.5491013 L115.07792,32.5491013 C115.07792,40.2810878 108.809906,46.5491013 101.07792,46.5491013 L16.1389948,46.5491013 L16.1389948,46.5491013 C8.40700829,46.5491013 2.13899479,40.2810878 2.13899479,32.5491013 L2.13899479,9.25202123 L2.13899479,9.25202123 C2.13899479,7.04288223 3.92985579,5.25202123 6.13899479,5.25202123 Z" id="Rectangle-5" fill="#F5C05E"></path><rect id="Rectangle-5-Copy" fill="#FCD59D" x="0" y="7.20265371" width="116.789116" height="43.1955566" rx="4"></rect></g><g id="Folder-Copy" transform="translate(0.000000, 7.480984)"><path d="M13.2431566,5.5550545 L91.1473497,5.5550545 L94.5916107,0.787472036 L113.317203,0.787472036 L116.376503,5.5550545 L126.430313,5.5550545 L126.430313,5.5550545 C128.639452,5.5550545 130.430313,7.3459155 130.430313,9.5550545 L130.430313,35.6551923 L130.430313,35.6551923 C130.430313,43.3871788 124.162299,49.6551923 116.430313,49.6551923 L23.2431566,49.6551923 L23.2431566,49.6551923 C15.5111702,49.6551923 9.24315665,43.3871788 9.24315665,35.6551923 L9.24315665,9.5550545 L9.24315665,9.5550545 C9.24315665,7.3459155 11.0340176,5.5550545 13.2431566,5.5550545 Z" id="Rectangle-5" fill="#FECA69"></path><path d="M10.4779277,7.64609944 L129.195542,7.64609944 L129.195542,7.64609944 C131.145334,7.64609944 132.811052,9.051918 133.138671,10.973989 L139.666219,49.269724 L139.666219,49.269724 C140.037415,51.4474541 138.57293,53.5137672 136.3952,53.8849636 C136.173164,53.9228099 135.948328,53.9418345 135.72309,53.9418345 L3.95037962,53.9418345 L3.95037962,53.9418345 C1.74124062,53.9418345 -0.0496203762,52.1509735 -0.0496203762,49.9418345 C-0.0496203762,49.716596 -0.0305958044,49.49176 0.00725047406,49.269724 L6.53479857,10.973989 L6.53479857,10.973989 C6.86241757,9.051918 8.52813517,7.64609944 10.4779277,7.64609944 Z" id="Rectangle-5-Copy" fill="#FCD59D"></path><path d="M10.4779277,7.64609944 L21.6946064,7.64609944 L114.766727,15.0787427 L127.63098,28.6501595 L101.663719,53.9418345 L26.1395302,53.9418345 L3.44005511,29.1301899 L6.53479857,10.973989 L6.53479857,10.973989 C6.86241757,9.051918 8.52813517,7.64609944 10.4779277,7.64609944 Z" id="Rectangle-5-Copy" fill="#B99F79"></path></g></g><g id="Test" transform="translate(86.462186, 87.850523) rotate(-9.000000) translate(-86.462186, -87.850523) translate(11.298920, 10.875132)"><path d="M30.3749999,29.265316 L134.376712,42.7601392 L134.376712,42.7601392 C134.924406,42.8312056 135.310788,43.3328095 135.239722,43.8805028 C135.235518,43.9129032 135.229728,43.945078 135.222374,43.9769115 L116.836359,123.565288 L116.836359,123.565288 C116.71787,124.078196 116.22203,124.41142 115.702365,124.327375 L15.7571488,108.163277 L15.7571488,108.163277 C15.2119482,108.075102 14.8414559,107.56165 14.9296309,107.016449 C14.9308997,107.008604 14.932262,107.000774 14.9337174,106.992962 L29.2632364,30.0738601 L29.2632364,30.0738601 C29.3604612,29.5519696 29.8485439,29.1970053 30.3749999,29.265316 Z" id="paper" fill="#FFFFFF" transform="translate(75.108415, 76.810134) rotate(51.000000) translate(-75.108415, -76.810134) "></path><g id="Group" transform="translate(29.683845, 27.770642)"><path d="M0.176045371,27.9329124 L50.5250214,0.175678694" id="Line-3" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M2.9927713,33.5546306 L45.9478417,10.0136856" id="Line-3-Copy" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M15.1225911,38.2155336 L33.8132743,27.9786468" id="Line-3-Copy-2" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M19.072245,45.6942831 L47.9042026,29.8071381" id="Line-3-Copy-3" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M23.0407997,53.5179277 L45.9266979,40.8690617" id="Line-3-Copy-4" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><ellipse id="Oval-7" fill="#D8D8D8" cx="9.39562494" cy="41.7494817" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy" fill="#D8D8D8" cx="13.4158984" cy="49.2331732" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy-2" fill="#44E17D" cx="17.86183" cy="56.6193476" rx="2.96838452" ry="2.96220182"></ellipse></g><g id="Group-Copy" transform="translate(53.430921, 68.130642)"><path d="M0.176045371,27.9329124 L50.5250214,0.175678694" id="Line-3" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M2.9927713,33.5546306 L20.3432082,23.7227132" id="Line-3-Copy" stroke="#979797" stroke-width="4" stroke-linecap="round"></path><path d="M15.1225911,38.2155336 L34.5180908,27.3613388" id="Line-3-Copy-2" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M19.072245,45.6942831 L41.9581432,33.0454171" id="Line-3-Copy-3" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><path d="M23.0407997,53.5179277 L43.7208325,42.3697695" id="Line-3-Copy-4" stroke="#D8D8D8" stroke-width="4" stroke-linecap="round"></path><ellipse id="Oval-7" fill="#44E17D" cx="9.39562494" cy="41.7494817" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy" fill="#D8D8D8" cx="13.4158984" cy="49.2331732" rx="2.96838452" ry="2.96220182"></ellipse><ellipse id="Oval-7-Copy-2" fill="#44E17D" cx="17.86183" cy="56.6193476" rx="2.96838452" ry="2.96220182"></ellipse></g></g><g id="Front" transform="translate(16.571429, 122.845638)"><g id="Folder-Copy"><path d="M0.261615564,7.5296394 C18.5856032,30.4626702 46.791373,45.1543624 78.4285714,45.1543624 C110.167108,45.1543624 138.452199,30.3684002 156.771306,7.30901233 C155.898331,7.13859589 154.996331,7.04930351 154.073476,7.04930351 L154.073476,7.04930351 L123.738863,7.04930351 L119.241248,0 L91.7119047,0 L86.6483403,7.04930351 L3.91073846,7.04930351 L3.91073846,7.04930351 C2.64836982,7.04930351 1.42502442,7.21638184 0.261609274,7.5296315 Z" id="Combined-Shape" fill="#F5C05E"></path><g id="Combined-Shape"><use fill="#FCD59D" fill-rule="evenodd" xlink:href="#path-6"></use><use fill="black" fill-opacity="1" filter="url(#filter-7)" xlink:href="#path-6"></use></g></g><g id="Folder" transform="translate(6.496599, 7.874720)"><path d="M3.26727841,9.97909478 C21.1795376,26.9032425 45.3439862,37.2796421 71.9319728,37.2796421 C99.0958095,37.2796421 123.729992,26.4489051 141.751676,8.8702754 L137.6229,2.36241611 L108.045341,2.36241611 L102.605041,9.97909478 L3.26727841,9.97909478 Z" id="Combined-Shape" fill-opacity="0.208956069" fill="#000000"></path><path d="M0.849604979,7.61667867 C18.9746354,25.9325672 44.1281784,37.2796421 71.9319728,37.2796421 C100.670794,37.2796421 126.578113,25.1565422 144.818933,5.74534076 L141.173921,0 L111.596361,0 L106.156061,7.61667867 L0.849604979,7.61667867 Z" id="Combined-Shape" fill="#FECA69"></path><g id="Combined-Shape"><use fill="#FCD59D" fill-rule="evenodd" xlink:href="#path-8"></use><use fill="black" fill-opacity="1" filter="url(#filter-9)" xlink:href="#path-8"></use></g></g></g></g><g id="Combined-Shape"><use fill="#FF7E28" fill-rule="evenodd" xlink:href="#path-10"></use><use fill="black" fill-opacity="1" filter="url(#filter-11)" xlink:href="#path-10"></use></g><g id="handle" stroke-width="1" fill-rule="evenodd" transform="translate(55.000000, 184.000000)"><polygon id="Rectangle-4-Copy-4" fill="#B95C1E" points="77.9014241 0 77.9014241 4.00181792 73.9688889 4.00181792"></polygon><path d="M3.14475113,6.8194886 C2.15747396,6.36166751 1.17881745,5.88811086 0.209095539,5.3991361 L5.51475745,0 L5.51475745,6.8194886 L3.14475113,6.8194886 Z" id="Combined-Shape" fill="#B95C1E"></path><path d="M10.6816022,4 L12.6311403,0 L5.51114032,0 L3.5616022,4 L1.58222222,8 L89,8 L87.0222222,4 L86.9939826,4 L85.0444444,0 L77.9244444,0 L79.8739826,4 L10.6816022,4 Z" id="Combined-Shape" fill="#F8F8F8"></path><polygon id="Rectangle-4-Copy-2" fill="#E5E5E5" points="12.6311403 0 12.6577778 4.00328734 10.68 4.00328734"></polygon><polygon id="Rectangle-4-Copy-3" fill="#666666" transform="translate(78.913333, 2.003913) scale(-1, 1) translate(-78.913333, -2.003913) " points="79.9022222 0.00453802282 79.9022222 4.00328734 77.9244444 4.00328734"></polygon><g id="Rectangle-3-Copy-2"><use fill="#E5E5E5" fill-rule="evenodd" xlink:href="#path-12"></use><use fill="black" fill-opacity="1" filter="url(#filter-13)" xlink:href="#path-12"></use></g></g><g id="books" stroke-width="1" fill-rule="evenodd" transform="translate(58.000000, 25.000000)"><g id="green-book" transform="translate(0.000000, 7.058824)" fill-rule="nonzero"><path d="M0.626017821,5.18805021e-07 L53.8375326,5.18805021e-07 L53.8375326,12.9411765 L0.626017821,12.9411765 C0.280277725,12.9411765 0,12.6498396 0,12.2904574 L0,0.618183657 C0.0166935654,0.271567171 0.292141551,-0.000433552274 0.626017821,5.18805021e-07 Z" id="Shape" fill="#44E17D"></path><path d="M0.617701159,5.18805021e-07 L10.655345,5.18805021e-07 L10.655345,12.9411765 L0.617701159,12.9411765 C0.276554229,12.9411765 0,12.6498396 0,12.2904574 L0,0.618183657 C0.016471791,0.271567171 0.288260443,-0.000433552274 0.617701159,5.18805021e-07 L0.617701159,5.18805021e-07 Z" id="Shape" fill="#2BAF56"></path><rect id="Rectangle-path" fill="#F7EDDD" x="12.3377679" y="1.68797954" width="42.0605724" height="9.00255754"></rect><rect id="Rectangle-path" fill="#2BAF56" x="12.3377679" y="1.68797954" width="42.0605724" height="1.68797954"></rect><rect id="Rectangle-path" fill="#FFFFFF" x="12.3377679" y="5.62659847" width="42.0605724" height="1.68797954"></rect><rect id="Rectangle-path" fill="#FFFFFF" x="12.3377679" y="9.00255754" width="42.0605724" height="1.68797954"></rect></g><g id="yellowBook" transform="translate(5.124481, 0.000000)" fill-rule="nonzero"><path d="M0.637581271,0 L40.2074689,0 L40.2074689,7.05882353 L0.637581271,7.05882353 C0.285454858,7.05882353 0,6.78068554 0,6.43758493 L0,0.613473112 C0.00436296596,0.273408952 0.28854391,-2.65706133e-05 0.637581271,0 Z" id="Shape" fill="#FDE000"></path><path d="M0.623753345,0 L10.7597452,0 L10.7597452,7.05882353 L0.623753345,7.05882353 C0.279263885,7.05882353 0,6.78068554 0,6.43758493 L0,0.613473112 C0.00426834152,0.273408952 0.282285941,-2.65706133e-05 0.623753345,0 Z" id="Shape" fill="#D1AB2A"></path><rect id="Rectangle-path" fill="#F7EDDD" x="13.0249547" y="1.62895928" width="27.1825142" height="3.80090498"></rect><rect id="Rectangle-path" fill="#D1AB2A" x="13.0249547" y="1.62895928" width="27.1825142" height="1.62895928"></rect><rect id="Rectangle-path" fill="#FFFFFF" x="13.0249547" y="3.80090498" width="27.1825142" height="1.62895928"></rect></g></g><g id="Globe" stroke-width="1" fill-rule="evenodd" transform="translate(113.000000, 0.000000)"><g id="Base" transform="translate(13.658537, 39.911290)"><rect id="Rectangle-7-Copy-2" fill="#D8A448" transform="translate(5.853659, 2.740074) rotate(90.000000) translate(-5.853659, -2.740074) " x="3.51219512" y="1.95719603" width="4.68292683" height="1.56575682"></rect><path d="M5.13442926,-0.0614461616 L6.30516097,-0.0614461616 C6.48364553,0.199513309 6.57288781,0.46047278 6.57288781,0.72143225 C6.57288781,0.982391721 6.48364553,1.24335119 6.30516097,1.50431066 L5.13442926,1.50431066 L5.13442926,-0.0614461616 Z" id="Rectangle-7-Copy-2" fill="#BF903D" transform="translate(5.853659, 0.721432) rotate(90.000000) translate(-5.853659, -0.721432) "></path><path d="M11.7073171,5.08870968 C9.96013561,3.00103391 8.0089161,1.95719603 5.85365854,1.95719603 C3.69840098,1.95719603 1.74718146,3.00103391 0,5.08870968 L11.7073171,5.08870968 Z" id="Oval-3" fill="#D8A448"></path><path d="M11.7073171,5.08870968 C10.7805559,3.95036984 9.76011348,3.11897262 8.64598975,2.59451801 C8.02474978,2.77793081 6.9512694,3.60932803 5.4255486,5.08870968 L11.7073171,5.08870968 Z" id="Oval-3" fill="#FCD590"></path></g><g><path d="M15.3683249,5.02459565 C27.1831523,5.02459565 36.8432686,15.0767798 36.8432686,26.4995393 C36.8432686,37.9222989 28.0529154,47.5550604 16.2380881,47.5550604" id="Shape" stroke="#FCD590" stroke-width="2" transform="translate(26.105797, 26.289828) rotate(45.000000) translate(-26.105797, -26.289828) "></path><path d="M22.8424361,31.8791457 C19.3246145,37.9638962 12.8714252,42.1159933 5.1145692,42.1159933" id="Shape" stroke="#D8A448" stroke-width="2" stroke-linecap="round" transform="translate(13.978503, 36.997570) rotate(45.000000) translate(-13.978503, -36.997570) "></path><rect id="Rectangle-7" fill="#FEC34C" transform="translate(33.036821, 3.420854) rotate(-45.000000) translate(-33.036821, -3.420854) " x="30.6953578" y="2.63053111" width="4.68292683" height="1.58064516"></rect><ellipse id="Oval-2" fill="#1987D1" cx="18.5365854" cy="18.7701613" rx="18.5365854" ry="18.7701613"></ellipse><path d="M21.940874,0.315853866 C30.552379,1.93448527 37.0731707,9.58122143 37.0731707,18.7701613 C37.0731707,24.0954191 34.8831371,28.9027217 31.3653276,32.3189462 C27.0577344,32.1759401 22.2742677,30.3799897 22.0050856,26.3225796 C21.4083893,17.3285149 30.0945807,20.7164023 30.0945807,13.7428542 C30.0945807,7.40346882 21.2924932,6.16135566 21.940874,0.315853866 Z" id="Combined-Shape" fill="#4DC238"></path><path d="M26.6800113,1.90360471 C32.8350308,4.95643965 37.0731707,11.3621286 37.0731707,18.7701613 C37.0731707,22.0580902 36.2383094,25.1485698 34.7715336,27.8360958 C30.320313,29.7262261 24.8191964,30.7072708 25.5172807,26.3225796 C26.2631933,21.6374771 32.8795186,22.8220661 32.8795186,15.848518 C32.8795186,10.2426835 27.3095472,6.91525857 26.6800113,1.90360471 Z" id="Combined-Shape" fill="#80F56B"></path><path d="M10.7009387,35.7858177 C4.37986867,32.79606 0,26.3010423 0,18.7701613 C0,12.6295624 2.91199729,7.17766722 7.41394341,3.75318298 C8.65639587,8.42183806 11.1760551,8.15049147 12.2231651,11.4044184 C14.1952377,17.5326958 6.51207906,15.9751035 6.17764843,19.5029994 C5.65616587,25.0040987 16.5766242,23.7121363 13.3586473,29.7898801 C11.5836257,33.1423364 11.0058718,34.5416992 10.7009387,35.7858177 Z" id="Combined-Shape" fill="#4DC238"></path><path d="M6.66716147,33.1882189 C2.59259074,29.7450988 0,24.5642111 0,18.7701613 C0,13.8852639 1.84280933,9.43620122 4.8628767,6.09691103 C5.8767908,9.18759001 7.01470396,10.3066871 6.55287047,13.3749904 C6.10280034,16.3651409 2.54323845,17.9783532 2.35205238,20.1502551 C1.94051061,24.8254302 4.88977056,28.7334917 6.55287047,30.6402329 C7.26426623,31.4558469 7.12571,32.2439863 6.66716147,33.1882189 Z" id="Combined-Shape-Copy" fill="#80F56B"></path><path d="M19.3536108,13.5546529 C20.6467653,13.5546529 20.2926829,11.3595851 20.2926829,9.28629032 C20.2926829,7.21299556 17.3068229,5.25190993 16.0136684,5.25190993 C14.7205139,5.25190993 16.0136684,7.32998666 16.0136684,9.40328142 C16.0136684,11.4765762 18.0604563,13.5546529 19.3536108,13.5546529 Z" id="Oval-6" fill="#4DC238"></path><path d="M18.7186398,11.7561157 C19.451549,11.7561157 19.250869,10.5120375 19.250869,9.33697546 C19.250869,8.16191347 17.9137169,6.8962069 17.1808077,6.8962069 C16.4478985,6.8962069 17.4573775,8.16191347 17.4573775,9.33697546 C17.4573775,10.5120375 17.9857307,11.7561157 18.7186398,11.7561157 Z" id="Oval-6" fill="#80F56B"></path><path d="M7.75148879,3.50238961 C10.7898509,1.29775236 14.5135509,0 18.5365854,0 C28.7740588,0 37.0731707,8.40368746 37.0731707,18.7701613 C37.0731707,22.8438892 35.7915676,26.6145109 33.6143649,29.6911588 C30.5760028,31.895796 26.8523028,33.1935484 22.8292683,33.1935484 C12.5917949,33.1935484 4.29268293,24.7898609 4.29268293,14.4233871 C4.29268293,10.3496591 5.57428606,6.57903748 7.75148879,3.50238961 Z" id="Combined-Shape" fill="#FFFFFF" opacity="0.248584692"></path><rect id="Rectangle-7-Copy" fill="#BF903D" transform="translate(3.768528, 33.848273) rotate(-45.000000) translate(-3.768528, -33.848273) " x="1.42706507" y="33.0579505" width="4.68292683" height="1.58064516"></rect></g></g></g></g></svg>'},VPjn:function(e,t,s){"use strict";s.r(t)},VQXm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("MC1S"),o=s("nBlB"),r=s("gTAB"),l=n.__importDefault(s("Pfoe")),u=s("2yjE"),c=n.__importDefault(s("o8si")),d=s("0x+l");s("/zhm");class p extends a.Component{constructor(e){super(e),this.translationKeyPrefix="assessments.canvas.question.multipleAnswer",this.handleEditorFocus=()=>{this.setState({editorFocused:!0})},this.handleEditorBlur=()=>{this.setState({editorFocused:!1})},this.onTextChange=e=>{const{answer:t,onAnswerChange:s}=this.props;s({...t,answerText:{rawText:e.toBbML()}})},this.onCorrectAnswerChange=(e,t)=>{const{answer:s,onAnswerChange:n}=this.props;n({...s,correctAnswer:t})},this.onDelete=()=>{const{onAnswerDeletion:e,answer:t}=this.props;e(t.id)},this.state={editorFocused:!1}}getChoiceTextClassName(){const{answer:e,activeEditorId:t,canEnterEditMode:s}=this.props;let n="multiple-answer-li__text";return!(e.id===t)&&s&&(n+=" -is-clickable"),n}render(){const{answer:e,canDeleteAnswer:t,dragButtonAriaLabel:s,dragPointRef:n,editMode:o,hasAddOrRemoveAnswerPermissions:p,hasReorderAnswersPermissions:m,hasSubmissions:h,index:f,localize:g,question:E,questionTitle:_}=this.props,b=r.EditModeEnum.INACTIVE===o,y=f+1,C=`answer-header-${E.id}-${f}`,w=`${u.QUESTION_TITLE_ID_PREFIX}${E.id} ${C}`,v=g.translate(`${this.translationKeyPrefix}.answerPlaceholder`,{answerNumber:y}),S=g.translate(`${this.translationKeyPrefix}.checkboxAriaLabel`,{questionTitle:_,answerNumber:y}),P=g.translate(`${this.translationKeyPrefix}.trashButtonAriaLabel`,{questionTitle:_,answerNumber:y}),A=g.translate("assessments.canvas.drag.instructions"),T=g.translate(`${this.translationKeyPrefix}.correctAnswer`);let I="multiple-answer-li__delete";this.state.editorFocused&&(I+=" multiple-answer-li--editor-focused");let D="multiple-answer-li__dnd";return this.state.editorFocused&&(D+=" multiple-answer-li--editor-focused"),a.default.createElement("div",{className:"multiple-answer-li"},a.default.createElement("div",{className:"multiple-answer-li__answer"},!b&&a.default.createElement(i.Checkbox,{checked:e.correctAnswer,onChange:this.onCorrectAnswerChange,ariaLabel:S,ariaDescribedBy:`bb-editor${e.id}`,analyticsId:"assessments.canvas.question.multipleAnswer.correctAnswerChange"}),a.default.createElement("div",{className:this.getChoiceTextClassName()},a.default.createElement("div",{id:C,className:"sr-only"},g.translate("assessments.canvas.question.multipleAnswer.answerHeader",{answerNumber:y})),a.default.createElement(l.default,Object.assign({},this.props,{ariaLabelledBy:w,bbml:e.answerText.rawText,id:e.id,isReadOnly:b,onChange:this.onTextChange,onFocus:this.handleEditorFocus,onBlur:this.handleEditorBlur,placeholder:v,toolbarSet:"minimal"}))),b&&e.correctAnswer&&a.default.createElement("span",{className:"multiple-answer-li__correct"},T),!b&&!h&&a.default.createElement("div",null,m&&a.default.createElement(c.default,{className:D,dragPointRef:n,title:A,ariaLabel:s,ariaDescribedBy:`bb-editor${e.id}`}),p&&a.default.createElement(i.IconButton,{icon:a.default.createElement(d.Trash,null),onClick:this.onDelete,className:I,disabled:!t(e),ariaLabel:P,"aria-describedby":`bb-editor${e.id}`,analyticsId:"assessments.canvas.question.deleteAnswer"}))))}}t.MultipleAnswerChoice=p,t.DndMultipleAnswerChoice=o.DragNDropItem(p)},VlbA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("uxze"),i=s("pNgc"),o=s("o7ef");t.onDescriptionLinkClick=({question:e,openPoolQuestionPanel:t,addQuestionsToEmptyPool:s})=>{e.numOfAvailableQuestions>0?t(e.id):s(e.id)};t.default=e=>n.default.createElement("div",{className:`${o.CLASS_BASE} ${o.CLASS_BASE}--read`},n.default.createElement("div",{className:`${o.CLASS_BASE}__content`},n.default.createElement(i.ContentCollection,{className:`${o.CLASS_BASE}__icon`,color:"primary"}),n.default.createElement("div",{className:`${o.CLASS_BASE}__content-description-wrapper`},n.default.createElement("div",{className:`${o.CLASS_BASE}__content-description`},e.localize.translate(`${o.LOCALE_KEY_BASE}.description.read.plural`,{questionsDisplayed:e.question.numOfQuestionsToChoose,questionsTotal:e.question.numOfAvailableQuestions})),n.default.createElement(a.Link,{className:`${o.CLASS_BASE}__view-questions-link`,disabled:null!=e.questionBeingEditedId,onClick:()=>t.onDescriptionLinkClick(e),analyticsId:"assessments.question.question-block-question.read"},e.localize.translate(`${o.LOCALE_KEY_BASE}.viewQuestions`,{questionsTotal:e.question.numOfAvailableQuestions})))))},Vng8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("nsO7")),a=s("JfV0"),i=s("zGdY"),o=e=>!!e.questionText.rawText&&-1!==Math.sign(e.points);t.havePointsChangedToPositive=(e,t)=>e!==t&&-1!==Math.sign(t),t.hasFullCreditFlagChanged=(e,t)=>n.isUndefined(e.fullCredit)?!0===t.fullCredit:e.fullCredit!==t.fullCredit;t.hasScoringOptionsChanged=(e,t)=>e.allowPartialCredit!==t.allowPartialCredit||e.allowNegativeScoreForIncorrectAnswers!==t.allowNegativeScoreForIncorrectAnswers||e.allowNegativeOverallScore!==t.allowNegativeOverallScore;const r=(e,t)=>e.partialCreditTolerance&&t.partialCreditTolerance&&(e.partialCreditTolerance.type!==t.partialCreditTolerance.type||e.partialCreditTolerance.value!==t.partialCreditTolerance.value),l=(e,t)=>e.correctAnswerTolerance&&t.correctAnswerTolerance&&(e.correctAnswerTolerance.type!==t.correctAnswerTolerance.type||e.correctAnswerTolerance.value!==t.correctAnswerTolerance.value),u=(e,t)=>e.units!==t.units&&(e.units.unitPointsPercent!==t.units.unitPointsPercent||e.units.unitsCaseSensitive!==t.units.unitsCaseSensitive||e.units.unitsRequired!==t.units.unitsRequired||e.units.unitValue!==t.units.unitValue);t.hasRegradingCalculatedFormulaQuestionFieldChanged=(e,t)=>e.answerFormula!==t.answerFormula||e.allowPartialCredit!==t.allowPartialCredit||e.partialCreditPointsPercent!==t.partialCreditPointsPercent||r(e,t)||l(e,t)||u(e,t),t.shouldShowRegradingWarning=(e,s)=>{let a=!1;const{questionType:o}=e;if(a=e.points!==s.points||e.pointsPerQuestion!==s.pointsPerQuestion||t.hasFullCreditFlagChanged(e,s))return!0;if(i.QuestionType.Multiple!==o&&i.QuestionType.Matching!==o||(a=t.hasScoringOptionsChanged(e,s)),a)return!0;switch(o){case i.QuestionType.FIMB:a=n.some(s.answers,(t,s)=>{const a=e.answers[s];return!n.isEqual(t.answerValues,a.answerValues)});break;case i.QuestionType.Multiple:a=n.some(s.answers,(t,s)=>{const n=e.answers[s];return t.id!==n.id||t.correctAnswer!==n.correctAnswer});break;case i.QuestionType.Either:a=!n.isEqual(e.answer,s.answer);break;case i.QuestionType.CalculatedFormula:a=t.hasRegradingCalculatedFormulaQuestionFieldChanged(e,s);break;case i.QuestionType.CalculatedNumeric:a=t.hasCalculatedNumericQuestionChanged(e,s)}return a},t.hasBaseQuestionChanged=(e,s)=>{var n,a;const i=(null===(n=e.questionText)||void 0===n?void 0:n.rawText)!==(null===(a=s.questionText)||void 0===a?void 0:a.rawText),o=t.havePointsChangedToPositive(e.points,s.points),r=t.hasFullCreditFlagChanged(e,s),l=((e,t)=>((e,t)=>!(!e.correctResponseFeedback||!t.correctResponseFeedback)&&e.correctResponseFeedback.rawText!==t.correctResponseFeedback.rawText)(e,t)||((e,t)=>!(!e.incorrectResponseFeedback||!t.incorrectResponseFeedback)&&e.incorrectResponseFeedback.rawText!==t.incorrectResponseFeedback.rawText)(e,t))(e,s);return i||o||r||l},t.hasUsageCountChanged=(e,t)=>e.usageCount!==t.usageCount,t.hasAutomatedFeedbackChanged=(e,t)=>{var s,n,a,i;return(null===(s=e.correctResponseFeedback)||void 0===s?void 0:s.rawText)!==(null===(n=t.correctResponseFeedback)||void 0===n?void 0:n.rawText)||(null===(a=e.incorrectResponseFeedback)||void 0===a?void 0:a.rawText)!==(null===(i=t.incorrectResponseFeedback)||void 0===i?void 0:i.rawText)},t.hasCalculatedFormulaQuestionChanged=(e,s)=>!(s.points<0)&&(!(e.answerFormula===s.answerFormula&&e.allowPartialCredit===s.allowPartialCredit&&e.answerScale===s.answerScale&&e.correctAnswerFormat===s.correctAnswerFormat&&e.correctAnswerPrecision===s.correctAnswerPrecision&&e.displayFormulaToStudent===s.displayFormulaToStudent&&e.displayRoundingSettingsToStudent===s.displayRoundingSettingsToStudent&&e.partialCreditPointsPercent===s.partialCreditPointsPercent&&n.isEqual(e.variableDefinitions,s.variableDefinitions)&&n.isEqual(e.variableSets,s.variableSets)&&e.variableSetCount===s.variableSetCount&&e.mathMLImageURL===s.mathMLImageURL&&e.mathMLImageAltText===s.mathMLImageAltText&&!r(e,s)&&!l(e,s)&&!u(e,s)&&!t.hasAutomatedFeedbackChanged(e,s))||t.hasBaseQuestionChanged(e,s)),t.hasCalculatedNumericQuestionChanged=(e,s)=>{if(!o(s))return!1;if(null===s.answerValue||null===s.toleranceValue)return!1;if(t.hasBaseQuestionChanged(e,s))return!0;const n=e.answerValue!==s.answerValue,a=e.toleranceValue!==s.toleranceValue;return n||a},t.hasEssayQuestionChanged=(e,s)=>!!o(s)&&t.hasBaseQuestionChanged(e,s),t.hasFIMBQuestionChanged=(e,t)=>{if(!e.answers||!t.answers||e.answers.length!==t.answers.length)return!0;let s=!1;const a=n.keyBy(e.answers,e=>e.ident);return t.answers.forEach(e=>{if(s)return;if(!a[e.ident]||e.answerValues.length!==a[e.ident].answerValues.length)return void(s=!0);const t=e.answerValues.map(e=>e.value),i=a[e.ident].answerValues.map(e=>e.value);s=0!==n.difference(t,i).length}),s},t.hasMatchingQuestionChanged=(e,s)=>{if(!o(s))return!1;if(t.hasBaseQuestionChanged(e,s))return!0;if(e.allowPartialCredit!==s.allowPartialCredit||e.allowNegativeScoreForIncorrectAnswers!==s.allowNegativeScoreForIncorrectAnswers||e.allowNegativeOverallScore!==s.allowNegativeOverallScore)return!0;if(e.prompts.length!==s.prompts.length)return!0;if(e.answers.length!==s.answers.length)return!0;const a=e.prompts.map(e=>e.id);if(s.prompts.map(e=>e.id).some(e=>!a.includes(e)))return!0;const i=e.answers.map(e=>e.ui.id);if(s.answers.map(e=>e.ui.id).some(e=>!i.includes(e)))return!0;const r=e.prompts.map(e=>e.promptText.rawText),l=s.prompts.map(e=>e.promptText.rawText);if(!n.isEqual(r,l))return!0;const u=e.answers.map(e=>e.answerText.rawText),c=s.answers.map(e=>e.answerText.rawText);return!n.isEqual(u,c)},t.hasMultipleAnswerQuestionChanged=(e,s)=>{if(!o(s))return!1;if(t.hasBaseQuestionChanged(e,s))return!0;if(e.answers.length!==s.answers.length)return!0;const a=e.answers.map(e=>e.id);if(s.answers.map(e=>e.id).some(e=>!a.includes(e)))return!0;const i=e.answers.map(e=>e.answerText.rawText),r=s.answers.map(e=>e.answerText.rawText);if(!n.isEqual(i,r))return!0;if(e.answers.some(e=>{var t;return(null===(t=s.answers.find(t=>t.id===e.id))||void 0===t?void 0:t.correctAnswer)!==e.correctAnswer}))return!0;if(t.hasScoringOptionsChanged(e,s))return!0;let l=!1;for(let t=0;t<e.answers.length;t++)if(s.answers[t].id!==e.answers[t].id){l=!0;break}return l},t.hasPresentationQuestionChanged=(e,t)=>{var s,n;if(!o(t))return!1;return(null===(s=e.questionText)||void 0===s?void 0:s.rawText)!==(null===(n=t.questionText)||void 0===n?void 0:n.rawText)},t.hasTrueFalseQuestionChanged=(e,s)=>{if(!o(s))return!1;if(t.hasBaseQuestionChanged(e,s))return!0;return e.answer!==s.answer},t.hasQuestionBlockQuestionChanged=(e,t)=>!(t.pointsPerQuestion<0||t.numOfQuestionsToChoose<0)&&((e.pointsPerQuestion!==t.pointsPerQuestion||e.numOfQuestionsToChoose!==t.numOfQuestionsToChoose||e.numOfAvailableQuestions!==t.numOfAvailableQuestions)&&!(t.numOfQuestionsToChoose>t.numOfAvailableQuestions)),t.questionChangedFuncs={hasBaseQuestionChanged:t.hasBaseQuestionChanged,hasCalculatedFormulaQuestionChanged:t.hasCalculatedFormulaQuestionChanged,hasCalculatedNumericQuestionChanged:t.hasCalculatedNumericQuestionChanged,hasEssayQuestionChanged:t.hasEssayQuestionChanged,hasFIMBQuestionChanged:t.hasFIMBQuestionChanged,hasPresentationQuestionChanged:t.hasPresentationQuestionChanged,hasQuestionBlockQuestionChanged:t.hasQuestionBlockQuestionChanged,hasMatchingQuestionChanged:t.hasMatchingQuestionChanged,hasMultipleAnswerQuestionChanged:t.hasMultipleAnswerQuestionChanged,hasTrueFalseQuestionChanged:t.hasTrueFalseQuestionChanged},t.hasQuestionChanged=(e,s)=>{const{questionType:n}=e;switch(n){case i.QuestionType.CalculatedFormula:return t.questionChangedFuncs.hasCalculatedFormulaQuestionChanged(e,s);case i.QuestionType.CalculatedNumeric:return t.questionChangedFuncs.hasCalculatedNumericQuestionChanged(e,s);case i.QuestionType.Either:return t.questionChangedFuncs.hasTrueFalseQuestionChanged(e,s);case i.QuestionType.Essay:return t.questionChangedFuncs.hasEssayQuestionChanged(e,s);case i.QuestionType.FIMB:return t.questionChangedFuncs.hasFIMBQuestionChanged(e,s);case i.QuestionType.PresentationOnly:return t.questionChangedFuncs.hasPresentationQuestionChanged(e,s);case i.QuestionType.Matching:return t.questionChangedFuncs.hasMatchingQuestionChanged(e,s);case i.QuestionType.Multiple:return t.questionChangedFuncs.hasMultipleAnswerQuestionChanged(e,s);case i.QuestionType.QuestionBlock:return t.questionChangedFuncs.hasQuestionBlockQuestionChanged(e,s);default:throw new Error(`No corresponding has-changed method specified for the given question type: ${n}`)}},t.isValidOnCreate=e=>{const{questionType:t}=e;switch(t){case i.QuestionType.QuestionBlock:return!0;case i.QuestionType.PresentationOnly:return a.Questions.isFileAttachment(e);default:return!1}},t.isNewQuestion=e=>n.startsWith(e.id,a.NEW_ENTITY_ID_PREFIX),t.hasLinkedQuestion=e=>e.usageCount>=1},VsDy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("zGdY"),o=s("JfV0"),r=s("uDfI"),l=s("9OUN"),u=s("MC1S"),c=s("8jBL"),d=s("0x+l"),p=s("myse"),m=s("8unJ"),h=n.__importDefault(s("kPPX"));s("wXu7");class f extends a.Component{constructor(e){super(e),this.loadedColumnSummary=!1,this.loadedGradebookColumn=!1,this.loadedContent=!1,this.assessmentHasResponses=()=>{const{assessment:e}=this.props;return e&&e.hasResponses},this.contentHasMultipleAttempts=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&1!==e.deploymentSettings.attemptCount},this.contentHasTimeLimit=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&null!=e.deploymentSettings.timeLimit},this.contentHasGroups=()=>{const{content:e}=this.props;return e&&e.isGroupContent},this.columnHasPostedGrades=()=>{const{columnSummary:e}=this.props;return e&&(e.numGroupsPosted||e.numPosted)},this.canEditSettings=()=>{const{assessment:e}=this.props;return e&&e.permissions.modify&&e.permissions.deploy},this.canEditDueDate=()=>{const{assessment:e}=this.props;if(!e)return!1;const t=e.permissions;return t.modify&&t.deploy&&t.modifyDueDate},this.canOpenGroups=()=>this.canEditSettings()&&!this.contentHasMultipleAttempts()&&!this.contentHasTimeLimit(),this.persist=()=>{const{content:e,gradebookColumn:t,persistContent:s,persistGradebookColumn:n}=this.props,a={...e},i={...t};null!==this.state.allowConversations&&(this.state.allowConversations?a.forumAttacherAction=o.ForumAttacherAction.ADD.toString():(a.forumAttacherAction=o.ForumAttacherAction.DELETE.toString(),a.attachedForumLink=null));const r=null!==this.state.randomizeQuestions,l=null!==this.state.randomizeAnswers;return(r||l)&&(a.deploymentSettings={...e.deploymentSettings},r&&(a.deploymentSettings.isRandomizationOfQuestionsRequired=this.state.randomizeQuestions),l&&(a.deploymentSettings.isRandomizationOfAnswersRequired=this.state.randomizeAnswers)),null!==this.state.dueDate&&(i.dueDate=this.state.dueDate),null!==this.state.anonymousGrading&&(i.anonymousGrading=this.state.anonymousGrading),s(e,a).then(()=>{n(t,i).then(()=>{this.setState({allowConversations:null,randomizeQuestions:null,randomizeAnswers:null,dueDate:null,anonymousGrading:null})})})},this.onAllowConversationToggle=(e,t)=>{this.setState({allowConversations:t})},this.onRandomizeQuestionsToggle=(e,t)=>{this.setState({randomizeQuestions:t})},this.onRandomizeAnswersToggle=(e,t)=>{this.setState({randomizeAnswers:t?"ALWAYS":"NEVER"})},this.onAnonymousGradingToggle=(e,t)=>{this.setState({anonymousGrading:t})},this.onDueDateChange=e=>{this.setState(()=>({dueDate:e}))},this.onGroupsDelete=()=>{this.setState(()=>({showDeleteGroupsDialog:!0}))},this.onGroupsDeleteCancel=()=>{this.setState(()=>({showDeleteGroupsDialog:!1}))},this.onGroupsDeleteConfirm=()=>{const{content:e,deleteGroups:t}=this.props;t(e.id),this.setState(()=>({showDeleteGroupsDialog:!1}))},this.getGroupsSubTitle=()=>{const{content:e,localizationPrefix:t}=this.props,s=this.props.localize.translate;let n="";if(this.canEditSettings())if(this.contentHasMultipleAttempts()||this.contentHasTimeLimit())this.contentHasMultipleAttempts()&&this.contentHasTimeLimit()?n=s(`${t}.settings.groups.subtitle.restrictions.attemptsAndTimeLimit`):this.contentHasTimeLimit()?n=s(`${t}.settings.groups.subtitle.restrictions.timeLimit`):this.contentHasMultipleAttempts()&&(n=s(`${t}.settings.groups.subtitle.restrictions.attempts`));else if(this.contentHasGroups())n=s(`${t}.settings.groups.subtitle.numberOfGroups.plural`,{count:e.assignedGroups.length});else{if(!this.assessmentHasResponses()&&!this.columnHasPostedGrades())return null;{const e=this.props.gradebookColumn.gradebookCategory,a=e.isUserDefined?"custom":e.title;this.columnHasPostedGrades()?n=s(`${t}.settings.groups.subtitle.restrictions.studentAttempts.${a}`,{title:a}):this.assessmentHasResponses()&&(n=s(`${t}.settings.groups.subtitle.restrictions.postedGrades.${a}`,{title:a}))}}else n=s(`${t}.settings.groups.subtitle.restrictions.insufficientPrivileges`);return a.default.createElement("div",null,n)},this.state={allowConversations:null,anonymousGrading:null,randomizeQuestions:null,randomizeAnswers:null,dueDate:null,showDeleteGroupsDialog:!1}}componentDidUpdate(e){const{gradebookColumn:t,content:s,courseId:n,contentId:a,loadColumnSummary:i,loadContents:o,loadGradebookColumn:r}=this.props;t||this.loadedGradebookColumn||!s||(r({courseId:n,columnId:s.gradingColumn.id}),this.loadedGradebookColumn=!0),this.loadedColumnSummary||e.gradebookColumn||!t||(i({courseId:t.courseId,columnId:t.id}),this.loadedColumnSummary=!0),s||this.loadedContent||(o({courseId:n,contentId:a}),this.loadedContent=!0)}render(){const{content:e,gradebookColumn:t,localizationPrefix:s,analyticsEventAugmentor:n}=this.props,{showDeleteGroupsDialog:o}=this.state,r=this.props.localize.translate,l=n(p.AnalyticsEventTypes.CLICK_EVENT,()=>{},"assessmentSettings.settings.groups.title.link");return a.default.createElement("div",{className:"assessment-settings"},e&&t&&a.default.createElement("div",null,a.default.createElement(u.TextField,{className:"dueDate",label:r(`${s}.settings.dueDate`),defaultValue:t.dueDate,disabled:!this.canEditDueDate(),onChanged:this.onDueDateChange,analyticsId:"assessmentSettings.editDueDate"}),a.default.createElement(u.Checkbox,{label:r(`${s}.settings.allowClassConversations`),defaultChecked:!!e.attachedForumLink,disabled:!this.canEditSettings(),onChange:this.onAllowConversationToggle,analyticsId:"assessmentSettings.allowClassConversation"}),a.default.createElement(u.Checkbox,{label:r(`${s}.settings.randomizeQuestions`),defaultChecked:e.deploymentSettings.isRandomizationOfQuestionsRequired,disabled:!this.canEditSettings(),onChange:this.onRandomizeQuestionsToggle,analyticsId:"assessmentSettings.randomizeQuestions"}),a.default.createElement(u.Checkbox,{label:r(`${s}.settings.randomizeAnswers`),defaultChecked:e.deploymentSettings.isRandomizationOfAnswersRequired===i.RandomizeAnswers.Always,disabled:!this.canEditSettings(),onChange:this.onRandomizeAnswersToggle,analyticsId:"assessmentSettings.randomizeAnswers"}),a.default.createElement("h3",{className:"assessment-settings__subheader"},r(`${s}.settings.anonymousGrading`)),a.default.createElement(u.Checkbox,{label:r(`${s}.settings.hideStudentNames`),defaultChecked:t.anonymousGrading,onChange:this.onAnonymousGradingToggle,analyticsId:"assessmentSettings.hideStudentNames"}),a.default.createElement(u.PrimaryButton,{className:"submitButton",onClick:this.persist,text:r(`${s}.settings.submitButton`),analyticsId:"assessmentSettings.submit"})),a.default.createElement("div",null,this.canOpenGroups()?a.default.createElement("a",{"data-analytics-id":"assessmentSettings.settings.groups.title.link",href:this.props.routes.getGroupsHref(),onClick:l},a.default.createElement(c.Groups,null),a.default.createElement("div",null,r(`${s}.settings.groups.title`)),this.getGroupsSubTitle()):a.default.createElement("div",null,a.default.createElement(c.Groups,null),a.default.createElement("div",null,r(`${s}.settings.groups.title`)),this.getGroupsSubTitle()),this.contentHasGroups()&&this.canEditSettings()?a.default.createElement(u.IconButton,{className:"delete-groups",onClick:this.onGroupsDelete,icon:a.default.createElement(d.Trash,null),disabled:this.assessmentHasResponses()||this.columnHasPostedGrades(),ariaLabel:r(`${s}.settings.groups.delete.label`),analyticsId:"assessmentSettings.groups.delete"}):null),a.default.createElement(h.default,{hidden:!o,onCancel:this.onGroupsDeleteCancel,onContinue:this.onGroupsDeleteConfirm,titleKey:`${s}.settings.groups.delete.dialog.title`,textKey:`${s}.settings.groups.delete.dialog.text`,cancelKey:"assessments.global.cancel",continueKey:"assessments.global.yes",analyticsId:"assessment.settings.groups.delete.dialog"}))}}t.AssessmentSettingsPure=f;const g=r.connect((e,t)=>({assessment:o.select.assessment.getAssessmentByContentId(e,t.contentId),columnSummary:o.select.columnSummary.getColumnSummaryByColumnId(e,t.gradebookColumn&&t.gradebookColumn.id),content:o.select.content.getContentById(e,t.contentId),gradebookColumn:o.select.gradebookColumn.getGradebookColumnByContentId(e,t.contentId)}),e=>l.bindActionCreators({loadColumnSummary:o.actions.columnSummary.loadColumnSummary,deleteGroups:o.actions.group.deleteByContentId,loadGradebookColumn:o.actions.gradebookColumn.loadGradebookColumn,loadContents:o.actions.content.loadContents,persistGradebookColumn:o.actions.gradebookColumn.persistGradebookColumn,persistContent:o.actions.content.persistContent},e))(m.localizedComponentWrapper(f));t.default=p.withAnalytics(g)},W2w9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("8unJ"),i=s("np6O"),o=s("M0dR"),r=s("ks7T"),l=s("5HEc");s("S9Gz"),t.CLASS_PREFIX="calculated-formula-question__step-button";const u="assessments.canvas.question.calculatedFormula";t.BaseStepButtons=({analyticsId:e,localize:s,showBack:a,onBackClick:c,showNext:d,isNextDisabled:p,onNextClick:m})=>n.default.createElement("div",{className:t.CLASS_PREFIX},a&&n.default.createElement(i.AnalyticsIconButton,{analyticsId:`${e}.back.iconButton`,"aria-label":s.translate(`${u}.backAriaLabel`),className:`${t.CLASS_PREFIX}--back`,onClick:c},n.default.createElement(r.ChevronLeft,null),n.default.createElement(o.AnalyticsTypography,{component:"span",variant:"inherit"},s.translate(`${u}.back`))),d&&n.default.createElement(i.AnalyticsIconButton,{analyticsId:`${e}.next.iconButton`,"aria-label":s.translate(`${u}.nextAriaLabel`),className:`${t.CLASS_PREFIX}--next`,disabled:p,onClick:m},n.default.createElement(o.AnalyticsTypography,{component:"span",variant:"inherit"},s.translate(`${u}.next`)),n.default.createElement(l.ChevronRight,null))),t.default=a.localizedComponentWrapper(t.BaseStepButtons)},WARa:function(e,t,s){"use strict";s.r(t)},WEDm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("PCGI")),o=n.__importDefault(s("lSZ+")),r=n.__importDefault(s("z8be")),l=s("gTAB"),u=n.__importStar(s("TIvv")),c=n.__importStar(s("AiU9")),d=n.__importDefault(s("ZfLe")),p=n.__importStar(s("OPED")),m=s("Vng8"),h=s("WGaE"),f=s("tN4z"),g=s("XtXT");t.CalculatedNumeric=e=>{const{editMode:t,question:s}=e,n=g.useStyles(e),d=t=>{e.onQuestionChange(t,m.hasCalculatedNumericQuestionChanged)},E=l.EditModeEnum.ACTIVE===t,_=E&&m.hasLinkedQuestion(s);return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,{editMode:t,question:s},a.default.createElement(h.LinkedQuestionNotification,{show:_,usageCount:s.usageCount}),a.default.createElement(u.default,Object.assign({},u.getPluggableQuestionHeaderProps(e,d))),a.default.createElement(c.default,Object.assign({},c.getQuestionControlProps(e))),(()=>a.default.createElement(a.default.Fragment,null,E&&a.default.createElement(f.AnalyticsTypography,Object.assign({className:n.questionLabel,component:"label",variant:"h4",required:!0},{htmlFor:`bb-editor${s.id}`}),e.localize.translate("assessments.canvas.question.label")),a.default.createElement(p.default,Object.assign({},p.getQuestionTextProps(e,d)))))()),E?a.default.createElement(o.default,Object.assign({},e)):a.default.createElement(r.default,Object.assign({},e)))};const E=d.default(t.CalculatedNumeric);t.default=E},WGaE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("LeqM");t.LinkedQuestionNotification=n.default;var a=s("2xrW");t.copyQuestionsResultNotification=a.default;var i=s("AV37");t.processingStageNotification=i.default},Waue:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("Begd"),r=n.__importDefault(s("2kfE"));s("76BM");class l extends a.Component{constructor(e){super(e),this.isAnyQuestionDirty=()=>this.state.questionBeingEditedIsDirty,this.onQuestionEdit=e=>{this.setState(()=>({questionBeingEditedId:e,questionBeingEditedIsDirty:!1}))},this.onQuestionMadeDirty=e=>{e!==this.state.questionBeingEditedIsDirty&&(this.props.setIsAnyQuestionDirty(e),this.setState(()=>({questionBeingEditedIsDirty:e})))},this.state={questionBeingEditedId:null,questionBeingEditedIsDirty:!1}}render(){const{courseId:e,questions:t,hasSubmissions:s,deleteQuestion:n,isLoading:i,firstNewQuestionBankId:l,persistQuestion:u,hasAssessmentModifyPermissions:c,questionPoolId:d,assessmentId:p,localizationPrefix:m}=this.props;return a.default.createElement("div",{className:"question-pool-question-list assessment-canvas-react"},t&&t.map(t=>a.default.createElement(r.default,{key:t.id,courseId:e,question:t,hasSubmissions:s,hasAssessmentModifyPermissions:c,deleteQuestion:()=>n(t,{courseId:e,assessmentId:p,questionBlockId:d}),focusTitle:l===t.id,onQuestionEdit:this.onQuestionEdit,onQuestionMadeDirty:this.onQuestionMadeDirty,questionBeingEditedId:this.state.questionBeingEditedId,isAnyQuestionDirty:this.isAnyQuestionDirty(),persistQuestion:u,localizationPrefix:m})),(!t||i)&&a.default.createElement(o.Spinner,{size:o.SpinnerSize.large}))}}t.QuestionPoolQuestionList=l,t.default=i.localizedComponentWrapper(l)},X3OV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP"));t.DEFAULT_VALUE={panelHeightOffset:0},t.AssessmentCommonContext=n.createContext(t.DEFAULT_VALUE),t.withAssessmentCommonContext=e=>s=>n.createElement(t.AssessmentCommonContext.Consumer,null,t=>n.createElement(e,Object.assign({},s,{commonContext:t}))),t.AssessmentsCommonContextWrapper=({usePanelHeightOffset:e,children:s})=>{const a=e();return n.createElement(t.AssessmentCommonContext.Provider,{value:{panelHeightOffset:a}},s)}},XeRt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importStar(s("nsO7")),o=s("MC1S"),r=s("3ZJq"),l=n.__importDefault(s("PCGI")),u=n.__importDefault(s("7//j")),c=s("gTAB"),d=s("Vng8"),p=s("WGaE"),m=s("VQXm"),h=n.__importStar(s("TIvv")),f=n.__importStar(s("AiU9")),g=n.__importStar(s("OPED")),E=s("1Xy2");s("AFzv");const _=n.__importDefault(s("7LMM")),b=s("8unJ"),y=e=>a.default.createElement("ol",{className:"multiple-answer__list"},e.question.answers.map((t,s)=>a.default.createElement("li",{key:t.id,className:"multiple-answer__dnd-item"},a.default.createElement(m.MultipleAnswerChoice,Object.assign({},e,{answer:t,index:s}))))),C=e=>{const{activeEditorId:t,editMode:s,hasSubmissions:n,localize:m,onAnswerAddition:b,onQuestionChange:C,onReorder:w,question:v,questionTitle:S,setActiveEditorId:P,showScoringOptions:A,pluginsConfig:T}=e,I=c.EditModeEnum.INACTIVE===s,D=!I&&d.hasLinkedQuestion(v),R=m.translate("assessments.canvas.question.multipleAnswer.answerInstructions"),F=m.translate("assessments.canvas.question.multipleAnswer.addChoice"),Q=d.isNewQuestion(e.question),N=[{key:E.noPartialCredit},{key:E.partialCreditNoPenalty},{key:E.partialCreditWithPenalty}],x=()=>!0===i.get(e,"question.permissions.addOrRemoveAnswer")||Q,k=()=>!0===i.get(e,"question.permissions.reorderAnswers")||Q,q=e=>{e.preventDefault()};return a.default.createElement("div",{className:`multiple-answer ${I?"multiple-answer--read":"multiple-answer--edit"}`},a.default.createElement(l.default,{editMode:s,question:v},a.default.createElement(p.LinkedQuestionNotification,{show:D,usageCount:v.usageCount}),a.default.createElement(h.default,Object.assign({},h.getPluggableQuestionHeaderProps(e,C))),a.default.createElement(f.default,Object.assign({},f.getQuestionControlProps(e))),a.default.createElement(g.default,Object.assign({},g.getQuestionTextProps(e,C)))),a.default.createElement("div",{className:(()=>{let e="multiple-answer__container";return!n&&x||(e+=" -cannot-add-more"),e})()},a.default.createElement("div",{className:"multiple-answer__instructions"},R),I?(()=>a.default.createElement(y,Object.assign({},e,{hasAddOrRemoveAnswerPermissions:x(),hasReorderAnswersPermissions:k()})))():(()=>a.default.createElement(a.default.Fragment,null,a.default.createElement(u.default,Object.assign({},e,{items:v.answers,question:v,questionTitle:S,onReorderItem:w,boundingElementId:"gradebook-item-panel-content",scrollContainerId:"multiple-answer-dnd",hasAddOrRemoveAnswerPermissions:x(),hasReorderAnswersPermissions:k()})),!n&&x()&&a.default.createElement(o.Link,{className:"multiple-answer__add-choice",onClick:b,onMouseDown:q,type:"button",analyticsId:"assessments.canvas.question.multipleAnswer.addAnswer"},F)))()),A&&a.default.createElement(_.default,{question:e.question,onScoringOptionsChange:e.onScoringOptionsChange,editMode:e.editMode,isAnswersEditMode:!0,options:N,translationKeyPrefix:"assessments.canvas.question.multipleAnswer.scoringOptions"}),a.default.createElement(r.AutomatedQuestionFeedback,{activeEditorId:t,editMode:s,onQuestionChange:C,question:v,setActiveEditorId:P,pluginsConfig:T}))};C.defaultProps={showScoringOptions:!1},t.default=b.localizedComponentWrapper(C)},"Xs/S":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(()=>n.createStyles({progressBarClass:{height:10}}))},XtXT:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({questionLabel:{"&::before":{color:e.palette.error.main,content:'"*"',paddingRight:"5px"}}}))},"YE/5":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),i=s("8unJ"),o=s("caKH"),r=e=>{const{localize:t,onCancel:s,onDismiss:i,onOk:r,show:l,subText:u,title:c,showCloseButton:d,okButtonLocaleKey:p,cancelButtonLocaleKey:m,analyticsId:h}=e;return n.default.createElement(o.UltraModalDialog,{hidden:!l,onDismiss:i,dialogContentProps:{type:a.DialogType.normal,showCloseButton:d,title:c,subText:u,isAlert:!0},modalProps:{isBlocking:!0},analyticsId:`${h}.warningDialog`},n.default.createElement(a.DialogFooter,null,n.default.createElement(a.DefaultButton,{onClick:s,text:t.translate(m),analyticsId:`${h}.warningDialog.cancel.button`}),n.default.createElement(a.PrimaryButton,{onClick:r,text:t.translate(p),analyticsId:`${h}.warningDialog.ok.button`})))};r.defaultProps={showCloseButton:!0,cancelButtonLocaleKey:"assessments.canvas.warningDialogs.cancel",okButtonLocaleKey:"assessments.canvas.warningDialogs.ok"},t.default=i.localizedComponentWrapper(r)},YqWx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("t9Ny"),i=s("JfV0"),o=s("8unJ"),r=s("b0Dq");s("6iVS");t.default=o.localizedComponentWrapper(e=>{return n.default.createElement("div",{className:"dnd-question-preview"},(()=>{const{question:t,questionTitle:s,localize:o}=e,l=i.Questions.isFileAttachment(t),u=i.Questions.isQuestionBlock(t),c=u?t.pointsPerQuestion:t.points,d=`assessments.canvas.question.header.${u?"pointsEach":"points"}`;return l?n.default.createElement("div",{className:"dnd-question-preview__file"},n.default.createElement(a.FileViewer,Object.assign({},r.getFileViewerPropsArray(t)[0],{analyticsId:"assessment.canvas.question.preview.fileViewer"},{}))):n.default.createElement("div",{className:"dnd-question-preview__question"},n.default.createElement("div",{className:"dnd-question-preview__question-header"},s&&n.default.createElement("div",{className:"dnd-question-preview__question-header-inner"},n.default.createElement("h3",{className:"dnd-question-preview__title"},s),n.default.createElement("div",{className:"dnd-question-preview__pill"},o.translate(d,{points:c}))),t.questionText&&n.default.createElement("div",{className:"dnd-question-preview__question-text",dangerouslySetInnerHTML:{__html:t.questionText.rawText}})))})())})},ZfLe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("nsO7")),i=n.__importStar(s("ERkP")),o=s("MC1S"),r=s("8unJ"),l=n.__importDefault(s("YE/5")),u=s("gTAB"),c=n.__importDefault(s("ZzTI")),d=s("Pfoe"),p=s("Vng8");s("/Lwm");const m=s("JfV0");t.default=e=>{class t extends i.Component{constructor(e){super(e),this.originalQuestion=this.props.question,this.containerRef=null,this.isNewQuestion=()=>p.isNewQuestion(this.props.question),this.hasQuestionDeletePermissions=()=>{const e=a.get(this.props,"question.permissions.delete");return null==e?this.isNewQuestion():e},this.hasQuestionEditPermissions=()=>{const e=a.get(this.props,"question.permissions.edit");return null==e?this.isNewQuestion():e},this.getEditMode=()=>this.editModeIsActive()?u.EditModeEnum.ACTIVE:u.EditModeEnum.INACTIVE,this.editModeIsActive=()=>this.props.question.id===this.props.questionBeingEditedId,this.refreshBbml=()=>{this.setState({refreshBbml:!0},()=>this.setState({refreshBbml:!1}))},this.handleQuestionRevert=(e=null)=>{this.isNewQuestion()||this.resetQuestionFromProps(e)},this.resetQuestionFromProps=(e=null)=>{const t=this.props.question;this.originalQuestion=t,this.setState(()=>({question:t}),()=>{this.refreshBbml(),e&&e()})},this.setQuestionValid=()=>{this.setState({isValid:!0})},this.onQuestionChange=(e,t,s=null,n=!0)=>{this.setState(s=>{const n=t(this.originalQuestion,e,s.question,s.isValid);return{question:{...s.question,...e},isValid:n}},()=>{n&&this.props.onQuestionMadeDirty(!0),s&&s()})},this.openGoals=()=>{const{openGoals:e,question:t}=this.props;e(t)},this.onSaveButtonClick=()=>{const{question:e}=this.state,{checkAndDisableAssessmentSettings:t,hasSubmissions:s}=this.props,n=p.hasLinkedQuestion(e);let a=!1;s&&(a=p.shouldShowRegradingWarning(this.originalQuestion,e)),a&&n?this.showCombinedRegradingLinkedQuestionDialog():a?this.showRegradingDialog():n?this.showLinkedQuestionDialog():!m.Questions.isPresentationOnly(e)&&t?t(this.onQuestionSave):this.onQuestionSave()},this.onQuestionDelete=()=>{const{deleteQuestion:e,question:t}=this.props;e(t)},this.onQuestionSave=()=>{const e=this.stopEditMode;(0,this.props.persistQuestion)(this.props.question,this.state.question,this.props.question.sourceInfo?this.props.question.sourceInfo.id:this.props.question.assessmentId).then(({question:e})=>{this.originalQuestion=e}),e()},this.onQuestionCancel=()=>{const{onQuestionEditCancel:e}=this.props;if(this.isNewQuestion()){const{deleteQuestion:e,question:t}=this.props;this.stopEditMode(),e(t)}else this.handleQuestionRevert(this.stopEditMode);e&&e()},this.startEditMode=(e=null)=>{this.props.isAnyQuestionDirty||this.props.questionBeingEditedId===this.props.question.id||(this.props.onQuestionEdit(this.props.question.id),e&&e())},this.stopEditMode=()=>{const{onQuestionEdit:e,onQuestionMadeDirty:t}=this.props;e(null),t(!1),this.containerRef&&this.containerRef.querySelector(`.${d.BB_EDITOR_CONTAINER_CLASSNAME}`)&&this.containerRef.querySelector(`.${d.BB_EDITOR_CONTAINER_CLASSNAME}`).focus(),this.setActiveEditorId(null),this.setState(()=>({isValid:!1,showRegradingDialog:!1,showLinkedQuestionDialog:!1,showCombinedRegradingLinkedQuestionDialog:!1}))},this.setActiveEditorId=e=>{this.setState(()=>({activeEditorId:e}))},this.showQuestionControls=()=>{if(!1===this.props.showQuestionControls)return!1;return null===this.props.questionBeingEditedId},this.showCombinedRegradingLinkedQuestionDialog=()=>{this.setState(()=>({showCombinedRegradingLinkedQuestionDialog:!0}))},this.dismissCombinedRegradingLinkedQuestionDialog=()=>{this.setState(()=>({showCombinedRegradingLinkedQuestionDialog:!1}))},this.showLinkedQuestionDialog=()=>{this.setState(()=>({showLinkedQuestionDialog:!0}))},this.dismissLinkedQuestionDialog=()=>{this.setState(()=>({showLinkedQuestionDialog:!1}))},this.showRegradingDialog=()=>{this.setState(()=>({showRegradingDialog:!0}))},this.dismissRegradingDialog=()=>{this.setState(()=>({showRegradingDialog:!1}))},this.onSaveCancelMouseDown=e=>{e.preventDefault()},this.setContainerRef=e=>{this.containerRef=e},this.state={question:e.question,refreshBbml:!1,activeEditorId:null,isValid:!1,showRegradingDialog:!1,showLinkedQuestionDialog:!1,showCombinedRegradingLinkedQuestionDialog:!1}}componentDidMount(){const{onQuestionMadeDirty:e,question:t,questionBeingEditedId:s}=this.props;this.isNewQuestion()&&!s&&(this.startEditMode(),e(!0)),this.isNewQuestion()&&p.isValidOnCreate(t)&&this.setQuestionValid()}componentDidUpdate(e){const{question:t}=e,{question:s}=this.props,n=!this.editModeIsActive(),a=p.hasUsageCountChanged(t,s),i=p.hasQuestionChanged(t,s);n&&(i||a)&&this.resetQuestionFromProps()}render(){const{onQuestionEdit:t,onQuestionMadeDirty:s,isAnyQuestionDirty:n,persistQuestion:a,localizationPrefix:r,...c}=this.props,{question:d,refreshBbml:p,activeEditorId:m,showRegradingDialog:h,showLinkedQuestionDialog:f,showCombinedRegradingLinkedQuestionDialog:g}=this.state,E=this.getEditMode(),_=u.EditModeEnum.ACTIVE===E,b=this.hasQuestionEditPermissions()&&!n,y=this.props.localize.translate(`${r}.canvas.question.cancel`),C=`${r}.canvas.warningDialogs.questionRegrading.cancel`,w=`${r}.canvas.warningDialogs.questionRegrading.ok`;return i.default.createElement("div",{className:"question-container",ref:this.setContainerRef},i.default.createElement(e,Object.assign({},c,{showQuestionControls:this.showQuestionControls(),editMode:E,onQuestionChange:this.onQuestionChange,onQuestionRevert:this.handleQuestionRevert,onQuestionSave:this.onQuestionSave,question:d,refreshBbml:p,startEditMode:this.startEditMode,setActiveEditorId:this.setActiveEditorId,activeEditorId:m,deleteQuestion:this.onQuestionDelete,hasQuestionDeletePermissions:this.hasQuestionDeletePermissions(),hasQuestionEditPermissions:this.hasQuestionEditPermissions(),openGoals:this.openGoals,canEnterEditMode:b,localizationPrefix:r})),_&&i.default.createElement("div",{className:"question-container__buttons"},i.default.createElement(o.DefaultButton,{type:"button",text:y,onClick:this.onQuestionCancel,onMouseDown:this.onSaveCancelMouseDown,analyticsId:"assessments.canvas.editMode.question.cancel"}),i.default.createElement(o.PrimaryButton,{disabled:!this.state.isValid,type:"button",text:this.props.localize.translate(`${r}.canvas.question.save`),onClick:this.onSaveButtonClick,onMouseDown:this.onSaveCancelMouseDown,analyticsId:"assessments.canvas.editMode.question.save"})),g&&i.default.createElement(l.default,{show:!0,onCancel:this.dismissCombinedRegradingLinkedQuestionDialog,onDismiss:this.dismissCombinedRegradingLinkedQuestionDialog,onOk:this.onQuestionSave,cancelButtonLocaleKey:"assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.cancel",okButtonLocaleKey:"assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.ok",title:this.props.localize.translate("assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.title"),subText:this.props.localize.translate("assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion.subText"),showCloseButton:!1,analyticsId:"assessments.canvas.warningDialogs.combinedRegradingLinkedQuestion"}),h&&i.default.createElement(l.default,{show:!0,onCancel:this.dismissRegradingDialog,onDismiss:this.dismissRegradingDialog,onOk:this.onQuestionSave,cancelButtonLocaleKey:C,okButtonLocaleKey:w,title:this.props.localize.translate(`${r}.canvas.warningDialogs.questionRegrading.title`),subText:this.props.localize.translate(`${r}.canvas.warningDialogs.questionRegrading.subText`),showCloseButton:!1,analyticsId:"assessments.canvas.warningDialogs.questionRegrading"}),f&&i.default.createElement(l.default,{show:!0,onCancel:this.dismissLinkedQuestionDialog,onDismiss:this.dismissLinkedQuestionDialog,onOk:this.onQuestionSave,cancelButtonLocaleKey:"assessments.canvas.warningDialogs.linkedQuestion.cancel",okButtonLocaleKey:"assessments.canvas.warningDialogs.linkedQuestion.ok",title:this.props.localize.translate("assessments.canvas.warningDialogs.linkedQuestion.title"),subText:this.props.localize.translate("assessments.canvas.warningDialogs.linkedQuestion.subText"),showCloseButton:!1,analyticsId:"assessments.canvas.warningDialogs.linkedQuestion."}))}}return t.displayName=`WithSubscription(${c.default(e)})`,r.localizedComponentWrapper(t)}},ZnFM:function(e,t,s){"use strict";s.r(t)},ZzTI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||"Component"}},a6r6:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("2cC3");const n=s("DjPm"),a=s("lqf4");var i=s("DjPm");t.MathEditor=i.MathEditor;var o=s("mzw0");t.useWirisEditor=o.useWirisEditor,t.WirisEditorInstanceUtils=a,t.default=n.MathEditor},aNN5:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("0x+l"),o=s("8unJ"),r=n.__importDefault(s("Pfoe")),l=s("2yjE"),u=n.__importDefault(s("391C")),c=n.__importStar(s("jPx/"));s("B8lv");class d extends a.default.Component{constructor(e){super(e),this.onBlur=()=>{this.setState({editorFocused:!1})},this.onFocus=()=>{this.setState({editorFocused:!0})},this.state={editorFocused:!1}}render(){const{isReadOnly:e,localize:t,onEditorTextChange:s,onRemoveReusedAnswer:n,pairNumber:o,prompt:d,question:p,reusedElsewherePair:m,text:h}=this.props,f=`answer-header-${p.id}-${o}`,g=`${l.QUESTION_TITLE_ID_PREFIX}${p.id} ${f}`;return a.default.createElement("div",{className:`matching-answer ${e?"matching-answer--read-only":""}`},d.reusesAnswer?a.default.createElement(u.default,{isReadOnly:e,pairNumber:o,onRemove:n}):a.default.createElement("div",{className:"matching-answer__text"},a.default.createElement("div",{id:f,className:"sr-only"},t.translate("assessments.canvas.question.matching.headers.answer",{pairNumber:o})),a.default.createElement(r.default,Object.assign({},this.props,{ariaLabelledBy:g,bbml:h,id:c.getAnswerEditorId(this.props.prompt.id),isReadOnly:e,onBlur:this.onBlur,onChange:s,onFocus:this.onFocus,placeholder:t.translate("assessments.canvas.question.matching.placeholders.answer",{pairNumber:o}),toolbarSet:"minimal",ariaRequired:!0}))),m&&this.state.editorFocused&&a.default.createElement("div",{className:"matching-answer-notice",role:"alert"},a.default.createElement(i.Attention,{className:"matching-answer-notice__icon"}),a.default.createElement("span",{className:"matching-answer-notice__text"},t.translate("assessments.canvas.question.matching.editingReusedAnswerNotice"))))}}t.UnwrappedMatchingAnswer=d,t.default=o.localizedComponentWrapper(d)},aPd7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFilesFromBbML=function(e){const t=[],s=document.createElement("div");return s.innerHTML=e,s.querySelectorAll("a[data-bbfile]").forEach(e=>{const s=e.href,n=JSON.parse(e.getAttribute("data-bbfile"));t.push({node:e,href:s,bbfile:n})}),t},t.createFileLink=function(e){const t=JSON.parse(e.bbfile),s=e.href,n=e.bbtype,a=e.bbfile.replace(/&/g,"&amp;").replace(/"/g,"&quot;");return`<a href="${s}" data-bbtype="${n}" data-bbfile="${a}">${t.linkName||a.alternativeText}</a> \n`},t.getPlainTextFromBbML=function(e){const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText).trim()}},aefM:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("z8be"));s("V5y2");const o=n.__importDefault(s("Pfoe"));t.default=e=>{const{answersInfo:t,question:s}=e;return a.default.createElement("div",{className:"readonly-calculated-numeric-question"},a.default.createElement("div",{className:"readonly-answer__main"},a.default.createElement(o.default,{id:s.id,bbml:s.questionText.rawText,isReadOnly:!0,refreshBbml:!0}),a.default.createElement(i.default,Object.assign({},e))),t&&a.default.createElement("div",{className:"readonly-answer__info readonly-calculated-numeric-question__info"},a.default.createElement("div",{className:"readonly-calculated-numeric-question__info-section"},t[0]),a.default.createElement("div",{className:"readonly-calculated-numeric-question__info-section"},t[1]),a.default.createElement("div",{className:"readonly-calculated-numeric-question__info-section"},t[2])))}},afDw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("nsO7")),i=n.__importStar(s("ERkP")),o=s("9OUN"),r=s("uDfI"),l=s("8unJ"),u=s("MC1S"),c=s("JfV0"),d=s("zGdY"),p=s("0x+l"),m=n.__importDefault(s("3ANQ")),h=n.__importDefault(s("cFZT")),f=n.__importDefault(s("EC4L")),g=n.__importDefault(s("6TGb")),E=n.__importDefault(s("scU2")),_=n.__importDefault(s("hQsI")),b=s("WGaE"),y=n.__importDefault(s("6rK7")),C=n.__importDefault(s("GD/5")),w=n.__importDefault(s("YE/5")),v=s("aPd7"),S=s("gk+Q");s("vu2V");const P=s("tN4z"),A="course.content.assessment.AllowStudentSubmission.switch",T=e=>{return`assessmentCopyQuestionsTaskId${a.replace(e,/_/g,".")}`};class I extends i.Component{constructor(e){super(e),this.AddButton=e=>i.default.createElement(m.default,{index:e.index,show:!this.state.questionBeingEditedId,onToggleAddMenu:this.onToggleAddMenu,onDismissAddMenu:this.onDismissAddMenu,isMenuOpen:this.state.openAddMenuIndex===e.index,isBlankCanvas:!this.state.questions.length,buttonAriaLabel:e.buttonAriaLabel,removedFromTabOrder:this.state.isCopyingQuestions,analyticsId:"assessmentCanvas.addQuestionButton"}),this.initCopyQuestionsStatusDisplay=e=>{const{loadCoursePreference:t}=this.props;t({key:T(e.id),courseId:e.courseId}).then(()=>{const e=this.props.copyQuestionTaskPref;if(e){const t="start",s=e.taskId,n=e.questionCount;this.getAndDisplayUpdatedCopyQuestionsTaskStatus(s,t,n),this.setPeriodicCheckOnCopyQuestionsTaskStatus(s,t,n)}})},this.isAnyQuestionDirty=()=>this.state.questionBeingEditedIsDirty,this.areQuestionsRandomized=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&e.deploymentSettings.isRandomizationOfQuestionsRequired},this.isCollectExternalSubmissions=()=>{const{content:e}=this.props;return e&&e.deploymentSettings&&e.deploymentSettings.isCollectExternalSubmissions},this.sortByPosition=e=>a.sortBy(e,"position"),this.hasSettingsEnabledBlockingAddOfNonPOQuestions=()=>this.hasAnonymousGrading()||this.hasRubricAssociations()||this.isCollectExternalSubmissions()||this.hasDelegatedGrading()||this.hasPeerGrading(),this.checkAndDisableAssessmentSettings=e=>{this.hasSettingsEnabledBlockingAddOfNonPOQuestions()?this.displayWarningDialog(()=>this.checkAndDisableAssessmentSettings(e)):e&&e()},this.displayWarningDialog=e=>{this.hasRubricAssociations()?this.showRubricAssociationsDialog(e):this.hasAnonymousGrading()?this.showAnonymousGradingDialog(e):this.isCollectExternalSubmissions()?this.showExternalSubmissionsDialog(e):this.hasDelegatedGrading()?this.showDelegatedGradingDialog(e):this.hasPeerGrading()&&this.showPeerGradingDialog(e)},this.addQuestion=e=>{this.checkAndDisableAssessmentSettings(()=>this.createQuestion(e))},this.addQuestionPool=()=>{this.checkAndDisableAssessmentSettings(this.openQuestionPoolQuestionPicker)},this.reuseQuestions=()=>{this.checkAndDisableAssessmentSettings(this.openReuseQuestionPicker)},this.createQuestion=e=>{const{assessment:t,createQuestion:s}=this.props,n=this.calculateQuestionPositionAfter();s(t.id,n,e)},this.hideWarningDialog=()=>{this.setState({isShowingWarningDialog:!1})},this.showAnonymousGradingDialog=e=>{this.showWarningDialog("anonymousGrading",this.removeAnonymousGrading,e)},this.showPeerGradingDialog=e=>{this.showWarningDialog("peerGrading",this.removePeerGrading,e)},this.showRubricAssociationsDialog=e=>{this.showWarningDialog("rubricAssociations",this.removeRubricAssociations,e)},this.showDelegatedGradingDialog=e=>{this.showWarningDialog("delegatedGrading",this.removeDelegatedGrading,e)},this.removeAnonymousGrading=()=>{const{gradebookColumn:e,persistGradebookColumn:t}=this.props;t(e,{...e,anonymousGrading:!1}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.removeRubricAssociations=()=>{const{gradebookColumn:e,removeRubricAssociations:t}=this.props;t(e.id).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.removeDelegatedGrading=()=>{const{gradebookColumn:e,persistGradebookColumn:t}=this.props;t(e,{...e,delegatedGrading:!1}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.removePeerGrading=()=>{const{content:e,persistContent:t}=this.props;t(e,{...e,contentDetail:{[c.ContentHandler.TestLink.handle]:{test:{deployedAssessmentType:d.DeployedAssessmentType.Test,gradingColumn:{peerGrading:!1,delegatedGrading:!1},peerSettings:{peerReviewDueDate:null,peerReviewsPerStudent:null,allowLatePeerReviews:null,evaluationColumnName:null}}}}}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()}).catch(this.hideWarningDialog)},this.showRandomizeDialog=(e=a.noop)=>{this.showWarningDialog("randomize",this.disableRandomization,e)},this.disableRandomization=()=>{const{content:e,persistContent:t}=this.props,s=e,n={...e,deploymentSettings:{...e.deploymentSettings,isRandomizationOfQuestionsRequired:!1}};this.hideWarningDialog(),t(s,n),this.state.disableAssessmentSettingCallback()},this.showExternalSubmissionsDialog=(e=a.noop)=>{this.showWarningDialog("externalSubmissions",this.disableExternalSubmissions,e)},this.disableExternalSubmissions=()=>{const{content:e,persistContent:t}=this.props;t(e,{...e,deploymentSettings:{...e.deploymentSettings,isCollectExternalSubmissions:!1}}).then(()=>{this.hideWarningDialog(),this.state.disableAssessmentSettingCallback()})},this.addPresentationOnlyQuestion=(e,t=!0)=>{if(t&&this.areQuestionsRandomized()){const t=()=>this.addPresentationOnlyQuestion(e,!1);this.showRandomizeDialog(t)}else switch(e){case d.QuestionSubType.CloudFile:this.addFiles({openCloudStorageIntegrationModal:this.props.editorPluginsConfig.insertCloudStorageIntegrationFile.openCloudStorageIntegrationModal});break;case d.QuestionSubType.File:this.addFiles({multiple:!0});break;default:this.addText()}},this.addText=()=>{const{assessment:e,createQuestion:t}=this.props,s=this.calculateQuestionPositionAfter();t(e.id,s,d.QuestionType.PresentationOnly,{subType:d.QuestionSubType.Text})},this.addFiles=e=>{const{assessment:t,createQuestion:s,localize:n}=this.props,a=e=>{let t="";return e.forEach(e=>{t+=v.createFileLink(e)}),t};S.uploadFiles({localeProps:n.getLocalePropsForClone(),...e}).then(e=>{const n=this.calculateQuestionPositionAfter();s(t.id,n,d.QuestionType.PresentationOnly,{subType:d.QuestionSubType.File,questionText:{rawText:a(e)}})})},this.calculateQuestionPositionAfter=()=>{const e=this.state.addMenuTarget?this.state.addMenuTarget.props.index:0;return 0===e?"start":this.state.questions[e-1].id},this.openPoolQuestionPanel=e=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({activeQuestionPoolId:e,isShowingQuestionPoolPanel:!0})},this.closeQuestionPoolPanel=(e=!1)=>{this.setState({isShowingQuestionPoolPanel:!1,...!e&&{activeQuestionPoolId:null}})},this.openReuseQuestionPicker=()=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({isShowingReuseQuestionPicker:!0}),this.dismissCopyQuestionsStatusBanner()},this.openQuestionPoolQuestionPicker=()=>{this.props.applyAccessibilityHandling&&this.props.applyAccessibilityHandling(),this.setState({isShowingQuestionPoolQuestionPicker:!0}),this.dismissCopyQuestionsStatusBanner()},this.addQuestionsToEmptyPoolFromAssessmentCanvas=e=>{this.setState({activeQuestionPoolId:e},()=>this.openQuestionPoolQuestionPicker())},this.closeQuestionPoolQuestionPicker=(e=null,t)=>{const{revertAccessibilityHandling:s}=this.props,{activeQuestionPoolId:n}=this.state;e?this.setState(()=>({isShowingQuestionPoolQuestionPicker:!1}),()=>{s&&s(),n?this.addQuestionsToPool(e):this.createQuestionPool(e,t)}):this.setState(()=>({isShowingQuestionPoolQuestionPicker:!1}),()=>s&&s())},this.closeReuseQuestionPanel=(e=null,t)=>{const{revertAccessibilityHandling:s}=this.props;e?this.setState(()=>({isShowingReuseQuestionPicker:!1}),()=>{s&&s(),this.copyQuestions(e,t)}):this.setState(()=>({isShowingReuseQuestionPicker:!1}),()=>s&&s())},this.addQuestionsToPool=e=>{const{assessmentId:t,questionIds:s,selectAll:n,searchCriteria:a,excludeIds:i}=e,{addQuestionsToPool:o,courseId:r}=this.props;o(r,t,this.state.activeQuestionPoolId,{questionIds:s,selectAll:n,searchCriteria:a,excludeIds:i})},this.createQuestionPool=(e,t)=>{const{assessmentId:s,positionAfter:n,questionIds:a,selectAll:i,searchCriteria:o,excludeIds:r}=e,{createQuestion:l}=this.props;l(s,n,d.QuestionType.QuestionBlock,{questionIds:a,selectAll:i,searchCriteria:o,excludeIds:r,questionCount:t})},this.copyQuestions=(e,t)=>{I.shouldCallCopyQuestionsQueued(t)?(this.displayCopyQuestionsInProgress(e.positionAfter,t),this.copyQuestionsQueued(e,t)):(this.displayCopyQuestionsInProgress(e.positionAfter,t),this.copyQuestionsDirect(e))},this.copyQuestionsQueued=(e,t)=>{c.copyQuestionsQueued(e).then(s=>{this.updateCopyQuestionsTaskPref(s.taskId,t),this.displayAndUpdateCopyQuestionsStatusInfo(s,e.positionAfter,t)},e=>{this.props.setError(e.error)})},this.persistAllowStudentSubmission=e=>{const{content:t,persistContent:s}=this.props;s(t,{...t,deploymentSettings:{allowStudentSubmission:e,id:t.deploymentSettings.id}})},this.handleAllowStudentSubmissionChange=()=>{const{assessment:e,content:t}=this.props,s=null==e?void 0:e.hasAnswerableQuestions,n=this.hasSubmissions();s&&!n&&this.persistAllowStudentSubmission(!t.deploymentSettings.allowStudentSubmission)},this.checkAllowStudentSubmission=()=>{const{content:e,assessment:t}=this.props,s=null==t?void 0:t.hasAnswerableQuestions;return!1===s&&!1===e.deploymentSettings.allowStudentSubmission?(this.persistAllowStudentSubmission(!0),!0):!s},this.copyQuestionsDirect=e=>{c.copyQuestions(e).then(t=>{this.displayCopyQuestionsComplete(e.positionAfter,t.status),this.loadQuestions()},e=>{this.props.setError(e.error)})},this.loadQuestions=()=>{const{assessment:e,loadQuestions:t}=this.props;this.setState(()=>({isLoadingInProgress:!0})),t({courseId:e.courseId,assessmentId:e.id,refreshState:!0}).then(()=>{this.setState(()=>({isLoadingInProgress:!1}))})},this.updateCopyQuestionsTaskPref=(e,t)=>{const{assessment:s,saveCoursePreference:n}=this.props,a={taskId:e,questionCount:t};n(T(s.id),JSON.stringify(a),s.courseId)},this.deleteCopyQuestionsTaskPref=()=>{const{assessment:e,copyQuestionTaskPref:t,deleteCoursePreference:s}=this.props;if(t){s({key:T(e.id),courseId:e.courseId})}},this.displayAndUpdateCopyQuestionsStatusInfo=(e,t,s)=>{this.displayCopyQuestionsStatusInfo(e,t,s),this.setPeriodicCheckOnCopyQuestionsTaskStatus(e.taskId,t,s)},this.displayCopyQuestionsStatusInfo=(e,t,s)=>{if(I.hasCopyQuestionsTaskFinishedProcessing(e.taskStatus)){const{results:s}=e;this.displayCopyQuestionsComplete(t,s&&s.status,!1,this.dismissCopyQuestionsStatusBanner.bind(this))}else this.displayCopyQuestionsInProgress(t,s)},this.displayCopyQuestionsComplete=(e,t,s,n)=>{if(!this.state.notification||this.state.notification.type===u.NotificationType.Processing){const a=b.copyQuestionsResultNotification({positionAfter:e,copyStatus:t,autoDismiss:s,dismissNotification:n});this.setState(()=>({isCopyingQuestions:!1,notification:a}))}},this.displayCopyQuestionsInProgress=(e,t)=>{if(!this.state.notification||this.state.notification.type!==u.NotificationType.Processing){const s=b.processingStageNotification(e,t);this.setState(()=>({isCopyingQuestions:!0,notification:s}))}},this.setPeriodicCheckOnCopyQuestionsTaskStatus=(e,t,s)=>{this.copyQuestionsStatusInterval=setInterval(()=>{this.getAndDisplayUpdatedCopyQuestionsTaskStatus(e,t,s)},this.getCopyQuestionsStatusCheckIntervalDelay())},this.getCopyQuestionsStatusCheckIntervalDelay=()=>{const{features:e}=this.props;return e&&!e.isProduction?I.COPY_QUESTIONS_STATUS_CHECK_INTERVAL:I.PROD_COPY_QUESTIONS_STATUS_CHECK_INTERVAL},this.getAndDisplayUpdatedCopyQuestionsTaskStatus=(e,t,s)=>{c.getScheduledTask(e).then(e=>{I.hasCopyQuestionsTaskFinishedProcessing(e.taskStatus)&&(this.cancelCheckCopyQuestionsStatusInterval(),this.loadQuestions()),this.displayCopyQuestionsStatusInfo(e,t,s)})},this.cancelCheckCopyQuestionsStatusInterval=()=>{clearInterval(this.copyQuestionsStatusInterval)},this.getAddMenuOptions=()=>{const{localize:e,features:t,localizationPrefix:s}=this.props;return[{key:"newQuestionPool",icon:i.default.createElement(p.Add,null),name:e.translate("assessments.canvas.add.questionPool"),onClick:()=>this.addQuestionPool()},{key:"newCalculatedFormulaQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.calculatedFormula`),onClick:()=>this.addQuestion(d.QuestionType.CalculatedFormula)},{key:"newCalculatedNumericQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.calculatedNumeric`),onClick:()=>this.addQuestion(d.QuestionType.CalculatedNumeric)},{key:"newEssayQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.essay`),onClick:()=>this.addQuestion(d.QuestionType.Essay)},{key:"newFIMBQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.fimb`),onClick:()=>this.addQuestion(d.QuestionType.FIMB)},{key:"newMatchingQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.matching`),onClick:()=>this.addQuestion(d.QuestionType.Matching)},{key:"newMultipleAnswerQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.multipleAnswer`),onClick:()=>this.addQuestion(d.QuestionType.Multiple)},{key:"newTrueFalseQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.trueFalse`),onClick:()=>this.addQuestion(d.QuestionType.Either)},{key:"newReuseQuestion",icon:i.default.createElement(p.Add,null),name:e.translate(`${s}.canvas.add.reuseQuestions`),onClick:()=>this.reuseQuestions()},{key:"newText",icon:i.default.createElement(p.Text,null),name:e.translate(`${s}.canvas.add.text`),onClick:()=>this.addPresentationOnlyQuestion(d.QuestionSubType.Text)},{key:"newFile",icon:i.default.createElement(p.UploadFile,null),name:e.translate(`${s}.canvas.add.localFile`),onClick:()=>this.addPresentationOnlyQuestion(d.QuestionSubType.File)},{enabled:t&&t.cloudStorageIntegration,key:"newCloudFile",icon:i.default.createElement(p.UploadCloud,null),name:e.translate(`${s}.canvas.add.cloudFile`),onClick:()=>this.addPresentationOnlyQuestion(d.QuestionSubType.CloudFile)}].filter(e=>!{}.hasOwnProperty.call(e,"enabled")||!0===e.enabled)},this.hasSubmissions=()=>!0===a.get(this.props,"assessment.hasResponses"),this.hasAssessmentModifyPermissions=()=>!0===a.get(this.props,"assessment.permissions.modify"),this.hasRubricAssociations=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.rubricAssociations&&!!e.rubricAssociations.length},this.hasAnonymousGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.anonymousGrading},this.hasPeerGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.peerGrading&&!!e.delegatedGrading},this.hasDelegatedGrading=()=>{const e=this.props.gradebookColumn;return!!e&&!!e.delegatedGrading&&!e.peerGrading},this.onToggleAddMenu=(e,t)=>{this.setState({addMenuTarget:e,openAddMenuIndex:t})},this.onDismissAddMenu=()=>{const{addMenuTarget:e,isShowingReuseQuestionPicker:t,openAddMenuIndex:s}=this.state;-1!==s&&(this.setState({openAddMenuIndex:-1}),e&&!t&&e.focus())},this.onReorder=(e,t)=>{const s=a.findIndex(e,e=>e.id===t.id),n={...t,positionAfter:0===s?"start":e[s-1].id};this.persistQuestion(t,n,this.props.assessment.id)},this.onQuestionEdit=e=>{this.setState(()=>({questionBeingEditedId:e}))},this.onQuestionMadeDirty=e=>{e!==this.state.questionBeingEditedIsDirty&&(this.props.setIsAnyQuestionDirty(e),this.setState(()=>({questionBeingEditedIsDirty:e})))},this.deleteQuestion=e=>{const{deleteQuestion:t}=this.props;t(e)},this.persistQuestion=(e,t,s)=>{var n;const{persistQuestion:a}=this.props;return t.questionType===d.QuestionType.Essay&&(null===(n=document.getElementsByClassName("assessment-wrapper")[0])||void 0===n||n.dispatchEvent(new Event("new-essay-question-persisted"))),Promise.resolve(a(e,t,{assessmentId:s,expand:"alignedGoals,usageCount"}))},this.state={activeQuestionPoolId:null,addMenuTarget:null,disableAssessmentSettingCallback:null,hasCopyQuestionsStatusInitialized:!1,isCopyingQuestions:!1,isLoadingInProgress:!0,isShowingQuestionPoolPanel:!1,isShowingWarningDialog:!1,openAddMenuIndex:-1,questions:[],questionBeingEditedId:null,questionBeingEditedIsDirty:!1,isShowingQuestionPoolQuestionPicker:!1,isShowingReuseQuestionPicker:!1,notification:null,warningDialogSubText:null,warningDialogTitle:null,warningDialogOnOK:null}}UNSAFE_componentWillReceiveProps(e){const{assessment:t,isLoadingInProgress:s,questions:n}=e,{hasCopyQuestionsStatusInitialized:a,isLoadingInProgress:i}=this.state;this.setState(()=>({questions:this.sortByPosition(n)})),i&&this.setState(()=>({isLoadingInProgress:s||!t||t.questionCount>0&&0===n.length})),!a&&!!t&&this.setState(()=>({hasCopyQuestionsStatusInitialized:!0}),()=>this.initCopyQuestionsStatusDisplay(t))}componentWillUnmount(){this.cancelCheckCopyQuestionsStatusInterval()}shouldInsertWarningDialog(){return this.areQuestionsRandomized()||this.hasAnonymousGrading()||this.hasRubricAssociations()||this.isCollectExternalSubmissions()||this.hasDelegatedGrading()||this.hasPeerGrading()}showWarningDialog(e,t,s){const{localizationPrefix:n}=this.props;this.setState(()=>({isShowingWarningDialog:!0,warningDialogSubText:`${n}.canvas.warningDialogs.${e}.subText`,warningDialogTitle:`${n}.canvas.warningDialogs.${e}.title`,warningDialogOnOK:t,disableAssessmentSettingCallback:s}))}dismissCopyQuestionsStatusBanner(){this.setState(()=>({notification:null})),this.deleteCopyQuestionsTaskPref(),this.cancelCheckCopyQuestionsStatusInterval()}renderReuseQuestionPicker(){const{assessment:e,courseId:t,features:s,localizationPrefix:n}=this.props;if(!(!!e&&this.state.isShowingReuseQuestionPicker))return null;const a={assessmentId:e.id,assessmentTitle:e.title,questionPositionAfter:this.calculateQuestionPositionAfter(),showRandomizeDialog:this.areQuestionsRandomized()&&this.showRandomizeDialog};return i.default.createElement(y.default,{courseId:t,destination:a,closePanel:this.closeReuseQuestionPanel,features:s,localizationPrefix:n})}renderQuestionPoolQuestionPicker(){const{assessment:e,courseId:t,features:s,localizationPrefix:n}=this.props;if(!(!!e&&this.state.isShowingQuestionPoolQuestionPicker))return null;const a={assessmentId:e.id,assessmentTitle:e.title,questionPositionAfter:this.calculateQuestionPositionAfter()};return i.default.createElement(C.default,{courseId:t,destination:a,closePanel:this.closeQuestionPoolQuestionPicker,features:s,localizationPrefix:n})}renderPoolQuestionPanel(){const{activeQuestionPoolId:e,isShowingQuestionPoolPanel:t}=this.state;return!!this.props.assessment&&!!e&&t?i.default.createElement(_.default,{questionPoolId:e,assessmentId:this.props.assessment.id,assessmentTitle:this.props.assessment.title,closePanel:this.closeQuestionPoolPanel,courseId:this.props.courseId,hasSubmissions:this.hasSubmissions(),hasAssessmentModifyPermissions:this.hasAssessmentModifyPermissions(),openQuestionPicker:this.openQuestionPoolQuestionPicker,persistQuestion:this.persistQuestion,localizationPrefix:this.props.localizationPrefix}):null}render(){const{assessment:e,content:t,courseId:s,localize:n,gradebookColumn:a,localizationPrefix:o}=this.props,r=this.hasSubmissions(),l=this.hasAssessmentModifyPermissions(),c=this.getAddMenuOptions(),d=!this.state.isLoadingInProgress&&0===this.state.questions.length,p=null==t?void 0:t.deploymentSettings.allowStudentSubmission,m=null==e?void 0:e.hasAnswerableQuestions,_=m?"AdditionalContentTitle":"SubmissionTitle";let b,y;return a&&a.gradebookCategory&&(y=a.gradebookCategory.title,b=a.gradebookCategory.isUserDefined?"custom":y),i.default.createElement("div",{className:"assessment-canvas-react"},d&&!this.isCollectExternalSubmissions()&&i.default.createElement("div",{className:"assessment-canvas-react assessment-canvas-react--blank"},i.default.createElement(h.default,{image:g.default,passedClass:"assessment-canvas-react--blank__image"}),i.default.createElement("h3",{className:"assessment-canvas-react--blank__title"},n.translate(`${o}.canvas.emptyState.header.${b}`,{categoryTitle:y})),i.default.createElement("div",null,n.translate(`${o}.canvas.emptyState.saving`)),i.default.createElement("div",null,n.translate(`${o}.canvas.emptyState.closeToSave.${b}`,{categoryTitle:y}))),this.state.isLoadingInProgress&&i.default.createElement(u.Spinner,{size:u.SpinnerSize.large}),-1!==this.state.openAddMenuIndex&&i.default.createElement(u.ContextualMenu,{items:c,gapSpace:10,onDismiss:this.onDismissAddMenu,target:this.state.addMenuTarget.inlineAddButton,shouldFocusOnMount:!0,directionalHint:5,id:"assessment-canvas-add-content-menu",menuAriaLabel:n.translate(`${o}.canvas.add.menu`),analyticsId:"assessment.canvas.add.menu"}),!this.state.isLoadingInProgress&&i.default.createElement("div",{className:"assessment-canvas-react__question-list"},0===this.state.questions.length||null==t?null:i.default.createElement("div",null,i.default.createElement("h2",{className:"assessment-canvas-react__heading"},n.translate(`${o}.canvas.content.${b}`,{categoryTitle:y})),i.default.createElement(E.default,{content:t,localize:n,localizationPrefix:this.props.localizationPrefix})),i.default.createElement(f.default,{courseId:s,items:this.state.questions,boundingElementId:"gradebook-item-panel-content",onReorderItem:this.onReorder,scrollContainerId:"basic-container",checkAndDisableAssessmentSettings:this.checkAndDisableAssessmentSettings,persistQuestion:this.persistQuestion,deleteQuestion:this.deleteQuestion,AddButton:this.AddButton,onQuestionEdit:this.onQuestionEdit,onQuestionMadeDirty:this.onQuestionMadeDirty,questionBeingEditedId:this.state.questionBeingEditedId,isAnyQuestionDirty:this.isAnyQuestionDirty(),hasSubmissions:r,localize:n,isLoadingInProgress:this.state.isLoadingInProgress,hasAssessmentModifyPermissions:l,openGoals:this.props.routes.openGoals,pluginsConfig:this.props.editorPluginsConfig,notification:this.state.notification,babelfishInstance:this.props.babelfishInstance,currentLocale:this.props.currentLocale,disableInteraction:this.state.isCopyingQuestions,openPoolQuestionPanel:this.openPoolQuestionPanel,addQuestionsToEmptyPool:this.addQuestionsToEmptyPoolFromAssessmentCanvas,localizationPrefix:this.props.localizationPrefix})),this.state.isCopyingQuestions&&i.default.createElement("div",{className:"assessment-canvas-react__questions-overlay"}),!this.state.isLoadingInProgress&&!this.isCollectExternalSubmissions()&&i.default.createElement("div",{className:"assessment-canvas-react__student-submission"},i.default.createElement("div",{className:"assessment-canvas-react__student-submission-switch"},i.default.createElement("div",{className:"assessment-canvas-react__student-submission-switch__container"},i.default.createElement(P.AnalyticsTooltip,{classes:{tooltip:"add-additional-content-tooltip"},title:n.translate(`${o}.canvas.studentSubmission.SwitchTooltip`),analyticsId:"course.content.assessment.AllowStudentSubmission.switchTooltip",placement:"top-start",disableFocusListener:m,disableHoverListener:m},i.default.createElement(P.AnalyticsFormControlLabel,{classes:{root:"switch-root"},htmlFor:"student-submission-display-selector",onClick:()=>this.handleAllowStudentSubmissionChange(),checked:p,disabled:this.checkAllowStudentSubmission()||r,"aria-label":n.translate(`${o}.canvas.studentSubmission.switchLabel`),control:i.default.createElement(P.AnalyticsSwitch,{id:"student-submission-display-switch",className:"assessment-canvas-react_student-submission-switch",analyticsId:"assessment.canvas.studentSubmission.switch"}),"data-analytics-id":A,analyticsId:"SHOW_STUDENT_SUBMISSION_SWITCH_ANALYTICS_ID",label:void 0})),i.default.createElement("span",{className:"assessment-canvas-react__student-submission-switch__label"},n.translate(`${o}.canvas.studentSubmission.switchLabel`))),m&&!p&&!r&&i.default.createElement("div",{className:"assessment-canvas-react__student-submission-switch__note"},n.translate(`${o}.canvas.studentSubmission.switchNote`))),p&&i.default.createElement("div",{className:"assessment-canvas-react__student-submission-section"},!d&&i.default.createElement("div",{className:"assessment-canvas-react__student-submission__additional-content"},n.translate(`${o}.canvas.studentSubmission.${_}`)),i.default.createElement("div",{className:"assessment-canvas-react__student-submission__student-submission-info"},n.translate(`${o}.canvas.studentSubmission.AdditionalContentSubtext`)))),this.shouldInsertWarningDialog()&&i.default.createElement(w.default,{show:this.state.isShowingWarningDialog,onCancel:this.hideWarningDialog,onDismiss:this.hideWarningDialog,onOk:this.state.warningDialogOnOK,subText:n.translate(this.state.warningDialogSubText),title:n.translate(this.state.warningDialogTitle),key:this.state.warningDialogTitle,analyticsId:"assessmentCanvas.insertWarning"}),this.renderReuseQuestionPicker(),this.renderQuestionPoolQuestionPicker(),this.renderPoolQuestionPanel())}}I.SYNC_QUESTION_COPY_LIMIT=50,I.PROD_COPY_QUESTIONS_STATUS_CHECK_INTERVAL=3e4,I.COPY_QUESTIONS_STATUS_CHECK_INTERVAL=8e3,I.hasCopyQuestionsTaskFinishedProcessing=e=>"COMPLETE"===e||"COMPLETE_ERRORS"===e||"INCOMPLETE"===e,I.shouldCallCopyQuestionsQueued=e=>e>I.SYNC_QUESTION_COPY_LIMIT,t.parseCopyQuestionTaskObjFromPref=e=>{const t=e&&e.value&&JSON.parse(e.value);return a.isEmpty(t)?null:t};const D=r.connect((e,s)=>{const n=a.get(s,"assessment.courseId"),i=a.get(s,"assessment.id"),o=T(i),r=c.select.coursePreference.getCoursePreferenceByKeyAndCourseId(e,o,n);return{copyQuestionTaskPref:t.parseCopyQuestionTaskObjFromPref(r)}},e=>o.bindActionCreators({addQuestionsToPool:c.actions.question.updateQuestionsInQuestionBlock,deleteCoursePreference:c.actions.coursePreference.deleteCoursePreference,loadCoursePreference:c.actions.coursePreference.loadCoursePreference,saveCoursePreference:(e,t,s)=>{const n={key:e,value:t,visibleToStudents:!1};return c.actions.coursePreference.persistCoursePreference(n,s)},setError:c.actions.app.setError},e))(I);t.UnwrappedAssessmentCanvas=I,t.default=l.localizedComponentWrapper(D)},axjr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("kBJj"),o=n.__importDefault(s("Pfoe")),r=s("p1hm"),l=s("3ZJq");s("10dR");const u=s("8unJ");t.default=u.localizedComponentWrapper(e=>{const{question:t,answersInfo:s,answersInfoLabel:n,localize:u,questionTextClassName:c}=e,d={},p=e=>{const t=d[e];if(t)return t;const s=e.split("-")[1],n=u.translate("assessments.canvas.question.fimb.blank",{count:s});return d[e]=n,n};return a.default.createElement("div",{className:"readonly-fimb-question"},a.default.createElement("div",{className:c},a.default.createElement(o.default,{id:t.id,plugins:[i.customClass()],bbml:(e=>{let t=e.questionText.rawText;return e.answers.forEach(e=>{const{ident:s}=e,n=d[s];if(n)t=t.replace(s,n);else{const e=p(s);t=t.replace(s,e),d[s]=e}}),t})(t),isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-fimb-question"},a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("span",{className:"readonly-fimb-question__instructions readonly-answer__instructions readonly-answer__main"}),s&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},n)),t.answers.map((e,t)=>{const n=e.answerValues[0],i=r.EvaluationTypeEnum[n.evaluationType].locKey,o=u.translate(`${i}.${n.caseSensitive?"readOnlyCaseSensitive":"readOnly"}`);return a.default.createElement("div",{key:e.ident,className:"readonly-fimb-question-answer"},a.default.createElement("div",{className:"readonly-answer__container"},a.default.createElement("div",{className:"readonly-answer__main readonly-fimb-question-answer-input"},a.default.createElement("div",{className:"readonly-fimb-question-answer-input__label"},p(e.ident)),a.default.createElement("div",{className:"readonly-fimb-question-answer-input__input-wrapper"},a.default.createElement("div",{className:"readonly-fimb-question-answer-input__answer"},e.answerValues.map(e=>e.value).join(";")))),s&&a.default.createElement("div",{className:"readonly-answer__info"},s[t])),a.default.createElement("div",{className:"readonly-fimb-question-answer__description"},o))}),a.default.createElement(l.AutomatedQuestionFeedbackRead,{question:t})))})},b0Dq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("kBJj"),a=s("aPd7");t.getFileViewerPropsArray=function(e){var t;return a.parseFilesFromBbML(null===(t=e.questionText)||void 0===t?void 0:t.rawText).map(e=>{const{bbfile:t,href:s}=e;return{file:{resourceUrl:s,fileName:n.getFileNameWithTypeExtension(t.linkName,t.mimeType),render:t.render,alternativeText:t.alternativeText||t.linkName,displayInline:"inline"===t.render,displayName:t.linkName,mimeType:t.mimeType,isDecorative:t.isDecorative||!1,viewerUrl:t.viewerUrl},readOnly:!0,showContextMenu:!1}})}},bNEL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=n.__importDefault(s("7Eh6")),o=n.__importDefault(s("M+qG")),r=s("leLK"),l=s("H9Ny"),u=s("GIU+");t.default=({accessCode:e,onAccessCodeChanged:t})=>{const[s,n]=a.useState(e),[c,d]=a.useState(!1),{containerClass:p}=l.useStyles(),m=a.useCallback(()=>{const e=r.generateAccessCode();n(e),t(e),d(!0),setTimeout(()=>d(!1),1500)},[t]),h=a.useCallback(()=>{e&&u.writeText(e)},[e]);return s||m(),a.createElement("div",{className:p},a.createElement(i.default,{code:null!=s?s:"",isNew:c}),a.createElement(o.default,{onCodeCopy:h,onCodeRefresh:m}))}},cFZT:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP"));s("5NQ0");t.default=({image:e,passedClass:t,presentationOnly:s})=>{const a=["svg-image"];return t&&a.push(t),n.default.createElement("div",{className:a.join(" "),dangerouslySetInnerHTML:{__html:e},"aria-hidden":s})}},cTTT:function(e,t,s){"use strict";s.r(t)},d6RO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP"));s("0JkB");t.default=e=>{const{text:t}=e;return n.default.createElement("div",{className:"divider-text-container"},n.default.createElement("span",null,t))}},dn4g:function(e,t,s){"use strict";s.r(t)},eecw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("JfV0"),o=s("HYHd"),r=s("uDfI"),l=n.__importDefault(s("3Md0")),u=n.__importDefault(s("nsO7"));t.mapStateToProps=(e,t)=>{const s=i.select.assessment.getAssessmentsByCourseId(e,t.courseId),n=i.select.questionType.getQuestionTypesByCourseId(e,t.courseId);return{sources:u.default.filter(s,e=>e.id!==t.destination.assessmentId),questionTypes:o.getSupportedQuestionPoolQuestionTypes(n)}};const c=r.connect(t.mapStateToProps)(e=>{return a.default.createElement(l.default,Object.assign({},e,{noResultsKeys:{title:"questionPools.emptyState.dueToFilter.header",message:"questionPools.emptyState.dueToFilter.message"},noSourcesKeys:{title:"questionPools.emptyState.dueToSource.header",message:"questionPools.emptyState.dueToSource.message"},headerKeys:{title:"questionPools.questionPickerHeader"},footerKeys:{primaryButton:"questionPools.footer.primaryButtonText",selectedCount:"questionPools.footer.selectedCount"},pageHelpKey:"questionPools.pageHelpUrl",cancelModalKeys:{title:"questionPools.cancelDialog.title",message:"questionPools.cancelDialog.subText"},searchQuestions:t=>{const s={...t,...!t.questionTypes&&{questionTypes:o.QUESTION_POOL_SUPPORTED_QUESTION_TYPES_AS_STRINGS},...!t.assessmentIds&&{excludeAssessmentIds:[e.destination.assessmentId]}};return i.searchQuestions(s)}}))});t.default=c},eoCN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("JfV0"),o=s("Vng8"),r=n.__importDefault(s("XeRt")),l=n.__importDefault(s("ZfLe"));class u extends a.Component{constructor(e){super(e),this.validate=(e,t)=>{const s=t.answers.some(e=>""===e.answerText.rawText),n=t.answers.some(e=>e.correctAnswer);return!s&&n&&o.hasMultipleAnswerQuestionChanged(e,t)},this.onQuestionChange=e=>{const t=e.allowPartialCredit?{...e,answers:this.calculateAnswersPartialCreditPercentage(e.answers,e.allowNegativeScoreForIncorrectAnswers)}:{...e};this.props.onQuestionChange(t,this.validate)},this.onAnswerChange=e=>{const{question:t,hasSubmissions:s}=this.props,n=t.answers.map(t=>t.id===e.id?e:t),a=1===this.countCorrectAnswers(n),i={...t,answers:n,singleCorrectAnswer:a};s&&a&&Object.assign(i,{allowNegativeOverallScore:!1,allowNegativeScoreForIncorrectAnswers:!1,allowPartialCredit:!1}),this.onQuestionChange(i)},this.onAnswerAddition=()=>{const{question:e}=this.props,t=i.Questions.createMultipleAnswerAnswer(!1),s={...e,answers:[...e.answers,t]};this.onQuestionChange(s)},this.onAnswerDeletion=e=>{const{question:t}=this.props,s={...t,answers:t.answers.filter(t=>t.id!==e)};this.onQuestionChange(s)},this.onScoringOptionsChange=e=>{const{question:t}=this.props,s={...t,...e};this.onQuestionChange(s)},this.calculateAnswersPartialCreditPercentage=(e,t)=>{const s=e.filter(e=>e.correctAnswer).length,n=parseFloat((-100/e.length).toFixed(8)),a=parseFloat((100/s).toFixed(8)),i=parseFloat((100-a*s).toFixed(8));let o=0;return e.map(e=>{let r;if(e.correctAnswer)return r=(o+=1)===s?a+i:a,{...e,partialCredit:r.toFixed(8)};if(t)return r=n,{...e,partialCredit:r.toFixed(8)};if(!t){const t={...e};return t.partialCredit&&delete t.partialCredit,{...t}}return e})},this.canDeleteAnswer=e=>{const{correctAnswerCount:t}=this.state,{question:s}=this.props;return!(s.answers.length===i.MULTIPLE_ANSWER_MINIMUM_REQUIRED_AMOUNT_OF_ANSWERS||1===t&&e.correctAnswer)},this.onReorder=e=>{const{onQuestionChange:t,question:s}=this.props;t({...s,answers:e},o.hasMultipleAnswerQuestionChanged)},this.state={correctAnswerCount:this.countCorrectAnswers(e.question.answers)}}UNSAFE_componentWillReceiveProps(e){this.setState(()=>({correctAnswerCount:this.countCorrectAnswers(e.question.answers)}))}countCorrectAnswers(e){return e.filter(e=>e.correctAnswer).length}render(){return a.default.createElement(r.default,Object.assign({},this.props,{onReorder:this.onReorder,onQuestionChange:this.onQuestionChange,onAnswerChange:this.onAnswerChange,onAnswerAddition:this.onAnswerAddition,onAnswerDeletion:this.onAnswerDeletion,onScoringOptionsChange:this.onScoringOptionsChange,showScoringOptions:this.state.correctAnswerCount>1,canDeleteAnswer:this.canDeleteAnswer}))}}t.MultipleAnswerContainer=u,t.default=l.default(u)},f6u1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP"));t.default=e=>n.default.createElement("p",null,"readonly essay presentation-only content: ",e.question.id)},fCe2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("nsO7")),a=n.memoize(e=>{const t=n.transform(e.blocks,(e=[],t)=>(n.each(t.groups,t=>{const s=n.filter(t.items,e=>e.selected);e.push(s)}),e));return n.flatten(t)},e=>JSON.stringify(e));t.default=a},fSUK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=s("M0dR"),r=s("j92x"),l=s("JfV0"),u=s("a6r6"),c=s("/R3Y"),d=n.__importDefault(s("Pfoe")),p=s("2yjE"),m=n.__importDefault(s("W2w9"));s("umMl");const h=s("t6ux"),f=s("wMBS"),g=n.__importDefault(s("nsO7"));function E(e){return null==e.answerFormulaErrorKey}function _(e){return null==e.questionTextErrorKey}function b(e){return _(e)&&E(e)}t.EMPTY_QUESTION_TEXT="questionTextEmpty",t.INVALID_VARIABLE_ERROR_KEY="questionTextInvalidVariableNameError",t.RESERVED_VARIABLE_ERROR_KEY="questionTextReservedVariableNameError",t.UNCLOSED_BRACKET_ERROR_KEY="questionTextUnclosedBracketError",t.VARIABLES_UNEDITABLE_ERROR_KEY="questionTextVariablesUneditableError",t.CLASS_PREFIX="calculated-formula-question__step-1";class y extends a.default.Component{constructor(e){var s;super(e),this.originalAnswerFormula="",this.getFullLocalizationKey=e=>`assessments.canvas.question.calculatedFormula.stepOne.${e}`,this.getQuestionTextErrorKey=()=>{var e,s;const n=null===(e=this.props.question.questionText)||void 0===e?void 0:e.rawText;if(!n)return this.getFullLocalizationKey(t.EMPTY_QUESTION_TEXT);if(h.questionTextHasUnclosedBrackets(n))return this.getFullLocalizationKey(t.UNCLOSED_BRACKET_ERROR_KEY);const a=h.extractVariableCandidatesFromQuestionText(n);if(a.some(e=>h.isVariableAWirisEditorReservedWord(e)))return this.getFullLocalizationKey(t.RESERVED_VARIABLE_ERROR_KEY);if(a.some(e=>h.variableNameContainsNonLetterCharacters(e)))return this.getFullLocalizationKey(t.INVALID_VARIABLE_ERROR_KEY);const i=h.extractVariableCandidatesFromQuestionText(null!==(s=this.originalQuestionText)&&void 0!==s?s:"");return this.props.hasSubmissions&&!g.default.isEqual(i,a)?this.getFullLocalizationKey(t.VARIABLES_UNEDITABLE_ERROR_KEY):null},this.handleNextStepClick=()=>{const e=this.getQuestionTextErrorKey();_({questionTextErrorKey:e})?this.doesAnswerFormulaHaveVariablesWithoutDefinitions()?this.setUnrecognizedVariablesInAnswerFormulaState():this.isAnswerFormulaValidPromise().then(e=>{e?(this.setAnswerFormulaValidState(),this.setVariableSetCountIfNoVariables(),this.handleGoToNextStep()):this.setAnswerFormulaInvalidState()}):this.setState({questionTextErrorKey:e})},this.doesAnswerFormulaHaveVariablesWithoutDefinitions=()=>{const{question:e}=this.props;return h.getUnrecognizedVariablesInAnswerFormula(e.answerFormula,e.variableDefinitions).length>0},this.setUnrecognizedVariablesInAnswerFormulaState=()=>{const{question:e}=this.props,t=h.getUnrecognizedVariablesInAnswerFormula(e.answerFormula,e.variableDefinitions);this.setState({answerFormulaErrorKey:this.getFullLocalizationKey("unrecognizedVariablesInFormula"),answerFormulaErrorKeyParams:{variablesCount:t.length,variables:t}})},this.setVariableSetCountIfNoVariables=()=>{h.doesQuestionHaveVariables(this.props.question)||this.props.onQuestionChange({variableSetCount:l.CALCULATED_FORMULA_ANSWER_SET_COUNT_WITH_NO_VARIABLES})},this.setAnswerFormulaValidState=()=>{this.setState({answerFormulaErrorKey:null,answerFormulaErrorKeyParams:null})},this.setAnswerFormulaInvalidState=()=>{this.setState({answerFormulaErrorKey:this.getFullLocalizationKey("invalidFormula"),answerFormulaErrorKeyParams:{}})},this.isAnswerFormulaValidPromise=()=>{const{courseId:e,question:t}=this.props,s=h.doesQuestionHaveVariables(t)?h.generateVariableValues(t.variableDefinitions):{};return l.evaluateMathML(e,t.answerFormula,s).then(()=>!0,()=>!1)},this.handleGoToNextStep=()=>{this.generateNewMathMLImage(),this.props.onGoToNextStep()},this.generateNewMathMLImage=()=>{const{courseId:e,onQuestionChange:t,question:s}=this.props;null!=s.mathMLImageURL&&s.answerFormula===this.originalAnswerFormula||(this.originalAnswerFormula=s.answerFormula,l.getMathMLToImageURL(s.answerFormula,{courseId:e,expand:"mathMLImageAltText"}).then(e=>{t({mathMLImageURL:e.mathMLImageURL,mathMLImageAltText:e.mathMLImageAltText})}))},this.handleQuestionTextChange=e=>{this.props.onQuestionChange({questionText:{rawText:e.toBbML()}})},this.handleQuestionTextBlur=()=>{const e=this.getQuestionTextErrorKey();this.setState({questionTextErrorKey:e}),_({questionTextErrorKey:e})&&this.updateVariableDefinitionsFromQuestionText()},this.updateVariableDefinitionsFromQuestionText=()=>{var e,t;const{onQuestionChange:s,question:n}=this.props;s({variableDefinitions:h.extractVariableCandidatesFromQuestionText(null!==(t=null===(e=n.questionText)||void 0===e?void 0:e.rawText)&&void 0!==t?t:"").map(e=>{const t=n.variableDefinitions.findIndex(t=>t.name===e);return t>-1?{...n.variableDefinitions[t]}:h.getVariableDefinitionFromCandidate(e)})})},this.handleMathEditorLoad=e=>{this.wirisEditorInstance=e,u.WirisEditorInstanceUtils.attachContentChangeListener(e,this.handleMathEditorChange),u.WirisEditorInstanceUtils.enableReservedWords(e),this.updateReservedWordsInMathEditor()},this.handleMathEditorChange=e=>{!this.hasMathEditorSetInitialValue&&this.originalAnswerFormula||this.props.onQuestionChange({answerFormula:e}),e===this.originalAnswerFormula&&(this.hasMathEditorSetInitialValue=!0)},this.updateReservedWordsInMathEditor=()=>{if(!this.wirisEditorInstance)return;const{question:e}=this.props;u.WirisEditorInstanceUtils.setReservedWords(this.wirisEditorInstance,h.getVariablesFromVariableDefinitions(e.variableDefinitions))},this.handleMathEditorError=e=>{console.error(e)},this.toggleDisplayFormulaToStudent=e=>{this.props.onQuestionChange({displayFormulaToStudent:e.target.checked})},this.originalAnswerFormula=e.question.answerFormula,this.originalQuestionText=null===(s=e.question.questionText)||void 0===s?void 0:s.rawText,this.hasMathEditorSetInitialValue=!1,this.state={answerFormulaDirty:!1,answerFormulaErrorKey:null,answerFormulaErrorKeyParams:null,questionTextDirty:!1,questionTextErrorKey:null}}componentDidMount(){this.props.onValidate(b(this.state))}componentDidUpdate(e,t){var s,n;const{question:a}=e,{question:i}=this.props;if(this.wirisEditorInstance&&h.haveVariablesChanged(a.variableDefinitions,i.variableDefinitions)&&(this.updateReservedWordsInMathEditor(),this.setState({questionTextDirty:!0})),(null===(s=a.questionText)||void 0===s?void 0:s.rawText)!==(null===(n=i.questionText)||void 0===n?void 0:n.rawText)){_({questionTextErrorKey:this.getQuestionTextErrorKey()})||this.setState({questionTextDirty:!0})}a.answerFormula!==i.answerFormula&&this.setState({answerFormulaDirty:i.answerFormula!==this.originalAnswerFormula}),t.answerFormulaDirty===this.state.answerFormulaDirty&&t.questionTextDirty===this.state.questionTextDirty||this.props.onAnswerSetsRelatedFieldDirty(this.state.answerFormulaDirty||this.state.questionTextDirty),b(t)!==b(this.state)&&this.props.onValidate(b(this.state))}render(){var e;const{activeEditorId:s,currentLocale:n,disableFocus:i,editorPlugins:g,localize:b,pluginsConfig:y,question:C,questionTitle:w,refreshBbml:v,setActiveEditorId:S}=this.props,{answerFormulaErrorKey:P,answerFormulaErrorKeyParams:A,questionTextErrorKey:T}=this.state,I=b.translate("assessments.canvas.question.placeholder.question",{questionTitle:w||""}),D=`${p.QUESTION_TITLE_ID_PREFIX}${C.id}`,R=`math-editor${C.id}`;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}`},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__question-text-heading`},a.default.createElement(o.AnalyticsTypography,Object.assign({component:"label",variant:"h4",required:!0},{htmlFor:`bb-editor${C.id}`}),b.translate("assessments.canvas.question.calculatedFormula.stepOne.questionTextTitle")),a.default.createElement(o.AnalyticsTypography,{component:"div",variant:"body1",className:`${t.CLASS_PREFIX}__question-field-instructions`},b.translate("assessments.canvas.question.calculatedFormula.stepOne.questionTextInstructions"))),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__question-text-container`},a.default.createElement(d.default,{activeEditorId:s,ariaLabelledBy:D,ariaRequired:!0,bbml:null===(e=C.questionText)||void 0===e?void 0:e.rawText,disableFocus:i,id:C.id,isReadOnly:!1,keepToolbarVisible:!1,onChange:this.handleQuestionTextChange,placeholder:I,plugins:g,pluginsConfig:y,refreshBbml:v,setActiveEditorId:S,onBlur:this.handleQuestionTextBlur,errorMessage:T?b.translate(T):void 0})),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__question-formula-heading`},a.default.createElement(o.AnalyticsTypography,Object.assign({component:"label",variant:"h4",required:!0},{htmlFor:R}),b.translate("assessments.canvas.question.calculatedFormula.stepOne.questionFormulaTitle")),a.default.createElement(o.AnalyticsTypography,{component:"div",variant:"body1",className:`${t.CLASS_PREFIX}__question-field-instructions`},b.translate("assessments.canvas.question.calculatedFormula.stepOne.questionFormulaInstructions"))),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__formula-editor-container`,id:R},a.default.createElement(u.MathEditor,{apiBasePath:l.getAbsoluteApiBaseURL(),className:c.removeExtraWhitespace(`\n                            ${t.CLASS_PREFIX}__formula-editor\n                            ${E(this.state)?"":`${t.CLASS_PREFIX}__formula-editor--error`}\n                        `),initialMathML:C.answerFormula,locale:n,isRtl:b.isRtl(),onLoad:this.handleMathEditorLoad,onError:this.handleMathEditorError}),!E(this.state)&&a.default.createElement("span",{className:`${t.CLASS_PREFIX}__formula-error`},P?b.translate(P,null!=A?A:{},{noWrap:!0}):null)),a.default.createElement(r.Checkbox,{analyticsId:`${h.ANALYTICS_ID_PREFIX}.displayFormulaToStudents`,checked:C.displayFormulaToStudent,onChange:this.toggleDisplayFormulaToStudent,label:b.translate("assessments.canvas.question.calculatedFormula.stepOne.displayFormulaLabel")}),a.default.createElement(m.default,{analyticsId:`${h.ANALYTICS_ID_PREFIX}.stepOne`,showBack:!1,showNext:!0,isNextDisabled:!_(this.state),onNextClick:this.handleNextStepClick}),a.default.createElement(f.OffScreenAnnouncement,{type:"polite",message:b.translate("assessments.canvas.question.calculatedFormula.stepOne.stepNumber"),changeTrigger:1}))}}t.BaseCalculatedFormulaQuestionEditStepOne=y,t.default=i.localizedComponentWrapper(y)},fTte:function(e,t,s){"use strict";s.r(t)},gKi8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s("2cC3");const n=s("ggb3"),a=s("h9IM");class i{constructor(e){if(i.isWirisLoaded&&i.apiBasePathUsedForLoading!==e)throw Error(`WIRIS editor source already loaded from ${i.apiBasePathUsedForLoading}. Cannot load from ${e}`);this.apiBasePath=e}async newInstance(e){if(i.isWirisLoaded)return Promise.resolve(i.getNewInstance(e));const t=await this.getConfiguration(),s=(await i.getConfigurationjs(t.data.contextPath)).data.editorUrl;return this.loadWirisJS(s,e)}convertToAbsoluteUrl(e){return`${this.apiBasePath}${e}`}getConfiguration(){const e=this.convertToAbsoluteUrl("/v1/editor/v4/configurations");return n.default.get(e)}static getConfigurationjs(e){return n.default.get(`${e}app/configurationjs`)}static getNewInstance(e){const t=e?{...e}:{language:"en"};return t.fontFamily||(t.fontFamily="stix"),null!=t.mml&&t.mml.trim()||delete t.mml,t.language||(t.language="en"),com.wiris.jsEditor.JsEditor.newInstance(t)}loadWirisJS(e,t){return new Promise((s,n)=>a(e,()=>{try{i.apiBasePathUsedForLoading=this.apiBasePath,i.isWirisLoaded=!0,s(i.getNewInstance(t))}catch(e){i.isWirisLoaded=!1,n(e)}}))}}t.WirisService=i,i.apiBasePathUsedForLoading="",i.isWirisLoaded=!1},gTAB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE"}(t.EditModeEnum||(t.EditModeEnum={}))},gYi3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({mathEditor:{"& .wrs_editor":{[e.breakpoints.down("sm")]:{whiteSpace:"normal","& .wrs_multipleRowPanel":{minHeight:"66px",height:"auto"},"& .wrs_toolbar .wrs_header":{width:"calc(100% - 18px)","& button":{marginLeft:0,marginRight:"4px"}}}}}}))},gZ3u:function(e,t,s){"use strict";s.r(t)},"gk+Q":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("kBJj"),a=s("JfV0");function i(e,t){return{bbtype:"attachment",href:e,bbfile:JSON.stringify(t)}}t.convertSettingsToBbfile=function(e){return{alternativeText:e.alternativeText,isDecorative:e.isDecorative,linkName:e.displayName,mimeType:e.mimeType,displayInline:e.displayInline,render:e.render}},t.prepareFileMetadata=i,t.uploadFiles=function(e){const t=[{apiBasePath:a.config.apiBasePath,xsrfToken:a.config.xsrf,...e}];return e.openCloudStorageIntegrationModal&&t.push(e.openCloudStorageIntegrationModal,"cloudStorageIntegration"),n.uploadWorkflow(...t).then(e=>{return e.map(({href:e,bbfile:t})=>i(e,t))})}},gvex:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("+oLC"),r=s("M0dR"),l=s("t6Ia"),u=s("WBPx"),c=s("Begd"),d=s("XBaz"),p=s("zGdY"),m=s("JfV0"),h=s("E1pj"),f=s("t6ux"),g=s("9tRF"),E=n.__importDefault(s("W2w9")),_=n.__importDefault(s("Pfoe")),b=n.__importDefault(s("7fK4"));s("jiD7");const y=s("wMBS"),C=n.__importDefault(s("nsO7"));t.CLASS_PREFIX="calculated-formula-question__step-3";const w="assessments.canvas.question.calculatedFormula.stepThree";function v({question:e}){return g.isVariableSetsValid(e)}class S extends a.Component{constructor(e){super(e),this.closeTablePanel=()=>{this.setState({isTablePanelOpen:!1})},this.renderRecalculateButton=()=>{const{hasSubmissions:e,localize:s,isRecalculatingVariableSets:n}=this.props,i={};return n?a.default.createElement(u.AnalyticsOutlineButton,{className:`${t.CLASS_PREFIX}__calculate-button`,disabled:!0,style:i,analyticsId:`${f.ANALYTICS_ID_PREFIX}.stepThree.calculateButton.outlineButton`},a.default.createElement(c.Spinner,{size:c.SpinnerSize.small}),a.default.createElement("span",{className:`${t.CLASS_PREFIX}__calculate-button-label ${t.CLASS_PREFIX}__calculate-button-label--loading`},s.translate(`${w}.calculateButtonLoadingState`))):a.default.createElement(u.AnalyticsOutlineButton,{className:`${t.CLASS_PREFIX}__calculate-button`,disabled:e,onClick:this.calculateMultipleRows,style:i,analyticsId:`${f.ANALYTICS_ID_PREFIX}.stepThree.calculateButton.outlineButton`},a.default.createElement(d.Refresh,null),a.default.createElement("span",{className:`${t.CLASS_PREFIX}__calculate-button-label`},s.translate(`${w}.calculateButton`)))},this.calculateMultipleRows=()=>{const{calculateMultipleRows:e,question:t}=this.props;e(t.variableSets),this.props.resetDirtyRowMap()},this.renderTable=()=>{const{hasSubmissions:e,localize:s,question:n,isRecalculatingVariableSets:i,repopulateTable:o}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__table-wrapper`},a.default.createElement("div",{className:`${t.CLASS_PREFIX}__table-buttons`},a.default.createElement(l.DefaultButton,{analyticsId:`${f.ANALYTICS_ID_PREFIX}.stepThree.repopulateAnswers.defaultButton`,className:`${t.CLASS_PREFIX}__repopulate-button`,disabled:i||e,onClick:o},s.translate(`${w}.repopulateButton`)),this.renderRecalculateButton()),a.default.createElement(b.default,{correctAnswerTolerance:n.correctAnswerTolerance,calculateRow:this.calculateRow,dirtyRowMap:this.props.dirtyRowMap,disabled:e,isExponential:n.correctAnswerFormat===p.CalculatedFormulaAnswerFormatType.Exponential,isRecalculatingVariableSets:i,roundToSignificantFigures:n.correctAnswerPrecision===p.CalculatedFormulaAnswerPrecisionType.SignificantFigures,scale:n.answerScale,unitsText:n.units&&n.units.unitsRequired?n.units.unitValue:void 0,updateVariableValue:this.updateVariableValue,variableSets:n.variableSets}))},this.renderOpenTablePanelButton=()=>{const{localize:e}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__preview-answer-sets-button-container`},a.default.createElement(l.DefaultButton,{analyticsId:`${f.ANALYTICS_ID_PREFIX}.stepThree.mobile.previewAnswerSets.defaultButton`,onClick:()=>{this.setState({isTablePanelOpen:!0})}},e.translate(`${w}.previewAnswerSets`)))},this.renderNoVariableAnswer=()=>{const{localize:e,question:s}=this.props,{correctAnswerTolerance:n,units:i,variableSets:o}=s,l=f.getCorrectAnswerToleranceType(n),u=f.getCorrectAnswerToleranceValue(n),c=`${w}.answer`;let d=f.getAnswerTranslationKey(c,l,u,i.unitValue);d=null==d?`${c}.plain`:d;const p=e.translate(d,{answer:o[0].answer,unitValue:i.unitValue,answerToleranceValue:u});return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.AnalyticsTypography,{component:"h4",variant:"h4"},e.translate(`${w}.variableValueTable.answer`)),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer`},p))},this.renderAnswerData=()=>{var e;const{UltraWindowSize:t}=this.props,s=null!==(e=null==t?void 0:t.isSmallBreakpoint())&&void 0!==e&&e;return f.doesQuestionHaveVariables(this.props.question)?s?this.renderOpenTablePanelButton():this.renderTable():this.renderNoVariableAnswer()},this.renderTablePanel=()=>{var e;const{localize:s,UltraWindowSize:n}=this.props,{isTablePanelOpen:i}=this.state;if(!f.doesQuestionHaveVariables(this.props.question))return null;const r=null!==(e=null==n?void 0:n.isSmallBreakpoint())&&void 0!==e&&e;return a.default.createElement(o.BbPanel,{analyticsId:`${f.ANALYTICS_ID_PREFIX}.mobile.previewAnswerSetsPanel.bbPanel`,className:`${t.CLASS_PREFIX}__answerSetsPanel`,excludeContentPadding:!0,isOpen:i&&r,onDismiss:this.closeTablePanel,type:o.BbPanelType.peek},a.default.createElement(o.BbPanelHeader,{analyticsId:`${f.ANALYTICS_ID_PREFIX}.mobile.previewAnswerSetPanel.header`,title:s.translate(`${w}.previewAnswerSetsPanel.title`)}),this.renderTable(),a.default.createElement(o.BbPanelFooter,{analyticsId:`${f.ANALYTICS_ID_PREFIX}.mobile.previewAnswerSetPanel.bbPanelFooter`,primaryButtonProps:{text:s.translate(`${w}.previewAnswerSetsPanel.saveAndClose`),onClick:this.closeTablePanel}}))},this.calculateRow=e=>{var t;const{courseId:s,question:n}=this.props,a=C.default.find(n.variableSets,t=>t.ident===e);m.evaluateMathML(s,n.answerFormula,null!==(t=null==a?void 0:a.variableValues)&&void 0!==t?t:{}).then(t=>{this.updateCalculatedRow(e,t.result)},()=>{this.updateCalculatedRow(e,null)})},this.updateCalculatedRow=(e,t)=>{const{onQuestionChange:s,question:n}=this.props,a=n.variableSets.map(s=>s.ident===e?{...s,answer:f.roundWithPrecision(t,n.answerScale,n.correctAnswerFormat,n.correctAnswerPrecision)}:s);this.props.updateDirtyRowMapValue(e,!1),s({variableSets:a})},this.updateVariableValue=(e,t,s)=>{const{question:n,onQuestionChange:a}=this.props,i=n.variableSets.map(n=>n.ident===e&&t?{...n,variableValues:{...n.variableValues,[t]:s}}:n);this.props.updateDirtyRowMapValue(e,!0),a({variableSets:i})},this.state={isTablePanelOpen:!1}}componentDidUpdate(e){v(e)!==v(this.props)&&this.props.onValidate(v(this.props))}render(){var e;const{localize:s,question:n}=this.props;return a.default.createElement("div",{className:t.CLASS_PREFIX},this.renderTablePanel(),a.default.createElement("div",{className:`${t.CLASS_PREFIX}__preview-question`},a.default.createElement(r.AnalyticsTypography,{component:"h4",variant:"h4"},s.translate(`${w}.previewQuestion.questionTextTitle`)),a.default.createElement(_.default,{bbml:null===(e=n.questionText)||void 0===e?void 0:e.rawText,id:`${n.id}-preview`,isReadOnly:!0}),a.default.createElement(r.AnalyticsTypography,{component:"h4",variant:"h4"},s.translate(`${w}.previewQuestion.answerFormulaTitle`)),a.default.createElement("img",{className:`${t.CLASS_PREFIX}__formula-image`,src:n.mathMLImageURL,alt:n.mathMLImageAltText})),this.renderAnswerData(),a.default.createElement(E.default,{analyticsId:`${f.ANALYTICS_ID_PREFIX}.stepThree`,showBack:!0,onBackClick:this.props.onGoBackStep,showNext:!1}),a.default.createElement(y.OffScreenAnnouncement,{type:"polite",message:s.translate(`${w}.stepNumber`),changeTrigger:1}))}}t.BaseCalculatedFormulaQuestionEditStepThree=S;const P=h.windowResizingResponsiveComponentWrapper(S);t.default=i.localizedComponentWrapper(P)},h2mW:function(e,t,s){"use strict";s.r(t)},hQsI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Lk6F");t.default=n.default,t.QuestionPoolPanel=n.QuestionPoolPanel},hp7Q:function(e,t,s){"use strict";s.r(t)},in1o:function(e,t,s){"use strict";s.r(t)},j9WP:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("zGdY"),o=n.__importDefault(s("5Hnx")),r=n.__importDefault(s("WEDm")),l=n.__importDefault(s("5aOz")),u=n.__importDefault(s("FwPp")),c=n.__importDefault(s("E8Oa")),d=n.__importDefault(s("eoCN")),p=n.__importDefault(s("wNNv")),m=s("1Qsi"),h=n.__importDefault(s("7UBu")),f=s("P5AP");t.AssessmentCanvasQuestion=e=>{const{question:t,...s}=e;switch(e.question.questionType){case i.QuestionType.Either:return a.default.createElement(h.default,Object.assign({},s,{question:t}));case i.QuestionType.Essay:return a.default.createElement(l.default,Object.assign({},s,{question:t}));case i.QuestionType.FIMB:return a.default.createElement(u.default,Object.assign({},s,{question:t}));case i.QuestionType.PresentationOnly:return a.default.createElement(p.default,Object.assign({},s,{question:t}));case i.QuestionType.Matching:return a.default.createElement(c.default,Object.assign({},s,{question:t}));case i.QuestionType.Multiple:return a.default.createElement(d.default,Object.assign({},e));case i.QuestionType.QuestionBlock:return a.default.createElement(m.QuestionBlockQuestion,Object.assign({},e));case i.QuestionType.CalculatedNumeric:return a.default.createElement(r.default,Object.assign({},e));case i.QuestionType.CalculatedFormula:return a.default.createElement(o.default,Object.assign({},e));default:return null}},t.AssessmentQuestion=({allyService:e,contentId:s,...n})=>a.default.createElement(f.AllyProvider,{allyService:e,contentId:s},a.default.createElement(t.AssessmentCanvasQuestion,Object.assign({},n)))},jJem:function(e,t,s){"use strict";s.r(t)},jLgm:function(e,t,s){"use strict";s.r(t)},"jPx/":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("JfV0");t.reusableAnswers=function(e){return e.prompts.filter(e=>!e.reusesAnswer).filter(t=>e.answers[t.matchingAnswerIndex]&&""!==e.answers[t.matchingAnswerIndex].answerText.rawText).map(t=>e.answers[t.matchingAnswerIndex])},t.answerIdToPromptIndexMap=function(e){const t={};return e.prompts.forEach((s,n)=>{if(!s.reusesAnswer&&null!=s.matchingAnswerIndex){const a=e.answers[s.matchingAnswerIndex];a&&(t[a.ui.id]=n)}}),t},t.removeAnswerFromQuestion=function(e,t){const s=e.prompts.map(e=>e.matchingAnswerIndex>t?{...e,matchingAnswerIndex:e.matchingAnswerIndex-1}:e);return{...e,prompts:s,answers:[...e.answers.slice(0,t),...e.answers.slice(t+1)]}},t.removePairFromQuestion=function(e,t){const s=e.prompts,a=e.answers,i=s.findIndex(e=>e.id===t),o=s[i],r=o.matchingAnswerIndex;let l=[...a],u=s.filter(e=>e.id!==t);return o.reusesAnswer||(l=[...l.slice(0,r),...l.slice(r+1)],u=u.map(e=>e.reusesAnswer&&e.matchingAnswerIndex===r?(l.push(n.Questions.createMatchingAnswer(!1)),{...e,reusesAnswer:!1,matchingAnswerIndex:l.length-1}):e.matchingAnswerIndex>r?{...e,matchingAnswerIndex:e.matchingAnswerIndex-1}:e)),{...e,prompts:u,answers:l}},t.isPairReused=function(e,t){const s=e.prompts.find(e=>e.id===t);return(null==s||!s.reusesAnswer)&&e.prompts.findIndex(e=>!0===e.reusesAnswer&&e.matchingAnswerIndex===(null==s?void 0:s.matchingAnswerIndex))>-1},t.getAnswerEditorId=function(e){return`answer-${e}`}},jZ9E:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("zGdY"),o=n.__importDefault(s("1XAg")),r=n.__importDefault(s("aefM")),l=n.__importDefault(s("SIAs")),u=n.__importDefault(s("axjr")),c=n.__importDefault(s("UunF")),d=n.__importDefault(s("NPG5")),p=n.__importDefault(s("z01z")),m=n.__importDefault(s("f6u1")),h=n.__importDefault(s("mWAU"));s("RW+D"),t.ReadonlyQuestion=e=>{return a.default.createElement("div",{className:"readonly-question-component-react"},a.default.createElement(h.default,Object.assign({},e.questionHeaderProps)),(()=>{const{question:t,...s}=e,n={...s,questionTextClassName:"readonly-question-component-react__question-text"};switch(e.question.questionType){case i.QuestionType.CalculatedFormula:return a.default.createElement(o.default,Object.assign({},n,{question:t}));case i.QuestionType.CalculatedNumeric:return a.default.createElement(r.default,Object.assign({},n,{question:t}));case i.QuestionType.Either:return a.default.createElement(p.default,Object.assign({},n,{question:t}));case i.QuestionType.Essay:return a.default.createElement(l.default,Object.assign({},n,{question:t}));case i.QuestionType.FIMB:return a.default.createElement(u.default,Object.assign({},n,{question:t}));case i.QuestionType.PresentationOnly:return a.default.createElement(m.default,Object.assign({},n,{question:t}));case i.QuestionType.Matching:return a.default.createElement(c.default,Object.assign({},n,{question:t}));case i.QuestionType.Multiple:return a.default.createElement(d.default,Object.assign({},n,{question:t}));default:return null}})())}},jiD7:function(e,t,s){"use strict";s.r(t)},juaI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("+49V")),o=n.__importDefault(s("HAQq")),r=s("gTAB");s("Udwz"),t.QuestionPoolQuestionHeader=e=>r.EditModeEnum.ACTIVE===e.editMode?a.default.createElement(i.default,Object.assign({},e)):a.default.createElement(o.default,Object.assign({},e)),t.default=t.QuestionPoolQuestionHeader},kPPX:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),i=s("8unJ"),o=s("caKH"),r=({hidden:e,localize:t,onCancel:s,onContinue:i,titleKey:r,textKey:l,cancelKey:u,continueKey:c,analyticsId:d})=>n.default.createElement(o.UltraModalDialog,{hidden:e,onDismiss:s,dialogContentProps:{type:a.DialogType.normal,title:t.translate(r),subText:t.translate(l),showCloseButton:!0},modalProps:{isBlocking:!1},analyticsId:`${d}.simpleDialog`},n.default.createElement(a.DialogFooter,null,n.default.createElement(a.DefaultButton,{onClick:s,text:t.translate(u),analyticsId:`${d}.simpleDialog.defaultButton.cancel.button`}),n.default.createElement(a.PrimaryButton,{onClick:i,text:t.translate(c),analyticsId:`${d}.simpleDialog.defaultButton.continue.button`})));t.UnwrappedSimpleDialog=r,t.default=i.localizedComponentWrapper(r)},kiPe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("ALQB"),i=s("8unJ"),o=s("Xs/S");t.LocalizedAssessmentProgressBar=i.localizedComponentWrapper(({descriptionId:e,totalQuestionCount:t,unansweredQuestionCount:s,localize:i})=>{const{progressBarClass:r}=o.useStyles(),l=i.translate("assessmentProgress.progressBar.ariaLabel"),u=0===t?0:(t-s)/t*100;return n.createElement(a.AnalyticsLinearProgress,{"aria-hidden":!0,ariaLabel:l,"aria-describedby":e,variant:"determinate",value:u,classes:{root:r}})})},"lSZ+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("O94r")),o=s("8unJ"),r=s("RxZr"),l=s("ufrm"),u=s("Rb2q"),c=s("Vng8"),d=s("Qpu5"),p=s("3ZJq"),m=s("PBaB"),h=s("tN4z"),f=s("ECG1");t.CalculatedNumericQuestionEditBase=e=>{const t=d.useStyles(),{localize:s,question:n}=e,[o,g]=a.default.useState(m.isToleranceSet(e.question)),E=()=>a.default.createElement(a.default.Fragment,null,a.default.createElement("span",{className:t.helperText},s.translate("assessments.canvas.question.calculatedNumeric.inputHelperText.allowedValues")),a.default.createElement("span",{className:t.helperText},s.translate("assessments.canvas.question.calculatedNumeric.inputHelperText.maxDigits"))),_=t=>{const s={...e.question,...t};e.onQuestionChange(s,c.hasCalculatedNumericQuestionChanged)},b=e=>t=>{_({[e]:t})};return a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:i.default(t.root,"js-calculated-numeric-question-edit")},a.default.createElement("div",{className:i.default(t.textFieldContainer,"js-calculated-numeric-question-edit-answer-text-field")},a.default.createElement(r.LocalizedNumberInput,{className:t.textField,id:"calculated-numeric-answer-input",label:(()=>a.default.createElement(a.default.Fragment,null,s.translate("assessments.canvas.question.calculatedNumeric.answer.label"),a.default.createElement(h.AnalyticsTooltip,{className:t.answerLabelTooltip,analyticsId:"assessments.canvas.question.calculatedNumeric.answerLabel.tooltip",title:s.translate("assessments.canvas.question.calculatedNumeric.answer.tooltip.content"),placement:"top"},a.default.createElement(h.AnalyticsIconButton,{analyticsId:"assessments.canvas.question.calculatedNumeric.answerLabel.tooltip.icon","aria-label":s.translate("assessments.canvas.question.calculatedNumeric.answer.tooltip.ariaLabel")},a.default.createElement(f.Information,null)))))(),analyticsId:"assessments.canvas.question.calculatedNumeric.answer.input",value:n.answerValue,onChange:b("answerValue"),helperText:E(),numberFormatOptions:{maximumFractionDigits:r.MAX_DIGITS},maintainInputValueOnBlur:!0,required:!0,displayWesternNumbers:!0})),a.default.createElement("hr",null),a.default.createElement(u.AnalyticsFormControlLabel,{label:s.translate("assessments.canvas.question.calculatedNumeric.tolerance.checkbox.label"),className:i.default(t.checkboxLabel,"js-calculated-numeric-tolerance-checkbox-label"),htmlFor:"calculated-numeric-tolerance-checkbox",analyticsId:"assessments.canvas.question.calculatedNumeric.tolerance.checkbox.label",control:a.default.createElement(l.AnalyticsCheckbox,{id:"calculated-numeric-tolerance-checkbox",analyticsId:"assessments.canvas.question.calculatedNumeric.tolerance.checkbox",onChange:e=>{g(e.target.checked),e.target.checked||_({toleranceValue:0})},checked:o})}),a.default.createElement(h.AnalyticsTypography,{component:"div",variant:"body1",className:t.checkboxLabelDescription},s.translate("assessments.canvas.question.calculatedNumeric.tolerance.checkbox.description")),o?a.default.createElement("div",{className:i.default(t.textFieldContainer,t.toleranceTextFieldContainer,"js-calculated-numeric-tolerance-section")},a.default.createElement(r.LocalizedNumberInput,{className:i.default(t.textField,t.toleranceTextField),id:"calculated-numeric-tolerance-input",label:s.translate("assessments.canvas.question.calculatedNumeric.tolerance.label"),analyticsId:"assessments.canvas.question.calculatedNumeric.tolerance.input",value:n.toleranceValue,onChange:b("toleranceValue"),helperText:E(),numberFormatOptions:{maximumFractionDigits:r.MAX_DIGITS},maintainInputValueOnBlur:!0,required:o,displayWesternNumbers:!0,min:0})):null),a.default.createElement(p.AutomatedQuestionFeedbackEdit,Object.assign({},e,{onQuestionChange:_})))},t.CalculatedNumericQuestionEdit=o.localizedComponentWrapper(t.CalculatedNumericQuestionEditBase),t.default=t.CalculatedNumericQuestionEdit},la2Y:function(e,t,s){"use strict";s.r(t)},lcFE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=s("Begd"),i=s("Zwiy"),o=s("myse"),r=s("pNgc"),l=n.__importDefault(s("ERkP")),u=n.__importStar(s("nsO7")),c=s("JfV0"),d=s("zGdY"),p=s("Y+9S"),m=s("9OUN"),h=s("uDfI"),f=s("8unJ"),g=n.__importDefault(s("nUPs")),E=n.__importDefault(s("/oLw")),_=n.__importDefault(s("Oyt1")),b=n.__importDefault(s("IUzX")),y=n.__importDefault(s("VE9O")),C=s("Y+9S");s("7Pdu");const w=s("X3OV");class v extends l.default.Component{constructor(e){if(super(e),this.buildCriteriaConfig=()=>{const e={blocks:[],onSetKeywords:this.onSetKeywords,selectedKeywords:this.state.selectedFilterCriteria.keywords,isKeywordExpanded:!0};e.blocks.push(this.buildSourcesBlock()),e.blocks.push(this.buildQuestionTypesBlock());const t=this.buildTagsBlock();return t&&e.blocks.push(t),e},this.buildSourcesBlock=()=>{const e={name:this.props.localize.translate("questionPicker.filterPanel.sources.header"),id:"sources",expanded:!0,groups:[]},t=this.getSourcesWithQuestions(),s=(()=>{const e=u.orderBy(t,"type","asc"),s=u.groupBy(e,"type");return u.transform(s,(e,t,s)=>{e[s.toLowerCase()]=u.orderBy(t,"id")})})();return u.keys(s).forEach(t=>{const n={id:t,name:this.props.localize.translate(`questionPicker.filterPanel.sources.type.${t}`),items:[],onSelect:this.onSelectSource};s[t].forEach(e=>{if(e.type.toLowerCase()===t){const t={id:e.id,name:e.title,selected:u.includes(this.state.selectedFilterCriteria.sourceIds,e.id)};n.items.push(t)}}),e.groups.push(n),e.groups.sort(e=>"test"===e.id?-1:1)}),e},this.buildTagsBlock=()=>{const{tags:e}=this.props;if(!u.isEmpty(e)){const t={name:this.props.localize.translate("questionPicker.filterPanel.tags.header"),id:"tags",expanded:!1,groups:[]},s=e=>{let s=u.find(t.groups,{id:e});return s||(s={id:e,name:this.props.localize.translate(`questionPicker.filterPanel.tags.type.${e}`),items:[],onSelect:this.onSelectTag},t.groups.push(s)),s};return e.forEach(e=>{const t={id:e.id,name:e.title,selected:u.includes(this.state.selectedFilterCriteria.tagIds,e.id)};s(e.type).items.push(t)}),t.groups.forEach(e=>{e.items=u.sortBy(e.items,["name"])}),t.groups=u.sortBy(t.groups,["name"]),t}return null},this.buildQuestionTypesBlock=()=>{const e={id:"types",name:"",items:[],onSelect:this.onSelectQuestionType},{questionTypes:t}=this.props;return t.forEach(t=>{const{key:s}=t,n="presentation"===s?"other":s,a={id:s,name:this.props.localize.translate(`questionPicker.typeLabels.${n}`),selected:u.includes(this.state.selectedFilterCriteria.questionTypes,s)};e.items.push(a)}),e.items=u.sortBy(e.items,["name"]),{name:this.props.localize.translate("questionPicker.filterPanel.questionTypes.header"),id:"types",expanded:!1,groups:[e]}},this.hasPresentationQuestionsSelected=()=>{return u.keys(this.state.selectedQuestions).some(e=>{const t=this.state.questions.find(t=>t.id===e);return t&&t.questionType===d.QuestionType.PresentationOnly})},this.hasNonPresentationQuestionsSelected=()=>{return u.keys(this.state.selectedQuestions).some(e=>{const t=this.state.questions.find(t=>t.id===e);return t&&t.questionType!==d.QuestionType.PresentationOnly})},this.reuseQuestions=()=>{var e;const{assessmentId:t,questionPositionAfter:s,showRandomizeDialog:n}=this.props.destination,{selectedQuestions:a,deselectedQuestions:i,isSelectAllQuestions:o}=this.state;let r={courseId:this.props.courseId,assessmentId:t,positionAfter:s,selectAll:o};if(o){const e=u.keys(i),t=e.length;r={...r,searchCriteria:this.generateSearchCriteriaParam(),...t&&{excludeIds:e}}}else r={...r,questionIds:u.keys(a)};p.notifyMobileApp(p.MessageType.QuestionPickerPanelClosed);let l=!1;const m=c.mapById(this.state.questions);Object.keys(m).forEach(e=>{var t;(a[e]||o&&void 0===i[e])&&(null===(t=m[e])||void 0===t?void 0:t.questionType)===d.QuestionType.Essay&&(l=!0)}),l&&(null===(e=document.getElementsByClassName("assessment-wrapper")[0])||void 0===e||e.dispatchEvent(new Event("new-essay-question-added-to-pool")));const h=()=>this.props.closePanel(r,this.getSelectedQuestionCount());n&&this.hasPresentationQuestionsSelected()?n(h):h()},this.cancel=()=>this.areQuestionsSelected()?(this.showCancelConfirmationDialog(),!1):(p.notifyMobileApp(p.MessageType.QuestionPickerPanelClosed),this.props.closePanel(),!0),this.proceedClosePanel=()=>{p.notifyMobileApp(p.MessageType.QuestionPickerPanelClosed),this.props.closePanel()},this.areQuestionsSelected=()=>u.size(this.state.selectedQuestions)>0,this.showCancelConfirmationDialog=()=>{this.setState(()=>({isShowingCancelConfirmationDialog:!0}))},this.hideCancelConfirmationDialog=()=>{this.setState(()=>({isShowingCancelConfirmationDialog:!1}))},this.onSelectSource=(e,t)=>{this.onSelectFilterOption("sourceIds",e,t)},this.onSelectTag=(e,t)=>{this.onSelectFilterOption("tagIds",e,t)},this.onSelectQuestionType=(e,t)=>{this.onSelectFilterOption("questionTypes",e,t)},this.onSelectFilterOption=(e,t,s)=>{this.state.isSelectAllQuestions&&this.onClearAllQuestionSelection(),this.setState(n=>{const{selectedFilterCriteria:a}=n;return s?{selectedFilterCriteria:{...a,[e]:[...a[e],t]}}:{selectedFilterCriteria:{...a,[e]:[...a[e].filter(e=>e!==t)]}}},this.initSearchRequest)},this.onSelectQuestion=(e,t)=>{this.setState(s=>{const n=s.deselectedQuestions,a=s.selectedQuestions;return s.isSelectAllQuestions?(t?n[e]=!0:delete n[e],{deselectedQuestions:n}):(t?delete a[e]:a[e]=!0,{selectedQuestions:a})})},this.onSelectAllQuestions=()=>{this.setState(()=>({isSelectAllQuestions:!0})),this.clearSelectedDeselectedQuestions()},this.onClearAllQuestionSelection=()=>{this.setState(()=>({isSelectAllQuestions:!1})),this.clearSelectedDeselectedQuestions()},this.clearSelectedDeselectedQuestions=()=>{this.setState(()=>({selectedQuestions:Object.create(null),deselectedQuestions:Object.create(null)}))},this.onSetKeywords=e=>{this.setState(t=>({selectedFilterCriteria:{...t.selectedFilterCriteria,keywords:e}}),this.initSearchRequest)},this.onClearCriteria=()=>{const e=u.mapValues(this.state.selectedFilterCriteria,()=>[]);this.setState(()=>({selectedFilterCriteria:e}),this.initSearchRequest)},this.loadFilterOptions=()=>{this.loadAssessments(),this.loadQuestionTags(),this.loadQuestionTypes()},this.loadAssessments=()=>{const e=`${d.AssessmentType.Pool},${d.AssessmentType.Test}`;this.continuouslyLoadFilterOptions(this.props.loadAssessments,{types:e},"assessments","isLoadingAssessments")},this.loadQuestionTags=()=>{this.continuouslyLoadFilterOptions(this.props.loadQuestionTags,void 0,"tags","isLoadingTags")},this.loadQuestionTypes=()=>{const{courseId:e,loadQuestionTypes:t}=this.props;t({courseId:e}).then(()=>{this.setState(e=>({isLoadingFilterOptions:{...e.isLoadingFilterOptions,isLoadingQuestionTypes:!1}}))})},this.continuouslyLoadFilterOptions=(e,t,s,n,a)=>{const{courseId:i}=this.props;return e({...t,courseId:i,offset:a,limit:v.FILTER_OPTION_LOAD_LIMIT}).then(a=>{const{paging:i}=a;this.setState(e=>{const t=e.filterLoadNum[s];return{filterLoadNum:{...e.filterLoadNum,[s]:t+1}}},()=>{const a=this.state.filterLoadNum[s];if(i.nextPage&&a<v.FILTER_OPTIONS_LOAD_MAX){const a=i.offset+i.limit;this.continuouslyLoadFilterOptions(e,t,s,n,a)}else this.setState(e=>({isLoadingFilterOptions:{...e.isLoadingFilterOptions,[n]:!1}}))})})},this.generateKeywordLuceneQuery=e=>`"${e.join('" OR "')}"`,this.generateLoadQuestionsParams=({setOffset:e=!1}={})=>{const{paging:t}=this.state,{courseId:s}=this.props,n={...this.generateSearchCriteriaParam(),courseId:s};return e&&(n.offset=t.offset+t.limit),n},this.generateSearchCriteriaParam=()=>{const{selectedFilterCriteria:{keywords:e,sourceIds:t,tagIds:s,questionTypes:n}}=this.state;return{...t.length&&{assessmentIds:t},...s.length&&{categoryIds:s},...n.length&&{questionTypes:n},...e.length&&{q:this.generateKeywordLuceneQuery(e)}}},this.initSearchRequest=()=>{this.setState(()=>({isLoadingQuestions:!0}),this.loadQuestionsDebounced)},this.loadQuestionsDebounced=u.debounce(()=>{const e=this.generateLoadQuestionsParams();this.setState(()=>({searchParams:e}),()=>{this.props.searchQuestions(e).then(t=>{e===this.state.searchParams&&this.setState(()=>({questions:t.questions,paging:t.paging,isLoadingQuestions:!1}))})})},v.WAIT_TIME_IN_MS,{leading:!0,trailing:!0}),this.loadMoreQuestions=(e=!1)=>{if(this.state.isLoadingMoreQuestions||!this.hasMoreQuestions())return;this.setState(()=>({isLoadingMoreQuestions:!0,questionToFocus:null}));const t=this.generateLoadQuestionsParams({setOffset:!0});this.props.searchQuestions(t).then(t=>{this.setState(s=>({questions:[...s.questions,...t.questions],questionToFocus:e?t.questions[0].id:null,paging:t.paging,isLoadingMoreQuestions:!1}))})},this.hasMoreQuestions=()=>this.state.paging&&!u.isEmpty(this.state.paging.nextPage),this.onViewMoreClick=()=>{this.loadMoreQuestions(!0)},this.onScroll=e=>{if(this.state.isLoadingQuestions||this.state.isLoadingMoreQuestions||!this.hasMoreQuestions())return;const t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&this.loadMoreQuestions()},this.onKeyUp=e=>{const t=e.target;if(9===e.keyCode&&t&&"button"===t.type&&t.classList.contains("selectable-question__question-toggle")){const e=t.parentElement.id,s=e.substr(e.indexOf("_"),e.length);this.state.questions.length-1===u.findIndex(this.state.questions,e=>e.id===s)&&this.loadMoreQuestions()}},this.renderViewMoreButton=()=>{const{paging:e,questions:t}=this.state,{localize:s,analyticsEventAugmentor:n}=this.props,a=n(o.AnalyticsEventTypes.CLICK_EVENT,()=>{},"questionPicker.moreQuestions.ariaLabel");if(!this.hasMoreQuestions())return l.default.createElement("button",{className:"offscreen-button",disabled:!0,"aria-disabled":!0,"aria-label":s.translate("questionPicker.moreQuestions.disabled")});const i=e.count-t.length,r=i>e.limit?e.limit:i;return l.default.createElement("button",{className:"offscreen-button",onClick:a,"data-analytics-id":"questionPicker.moreQuestions.ariaLabel","aria-label":s.translate("questionPicker.moreQuestions.ariaLabel",{count:r}),disabled:this.state.isLoadingMoreQuestions,"aria-disabled":this.state.isLoadingMoreQuestions})},this.getSourcesWithQuestions=()=>u.filter(this.props.sources,e=>e.questionCount>0),this.areAllFilterOptionsLoaded=()=>{const{isLoadingFilterOptions:e}=this.state;return u.every(u.values(e),e=>!e)},this.getSelectedQuestionCount=()=>{const{deselectedQuestions:e,isSelectAllQuestions:t,paging:s,selectedQuestions:n}=this.state;return t?s.count-u.size(e):u.size(n)},this.state={questions:[],paging:null,filterLoadNum:{assessments:0,tags:0},isLoadingQuestions:!0,isLoadingMoreQuestions:!1,isLoadingFilterOptions:{isLoadingAssessments:!0,isLoadingTags:!0,isLoadingQuestionTypes:!0},isShowingCancelConfirmationDialog:!1,selectedFilterCriteria:{keywords:[],sourceIds:[],tagIds:[],questionTypes:[]},isSelectAllQuestions:!1,deselectedQuestions:Object.create(null),selectedQuestions:Object.create(null),questionToFocus:null,searchParams:null},p.isInMobileApp()){const t={type:p.MessageType.QuestionPickerPanelOpened,status:p.MessageStatus.Success,pageTitle:e.localize.translate(e.headerKeys.title)};p.sendMessageToMobile(t),C.dismissPanel(this.cancel)}}componentWillUnmount(){C.dismissPanel(void 0)}UNSAFE_componentWillMount(){const{courseId:e}=this.props;e&&(this.loadFilterOptions(),this.initSearchRequest())}render(){const{isLoadingQuestions:e,isLoadingMoreQuestions:t,isSelectAllQuestions:s,questions:n,questionToFocus:o,paging:u,deselectedQuestions:c,selectedQuestions:d}=this.state,{courseId:p,localize:m,closePanel:h,noResultsKeys:f,noSourcesKeys:C,headerKeys:w,footerKeys:v,pageHelpKey:S,localizationPrefix:P,cancelModalKeys:A,commonContext:T}=this.props,I=this.getSourcesWithQuestions(),D=I.length>0,R=this.buildCriteriaConfig(),F=m.translate("questionPicker.footer.cancel"),Q=this.areAllFilterOptionsLoaded(),N=Q&&!(e||t),x=this.getSelectedQuestionCount(),k={image:y.default,title:m.translate(f.title),message:m.translate(f.message)},q=m.translate(w.title),L=m.translate(v.primaryButton),M=m.translate(v.selectedCount,{count:x}),O=C.title,B=C.message,V={url:m.translate(S)};return l.default.createElement(i.BbPanel,{isOpen:!0,type:i.BbPanelType.full,onDismiss:this.cancel,excludeContentPadding:!0,closeButtonAriaLabel:F,className:"question-picker-panel",pageHelpProps:V,fixedLargeHeader:!0,stackIndex:3,heightOffset:T.panelHeightOffset,analyticsId:"assessments.questionPanelPicker.panel"},l.default.createElement(i.BbPanelHeader,{title:q,smallHeaderTitle:this.props.destination.assessmentTitle}),l.default.createElement("div",Object.assign({className:"question-picker-panel__content",ready:N.toString()},{}),l.default.createElement("div",{className:"question-picker-panel__body",onKeyUp:this.onKeyUp,onScroll:this.onScroll},D&&l.default.createElement(E.default,Object.assign({id:"questionPickerPanel",isLoading:e,criteriaConfig:R,onClearCriteria:this.onClearCriteria,resultsCount:u&&u.count?u.count:0,zeroResultsEmptyStateProps:k,analyticsId:"questionPickerPanel.filterList"},{}),l.default.createElement(_.default,{courseId:p,sources:I,deselectedQuestions:c,selectedQuestions:d,items:n,isLoadingMore:t,onItemSelect:this.onSelectQuestion,isSelectAllQuestions:s,onSelectAllQuestions:this.onSelectAllQuestions,onClearAllQuestionSelection:this.onClearAllQuestionSelection,questionToFocus:o,localizationPrefix:P})),!D&&!Q&&l.default.createElement(a.Spinner,{className:"question-picker-panel__spinner",size:a.SpinnerSize.large}),!D&&Q&&l.default.createElement(b.default,{headerKey:O,messageKey:B}),!e&&this.renderViewMoreButton()),l.default.createElement(g.default,{message:m.translate(A.message),onStay:this.hideCancelConfirmationDialog,onProceed:()=>this.proceedClosePanel(),show:this.state.isShowingCancelConfirmationDialog,title:m.translate(A.title)})),l.default.createElement(i.BbPanelFooter,{analyticsId:"questionPickerPanel.footer",primaryButtonProps:{className:"js-primary-button",onClick:this.reuseQuestions,disabled:0===x,text:L},secondaryButtonProps:{className:"js-cancel-button",onClick:this.cancel,text:F}},l.default.createElement("div",{className:"question-picker-panel__footer-content"},l.default.createElement(r.ContentCollection,{className:"question-picker-panel__footer-icon",color:"primary"}),l.default.createElement("span",{className:"question-picker-panel__footer-text"},M))))}}t.QuestionPickerPanel=v,v.FILTER_OPTION_LOAD_LIMIT=100,v.FILTER_OPTIONS_LOAD_MAX=10,v.defaultProps={searchQuestions:c.searchQuestions},v.WAIT_TIME_IN_MS=1e3;const S=h.connect((e,t)=>({questionTypes:c.select.questionType.getQuestionTypesByCourseId(e,t.courseId),sources:c.select.assessment.getAssessmentsByCourseId(e,t.courseId),tags:c.select.questionTag.getQuestionTagsByCourseId(e,t.courseId)}),e=>m.bindActionCreators({loadAssessments:c.actions.assessment.loadAssessments,loadQuestionTags:c.actions.questionTag.loadQuestionTags,loadQuestionTypes:c.actions.questionType.loadQuestionTypes},e),(e,t,s)=>({...s,...e,...t,questionTypes:s.questionTypes?s.questionTypes:e.questionTypes,sources:s.sources?s.sources:e.sources}))(v);t.default=f.localizedComponentWrapper(w.withAssessmentCommonContext(o.withAnalytics(S)))},leLK:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomNumbers=e=>window.crypto.getRandomValues(new Uint8Array(e)),t.generateAccessCode=()=>t.generateRandomNumbers(6).map(e=>e%10).join("")},lqf4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachContentChangeListener=function(e,t){const s={caretPositionChanged:e=>{},clipboardChanged:e=>{},contentChanged:e=>{t(e.getMathML())},styleChanged:e=>{},transformationReceived:e=>{}};return e.getEditorModel().addEditorListener(s),s},t.DEFAULT_RESERVED_WORDS=["sin","cos","tan","asin","acos","atan","csc","sec","cot","log","exp","ln","round","e","&#960;"];const n={reservedWordsColor:"#006fcb",forceReservedWords:"true",grammarResource:"grammar_eval_content.txt",reservedWords:t.DEFAULT_RESERVED_WORDS.join(",")};t.enableReservedWords=function(e){e.setParams(n)},t.setReservedWords=function(e,s){e.setParams({reservedWords:[...t.DEFAULT_RESERVED_WORDS,...s].join(",")})}},m20R:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("JfV0"),r=s("ALQB"),l=s("oFES"),u=s("t6ux"),c=s("Vng8"),d=s("3ZJq"),p=n.__importDefault(s("fSUK")),m=n.__importDefault(s("J495")),h=n.__importDefault(s("gvex"));s("8gHA");const f=s("E1pj"),g=n.__importDefault(s("nsO7"));function E(e){return g.default.keys(e).some(t=>!0===e[t])}function _(e){return(e+1)/Object.keys(u.STEP_ENUM).length*100}t.CLASS_PREFIX="calculated-formula-question-edit",t.isAnyRowDirty=E;class b extends a.Component{constructor(e){super(e),this.onQuestionChange=e=>{const{onQuestionChange:t,question:s}=this.props,n={...s,...e};c.hasCalculatedFormulaQuestionChanged(s,n)&&t(n,this.shouldEnableSaveButton)},this.goToStep1=()=>{this.setState({activeStep:u.STEP_ENUM.ONE})},this.goToStep2=()=>{this.setState({activeStep:u.STEP_ENUM.TWO})},this.goToStep3=()=>{const{needAllNewVariableSets:e,needToRecalculateExistingVariableSets:t}=this.state,{question:s}=this.props,n=s.variableSetCount-s.variableSets.length;let a;e?a=this.generateVariableSets(s.variableSetCount):n>0?a=s.variableSets.concat(this.generateVariableSets(n,s.variableSets.length)):n<0&&(a=s.variableSets.slice(0,s.variableSetCount)),e||n>0?this.calculateMultipleRows(a):t&&this.calculateMultipleRows(s.variableSets),a&&this.onQuestionChange({variableSets:a}),this.setState({activeStep:u.STEP_ENUM.THREE,isStepOneAnswerSetsRelatedFieldDirty:!1,isStepTwoAnswerSetsRelatedFieldDirty:!1,needAllNewVariableSets:!1,needToRecalculateExistingVariableSets:!1})},this.isEveryStepValidAndClean=(e,t)=>{const{isStepOneAnswerSetsRelatedFieldDirty:s,isStepTwoAnswerSetsRelatedFieldDirty:n,isStepThreeAnswerSetsRelatedFieldDirty:a,isStepOneValid:i,isStepTwoValid:o,isStepThreeValid:r}=this.state,l=t.units&&t.units.unitsRequired&&t.units.unitValue.length<1;return i&&o&&r&&!s&&!n&&!a&&!l},this.shouldEnableSaveButton=(e,t)=>c.hasCalculatedFormulaQuestionChanged(this.originalQuestion,t)&&this.isEveryStepValidAndClean(e,t),this.handleValidateStepOne=e=>{this.setState({isStepOneValid:e})},this.handleValidateStepTwo=e=>{this.setState({isStepTwoValid:e})},this.handleValidateStepThree=e=>{this.setState({isStepThreeValid:e})},this.handleStepOneAnswerSetsRelatedFieldDirty=e=>{this.setState({isStepOneAnswerSetsRelatedFieldDirty:e})},this.handleStepTwoAnswerSetsRelatedFieldDirty=e=>{this.setState({isStepTwoAnswerSetsRelatedFieldDirty:e})},this.getFullLocalizationKey=e=>`assessments.canvas.question.calculatedFormula.${e}`,this.translateKey=(e,t)=>this.props.localize.translate(this.getFullLocalizationKey(e),t),this.buildMathMLEvaluation=(e,t,s)=>({mathML:e,variables:t,ident:s}),this.generateVariableSets=(e,t=0)=>{const{question:s}=this.props,n=[];for(let a=0;a<e;a+=1)n.push({ident:`ident-${a+t}`,variableValues:u.generateVariableValues(s.variableDefinitions),answer:null});return n},this.calculateMultipleRows=e=>{const{courseId:t,question:s}=this.props,n=this.generateMathMLEvaluationsFromVariableSets(e);return this.setState({isRecalculatingVariableSets:!0}),o.batchEvaluateMathML(t,n).then(e=>{const t=[...s.variableSets];e.forEach((e,a)=>{const i=n[a],o=g.default.findIndex(t,e=>e.ident===i.ident),r={answer:u.roundWithPrecision(e.result,s.answerScale,s.correctAnswerFormat,s.correctAnswerPrecision),variableValues:{...i.variables},ident:i.ident};o>-1?t[o]=r:t.push(r)}),this.setState({isRecalculatingVariableSets:!1}),this.resetAnswerSetDirtyRowMap(),this.onQuestionChange({variableSets:t})})},this.repopulateTable=()=>{this.calculateMultipleRows(this.generateVariableSets(this.props.question.variableSetCount)),this.setState({needToRecalculateExistingVariableSets:!1,needAllNewVariableSets:!1,isStepThreeAnswerSetsRelatedFieldDirty:!1})},this.generateMathMLEvaluationsFromVariableSets=e=>{const{question:t}=this.props,s=[];return e.forEach(e=>{s.push(this.buildMathMLEvaluation(t.answerFormula,e.variableValues,e.ident))}),s},this.updateAnswerSetDirtyRowMapValue=(e,t)=>{this.setState(s=>{const n={...s.answerSetTableDirtyRowMap};return e&&(n[e]=t),{answerSetTableDirtyRowMap:n}})},this.resetAnswerSetDirtyRowMap=()=>{this.setState(e=>{const t={...e.answerSetTableDirtyRowMap};return g.default.keys(t).forEach(e=>{t[e]=!1}),{answerSetTableDirtyRowMap:t}})},this.generateAnalyticsLinearProgressElement=e=>{var t;const{UltraWindowSize:s}=this.props;return null!==(t=null==s?void 0:s.isSmallBreakpoint())&&void 0!==t&&t&&window.Modernizr.touch?a.default.createElement(r.AnalyticsLinearProgress,{ariaLabel:this.translateKey("progressBarAriaLabel"),variant:"determinate",value:_(e)}):null},this.originalQuestion=e.question,this.state={activeStep:u.STEP_ENUM.ONE,answerSetTableDirtyRowMap:{},isRecalculatingVariableSets:!1,isStepOneAnswerSetsRelatedFieldDirty:!1,isStepTwoAnswerSetsRelatedFieldDirty:!1,isStepThreeAnswerSetsRelatedFieldDirty:!1,isStepOneValid:!0,isStepTwoValid:!0,isStepThreeValid:!0,needAllNewVariableSets:!e.question.variableSets||0===e.question.variableSets.length,needToRecalculateExistingVariableSets:!1}}componentDidUpdate(e,t){const{question:s}=e,{question:n}=this.props,{isStepOneAnswerSetsRelatedFieldDirty:a,isStepTwoAnswerSetsRelatedFieldDirty:i,isStepThreeAnswerSetsRelatedFieldDirty:o,isStepOneValid:r,isStepTwoValid:l,isStepThreeValid:c}=this.state,d=u.haveVariablesChanged(s.variableDefinitions,n.variableDefinitions),p=s.answerFormula!==n.answerFormula,m=E(this.state.answerSetTableDirtyRowMap),h=E(t.answerSetTableDirtyRowMap)!==m;(d||p||h)&&this.setState({needAllNewVariableSets:d||t.needAllNewVariableSets,needToRecalculateExistingVariableSets:p||t.needToRecalculateExistingVariableSets,isStepThreeAnswerSetsRelatedFieldDirty:h?m:t.isStepThreeAnswerSetsRelatedFieldDirty}),a===t.isStepOneAnswerSetsRelatedFieldDirty&&i===t.isStepTwoAnswerSetsRelatedFieldDirty&&o===t.isStepThreeAnswerSetsRelatedFieldDirty&&r===t.isStepOneValid&&l===t.isStepTwoValid&&c===t.isStepThreeValid&&(n.units&&n.units.unitValue)===(s.units&&s.units.unitValue)&&(n.units&&n.units.unitsRequired)===(s.units&&s.units.unitsRequired)||this.props.onQuestionChange(n,this.shouldEnableSaveButton)}render(){const{activeEditorId:e,courseId:s,hasSubmissions:n,question:i,setActiveEditorId:o,pluginsConfig:r}=this.props,{activeStep:c,answerSetTableDirtyRowMap:f,isRecalculatingVariableSets:g,isStepOneValid:E,isStepTwoValid:_,isStepThreeValid:b}=this.state,y=this.translateKey("iconLabel.active"),C=this.translateKey("iconLabel.completed"),w=this.translateKey("iconLabel.error"),v=this.translateKey("iconLabel.incomplete");return a.default.createElement("div",{className:t.CLASS_PREFIX},this.generateAnalyticsLinearProgressElement(c),a.default.createElement(l.AnalyticsStepper,{activeStep:c,orientation:"vertical"},a.default.createElement(l.AnalyticsStep,{key:"step1"},a.default.createElement(l.AnalyticsStepLabel,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.stepOne.stepLabel`,disabled:c<=u.STEP_ENUM.ONE,error:!E,onClick:this.goToStep1,iconId:"step1Icon",activeLabel:y,completedLabel:C,errorLabel:w,inCompleteLabel:v,stepNumber:this.translateKey("stepOne.stepNumber"),stepDescription:this.translateKey("stepOne.stepDescription")}),a.default.createElement(l.AnalyticsStepContent,null,a.default.createElement(p.default,Object.assign({},this.props,{courseId:s,onAnswerSetsRelatedFieldDirty:this.handleStepOneAnswerSetsRelatedFieldDirty,onGoToNextStep:this.goToStep2,onQuestionChange:this.onQuestionChange,onValidate:this.handleValidateStepOne,question:i})))),a.default.createElement(l.AnalyticsStep,{key:"step2"},a.default.createElement(l.AnalyticsStepLabel,{analyticsId:`${u.ANALYTICS_ID_PREFIX}.stepTwo.stepLabel`,disabled:c<=u.STEP_ENUM.TWO,error:!_,onClick:this.goToStep2,iconId:"step2Icon",activeLabel:y,completedLabel:C,errorLabel:w,inCompleteLabel:v,stepNumber:this.translateKey("stepTwo.stepNumber"),stepDescription:this.translateKey("stepTwo.stepDescription")}),a.default.createElement(l.AnalyticsStepContent,null,a.default.createElement(m.default,{hasSubmissions:n,onAnswerSetsRelatedFieldDirty:this.handleStepTwoAnswerSetsRelatedFieldDirty,onGoBackStep:this.goToStep1,onGoToNextStep:this.goToStep3,onQuestionChange:this.onQuestionChange,onValidate:this.handleValidateStepTwo,question:i,translateKey:this.translateKey}))),a.default.createElement(l.AnalyticsStep,{key:"step3"},a.default.createElement(l.AnalyticsStepLabel,{disabled:c<=u.STEP_ENUM.THREE,error:!b,onClick:this.goToStep3,iconId:"step3Icon",activeLabel:y,completedLabel:C,errorLabel:w,inCompleteLabel:v,stepNumber:this.translateKey("stepThree.stepNumber"),stepDescription:this.translateKey("stepThree.stepDescription"),analyticsId:`${u.ANALYTICS_ID_PREFIX}.stepThree.stepLabel`}),a.default.createElement(l.AnalyticsStepContent,null,a.default.createElement(h.default,{calculateMultipleRows:this.calculateMultipleRows,courseId:s,dirtyRowMap:f,hasSubmissions:n,isRecalculatingVariableSets:g,onGoBackStep:this.goToStep2,onQuestionChange:this.onQuestionChange,onValidate:this.handleValidateStepThree,question:i,repopulateTable:this.repopulateTable,resetDirtyRowMap:this.resetAnswerSetDirtyRowMap,updateDirtyRowMapValue:this.updateAnswerSetDirtyRowMapValue})))),a.default.createElement(d.AutomatedQuestionFeedbackEdit,{activeEditorId:e,onQuestionChange:this.onQuestionChange,question:i,setActiveEditorId:o,pluginsConfig:r}))}}t.BaseCalculatedFormulaQuestionEdit=b,t.UnwrappedCalculatedFormulaQuestionEdit=i.localizedComponentWrapper(b),t.default=f.windowResizingResponsiveComponentWrapper(t.UnwrappedCalculatedFormulaQuestionEdit)},mWAU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("8unJ");s("xWTz");t.default=a.localizedComponentWrapper(e=>{const{title:t,titleAlert:s,points:a,localize:i}=e,o=null==a?i.translate("assessments.canvas.question.header.noPoints"):i.translate("assessments.canvas.question.header.points",{points:i.formatNumber(a,{maximumFractionDigits:2})});return n.default.createElement("div",{className:"readonly-question-header"},n.default.createElement("span",{className:"readonly-question-header__content"},n.default.createElement("span",{className:"readonly-question-header__title-container"},n.default.createElement("h3",{className:"readonly-question-header__title"},t),s&&n.default.createElement("span",{className:"readonly-question-header__title-alert"},s)),n.default.createElement("span",{className:"readonly-question-header__pill"},o)))})},mzw0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("ERkP"),a=s("gKi8"),i={initError:null,isReady:!1,wirisEditorInstance:null},o=(e,t)=>{switch(t.type){case"get-new-instance":return{...i};case"ready":return{...e,isReady:!0,wirisEditorInstance:t.wirisEditorInstance};case"error":return{...e,isReady:!1,initError:t.error};default:throw Error(`Unrecognized action: ${t}`)}};t.useWirisEditor=(e,t,s,r)=>{const[{isReady:l,initError:u,wirisEditorInstance:c},d]=n.useReducer(o,i);return n.useEffect(()=>{let n;const i=new a.WirisService(t);return d({type:"get-new-instance"}),i.newInstance({mml:s,language:r,fontFamily:"stix"}).then(t=>{(n=t).insertInto(e.current),d({type:"ready",wirisEditorInstance:n})},e=>{d({type:"error",error:e})}),()=>{n&&n.close()}},[e]),n.useEffect(()=>{c&&c.getEditorModel().getParam("language")!==r&&c.setParam("language",r)},[r,c]),{initError:u,isReady:l,wirisEditorInstance:c}}},n3Pa:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({backwardSectionRoot:{[e.breakpoints.up("md")]:{marginRight:"15px"}},forwardSectionRoot:{[e.breakpoints.up("md")]:{marginLeft:"15px"}},backwardSectionLabel:{flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}},forwardSectionLabel:{flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row-reverse"}},button:{justifyContent:"center",width:"50%",[e.breakpoints.up("md")]:{width:"auto",maxWidth:"200px"}},buttonLabel:{fontSize:"10px",[e.breakpoints.up("md")]:{fontSize:"14px",marginLeft:"14px",marginRight:"14px"}}}))},nUPs:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("8unJ"),i=s("MC1S"),o=s("caKH");t.default=a.localizedComponentWrapper(e=>{const{localize:t,message:s,onStay:a,onProceed:r,show:l,title:u}=e;return n.default.createElement(o.UltraModalDialog,{hidden:!l,onDismiss:a,dialogContentProps:{type:i.DialogType.normal,title:u,subText:s,showCloseButton:!0,isAlert:!0},analyticsId:"questionReuse.cancelDialog.dialog"},n.default.createElement(i.DialogFooter,null,n.default.createElement(i.DefaultButton,{onClick:a,text:t.translate("questionReuse.cancelDialog.cancel"),analyticsId:"questionReuse.cancelDialog.cancel"}),n.default.createElement(i.PrimaryButton,{onClick:r,text:t.translate("questionReuse.cancelDialog.ok"),analyticsId:"questionReuse.cancelDialog.ok"})))})},nwoY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("MC1S"),o=s("8unJ"),r=n.__importDefault(s("cFZT"));s("4+yV");t.default=o.localizedComponentWrapper(({localize:e,image:t,title:s,message:n,showFilterPanelButton:o,onFilterPanelToggle:l})=>a.default.createElement("div",{className:"items-empty-state"},a.default.createElement(r.default,{image:t,passedClass:"items-empty-state__image",presentationOnly:!0}),a.default.createElement("h3",{className:"items-empty-state__title"},s),a.default.createElement("div",{className:"items-empty-state__message"},n),o&&a.default.createElement(i.PrimaryButton,{className:"items-empty-state__button js-items-empty-state-filter-button",onClick:l,text:e.translate("questionReuse.emptyState.dueToFilter.filterButton"),analyticsId:"questionReuse.emptyState.dueToFilter.filter"}),a.default.createElement("span",{role:"alert",className:"sr-only"},s)))},o7ef:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLASS_BASE="question-block",t.LOCALE_KEY_BASE="assessments.canvas.question.questionBlock"},o8si:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("0x+l");s("VPjn");class i extends n.PureComponent{render(){return n.default.createElement("div",{className:`drag-button ${null!=this.props.className?this.props.className:""}`,ref:this.props.dragPointRef,draggable:!0,title:this.props.title,"aria-label":this.props.ariaLabel,"aria-describedby":this.props.ariaDescribedBy,role:"button","aria-hidden":this.props.removedFromTabOrder?"true":void 0,tabIndex:this.props.removedFromTabOrder?-1:0},n.default.createElement(a.MoveItemUpDown,null))}}t.default=i},p0wN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=s("j9WP"),r=n.__importDefault(s("/rnO")),l=n.__importDefault(s("RtIR"));s("UyCi"),t.QuestionPoolQuestion=e=>{const{courseId:t,question:s,localize:n,deleteQuestion:i,hasSubmissions:u,focusTitle:c,isAnyQuestionDirty:d,questionBeingEditedId:p,onQuestionEdit:m,onQuestionMadeDirty:h,persistQuestion:f,hasAssessmentModifyPermissions:g,localizationPrefix:E}=e,_=e=>l.default("overflow",s,e);return a.default.createElement("div",{className:"question-pool-question"},a.default.createElement(o.AssessmentCanvasQuestion,Object.assign({courseId:t,focusTitle:c,question:s,deleteQuestion:i,hasSubmissions:u,questionBeingEditedId:p,questionTitle:n.translate(`questionPools.typeLabels.${s.questionType}`),onQuestionEdit:m,onQuestionMadeDirty:h,isAnyQuestionDirty:d,persistQuestion:f,openGoals:()=>{},pluginsConfig:{},showQuestionControls:!1,localizationPrefix:E,customQuestionHeader:e=>a.default.createElement(r.default,Object.assign({},e,{questionSourceName:s.sourceInfo.name,hasAssessmentModifyPermissions:g,hasSubmissions:u,deleteQuestion:i,overflowMenuButtonLabelData:_(e.questionTitle)}))},{})))},t.default=i.localizedComponentWrapper(t.QuestionPoolQuestion)},p1hm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("MC1S"),r=n.__importDefault(s("D0DQ")),l=n.__importDefault(s("xzbH"));s("1S7Y"),t.ANSWER_DELIMITER=";",t.EvaluationTypeEnum={EXACT:{locKey:"assessments.canvas.question.fimb.responseType.exact"},CONTAINS:{locKey:"assessments.canvas.question.fimb.responseType.contains"},MATCHES:{locKey:"assessments.canvas.question.fimb.responseType.matches"}};const u=e=>{const{evaluationType:s,caseSensitive:n}=e.answer.answerValues[0];return{text:e.answer.answerValues.map(e=>e.value).join(t.ANSWER_DELIMITER),evaluationType:s,caseSensitive:n,testPatternDialogOpen:!1}};class c extends a.Component{constructor(e){super(e),this.openTestPatternDialog=()=>{this.setState({testPatternDialogOpen:!0})},this.hideTestPatternDialog=()=>{this.setState({testPatternDialogOpen:!1})},this.updateInputValue=e=>{const t={...this.props.answer,answerValues:this.parseAnswerText(e)};this.props.onAnswerChange(t)},this.parseAnswerText=e=>e.split(t.ANSWER_DELIMITER).map(e=>({value:e,evaluationType:this.state.evaluationType,caseSensitive:this.state.caseSensitive})),this.onAnswerChange=()=>{this.updateInputValue(this.state.text)},this.setText=e=>{this.setState(()=>({text:e}),this.onAnswerChange)},this.setEvaluationType=e=>{this.setState(()=>({evaluationType:e.key}),this.onAnswerChange)},this.setCaseSensitive=()=>{this.setState(e=>({caseSensitive:!e.caseSensitive}),this.onAnswerChange)},this.state=u(e)}UNSAFE_componentWillReceiveProps(e){this.setState(u(e))}render(){const e=this.props.localize.translate,s=Object.keys(t.EvaluationTypeEnum).map(s=>({key:s,text:e(`${t.EvaluationTypeEnum[s].locKey}.edit`)})),n=this.props.answer.answerValues[0],i=e(`${t.EvaluationTypeEnum[n.evaluationType].locKey}.${n.caseSensitive?"readOnlyCaseSensitive":"readOnly"}`);return a.default.createElement("div",{className:`fimb-question-answer fimb-question-answer--${this.props.readOnly?"read":"edit"}`},a.default.createElement(r.default,{disabled:this.props.disabled,editable:!this.props.readOnly,inputDescriptionText:i,inputLabelText:this.props.inputLabel,inputText:this.state.text,onInputChange:this.setText}),!this.props.readOnly&&a.default.createElement("div",{className:"fimb-question-answer__options"},a.default.createElement("div",{className:"fimb-question-answer__match-selector"},a.default.createElement(o.Dropdown,{label:e("assessments.canvas.question.fimb.responseType.label"),options:s,selectedKey:this.state.evaluationType,onChanged:this.setEvaluationType,disabled:this.props.disabled,inlineLabel:!0,analyticsId:"assessments.canvas.question.fimb.responseType.dropdown"})),"MATCHES"!==this.state.evaluationType&&a.default.createElement(o.Checkbox,{className:"fimb-question-answer__checkbox",label:e("assessments.canvas.question.fimb.caseSensitive"),checked:this.state.caseSensitive,onChange:this.setCaseSensitive,disabled:this.props.disabled,analyticsId:"assessments.canvas.question.fimb.caseSensitive"}),"MATCHES"===this.state.evaluationType&&a.default.createElement(o.DefaultButton,{className:"fimb-question-answer__test-pattern-button",onClick:this.openTestPatternDialog,disabled:this.props.disabled,analyticsId:"assessments.canvas.question.fimb.testPattern"},e("assessments.canvas.question.fimb.testPatternButton")),this.state.testPatternDialogOpen&&a.default.createElement(l.default,{initialPatternValue:this.state.text,onClose:this.hideTestPatternDialog,onSave:this.updateInputValue,assessmentId:this.props.assessmentId,courseId:this.props.courseId})))}}const d=i.localizedComponentWrapper(c);t.default=d},p3LL:function(e,t,s){"use strict";s.r(t)},p3zD:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),i=s("AJxu");t.LocalizedAssessmentQuestionCounts=a.localizedComponentWrapper(({descriptionId:e,totalQuestionCount:t,unansweredQuestionCount:s,localize:a})=>{const{textClass:o}=i.useStyles(),[r,l]=n.useState("");return n.useEffect(()=>{const e=a.translate("assessmentProgress.questionCounts.unansweredText",{unanswered:s}),i=a.translate("assessmentProgress.questionCounts.fullText",{total:t,unanswered:n.createElement("strong",{key:"unanswered"},e)});l(i)},[t,s]),n.createElement("span",{id:e,className:o,role:"status","aria-live":"polite"},r)})},pfaR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("MC1S"),i=s("0x+l"),o=s("8unJ"),r=s("caKH"),l="assessments.canvas.question.questionBlock.removeQuestionFromPoolConfirmation";class u extends n.default.Component{constructor(e){super(e),this.actionMenuButtonRef=n.default.createRef(),this.onDeleteClick=()=>{this.setState({isConfirmationDialogOpen:!0})},this.onConfirmationDismiss=()=>{this.setState({isConfirmationDialogOpen:!1})},this.onCancelDelete=()=>{this.onConfirmationDismiss(),this.actionMenuButtonRef.current.firstChild.focus()},this.onMenuOpen=()=>{this.state.isConfirmationDialogOpen&&this.onConfirmationDismiss()},this.state={isConfirmationDialogOpen:!1}}getActionMenuProps(){const{localize:e,hasSubmissions:t,hasAssessmentModifyPermissions:s,startEditMode:a}=this.props,o={directionalHint:6,enableBodyScrollingDisabledCheck:!1,onMenuOpened:this.onMenuOpen,items:[]};return s&&o.items.push({key:"edit",name:e.translate("questionPools.questionHeader.edit"),icon:n.default.createElement(i.EditTool,null),onClick:()=>a()}),!t&&s&&o.items.push({key:"delete",name:e.translate("questionPools.questionHeader.delete"),icon:n.default.createElement(i.Trash,null),onClick:this.onDeleteClick}),o}getDeleteConfirmationProps(){const{localize:e}=this.props;return{onDismiss:this.onConfirmationDismiss,showAsCallout:!0,target:this.actionMenuButtonRef.current,calloutProps:{setInitialFocus:!0},dialogContentProps:{type:a.DialogType.actionConfirmation,showCloseButton:!1,title:e.translate(`${l}.title`),subText:e.translate(`${l}.subText`)}}}render(){const{deleteQuestion:e,localize:t,overflowMenuButtonLabelData:s}=this.props,i=this.getActionMenuProps();return n.default.createElement("div",{ref:this.actionMenuButtonRef},!!i.items.length&&n.default.createElement(a.ActionMenu,{maintainExpandedProperties:this.state.isConfirmationDialogOpen,menuProps:i,"aria-hidden":"false",ariaLabel:t.translate(s.string,{relatedContent:s.relation}),analyticsId:"questionPools.questionHeader.actionMenu"}),this.state.isConfirmationDialogOpen?n.default.createElement(r.UltraModalDialog,Object.assign({},this.getDeleteConfirmationProps(),{analyticsId:"questionPools.questionHeader.confirmationDialog.dialog"}),n.default.createElement(a.DialogFooter,null,n.default.createElement(a.DefaultButton,{onClick:this.onCancelDelete,text:t.translate(`${l}.cancel`),analyticsId:"questionPools.questionHeader.confirmationDialog.cancel.button"}),n.default.createElement(a.PrimaryButton,{onClick:e,text:t.translate(`${l}.remove`),analyticsId:"questionPools.questionHeader.confirmationDialog.remove.button"}))):null)}}t.QuestionPoolQuestionHeaderMenu=u,t.default=o.localizedComponentWrapper(u)},pzAO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("7nmT")),o=s("uDfI"),r=s("8unJ"),l=s("tN4z"),u=n.__importDefault(s("Mx6v")),c=n.__importDefault(s("VsDy")),d=s("jZ9E");t.ReadonlyQuestion=d.ReadonlyQuestion;const p=s("j9WP"),m=s("QJmz"),h=s("X3OV"),f=s("P5AP");t.AllyProvider=f.AllyProvider;const g=n.__importDefault(s("bNEL"));t.AccessCode=g.default,n.__exportStar(s("E8lv"),t),n.__exportStar(s("tQQy"),t);const E=/setLang=([^$&]+)/;function _(e,t,s,n,o,l){var u;let c=s;if(null==s&&"undefined"!=typeof window&&E.test(window.location.search)){c=(null!==(u=window.location.search.match(E))&&void 0!==u?u:[])[1]}i.default.render(a.default.createElement(r.Locale,{locale:c,babelfishInstance:n,babelfishFormatInstance:o,bundlesToLoad:["assessments/locales/[locale]/assessment-canvas.json"],isRtl:l},a.default.createElement("div",{className:"assessments-app"},e)),t)}t.renderAssessmentPanel=(e,{store:t,locale:s,babelfishInstance:n,babelfishFormatInstance:i,isRtl:r},{courseId:c,contentId:d,features:p,routes:f,setIsAnyQuestionDirty:g=(()=>{}),isOrganization:E,allyService:b,editorPluginsConfig:y={},applyAccessibilityHandling:C,revertAccessibilityHandling:w,usePanelHeightOffset:v})=>{Object.keys(p).forEach(e=>{m.setToggle(e,p[e])});const S=E?"assessments.organization":"assessments";_(a.default.createElement(o.Provider,{store:t},a.default.createElement(l.AnalyticsJssThemeProvider,{theme:"light",isRtl:r},a.default.createElement(h.AssessmentsCommonContextWrapper,{usePanelHeightOffset:v},a.default.createElement(u.default,{babelfishInstance:n,contentId:d,courseId:c,features:p,routes:f,editorPluginsConfig:y,setIsAnyQuestionDirty:g,applyAccessibilityHandling:C,revertAccessibilityHandling:w,localizationPrefix:S,allyService:b})))),e,s,n,i,r)},t.renderAssessmentSettings=(e,{store:t,locale:s,babelfishInstance:n,babelfishFormatInstance:i,isRtl:r},{courseId:u,contentId:d,routes:p,isOrganization:m})=>{const h=m?"assessments.organization":"assessments";_(a.default.createElement(o.Provider,{store:t},a.default.createElement(l.AnalyticsJssThemeProvider,{theme:"light",isRtl:r},a.default.createElement(c.default,{courseId:u,contentId:d,routes:p,localizationPrefix:h}))),e,s,n,i,r)},t.renderQuestion=(e,t,s,n,u,c,d,m,h)=>{const f=m?"assessments.organization":"assessments";i.default.render(a.default.createElement(o.Provider,{store:t},a.default.createElement(r.Locale,{locale:s,babelfishInstance:n,babelfishFormatInstance:u,isRtl:c},a.default.createElement(l.AnalyticsJssThemeProvider,{theme:"light",isRtl:c},a.default.createElement(p.AssessmentQuestion,Object.assign({},d,{localizationPrefix:f}))))),e,h||null)};const b={renderAssessmentPanel:t.renderAssessmentPanel,renderAssessmentSettings:t.renderAssessmentSettings,renderQuestion:t.renderQuestion,destroyReactControl:e=>{i.default.unmountComponentAtNode(e)}};t.default=b},qA6I:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=s("MC1S"),r=s("0x+l"),l=n.__importDefault(s("Pfoe"));s("NHtK"),t.getReuseAnswerMenuItems=e=>{const{answerIdToPromptIndexMap:t,localize:s,onReuse:n,reusableAnswers:i}=e;return i.map(i=>{const o=t[i.ui.id],r=`reuse-answer-${o}`;return{key:o,name:a.default.createElement("div",{className:"assessments-reuse-answer-menu-item"},a.default.createElement("div",{className:"assessments-reuse-answer-menu-item__pair-number","aria-hidden":"true"},o+1),a.default.createElement(l.default,Object.assign({},e,{id:r,isReadOnly:!0,bbml:i.answerText.rawText}))),onClick:n,ariaLabel:s.translate("assessments.canvas.question.matching.reuseAnswerItemAriaLabel",{pairNumber:o+1})}})},t.getReuseAnswerMenuItemNormal=e=>{const{localize:s,pairNumber:n}=e,i=t.getReuseAnswerMenuItems(e);return{key:"reuseAnswer",icon:a.default.createElement(r.Reuse,null),name:s.translate("assessments.canvas.question.matching.reuseAnswer"),ariaLabel:s.translate("assessments.canvas.question.matching.reuseAnswerAriaLabel",{pairNumber:n}),subMenuProps:{shouldFocusOnMount:!0,items:i,calloutProps:{preventDismissOnScroll:!0}},disabled:0===i.length,className:"js-reuse-answer"}},t.getReuseAnswerMenuItemAlreadyReused=e=>{const{localize:t,pairNumber:s}=e;return{key:"reuseAnswer",icon:a.default.createElement(r.Reuse,null),name:t.translate("assessments.canvas.question.matching.reuseAnswerAlreadyReused"),ariaLabel:t.translate("assessments.canvas.question.matching.reuseAnswerAlreadyReusedAriaLabel",{pairNumber:s}),disabled:!0}},t.getDeletePairMenuItem=e=>{const{canDeletePair:t,localize:s,onDelete:n,pairNumber:i,questionTitle:o}=e;return{key:"deletePair",icon:a.default.createElement(r.Trash,null),name:s.translate("assessments.canvas.question.matching.deletePair"),ariaLabel:s.translate("assessments.canvas.question.matching.deletePairAriaLabel",{questionTitle:o,pairNumber:i}),onClick:n,disabled:!t,className:"js-delete-pair"}},t.getDropDownMenuOptions=e=>{const{answerIsReused:s,showDeletePair:n,showReuseAnswer:a}=e,i=[];return a&&(s?i.push(t.getReuseAnswerMenuItemAlreadyReused(e)):i.push(t.getReuseAnswerMenuItemNormal(e))),n&&i.push(t.getDeletePairMenuItem(e)),i};const u=e=>{const{componentRef:s,localize:n,pairNumber:i,questionTitle:r}=e,l=t.getDropDownMenuOptions(e);return 0===l.length?null:a.default.createElement("div",{className:"matching-prompt-answer-pair__menu"},a.default.createElement(o.ActionMenu,{analyticsId:"assessments.canvas.question.matching.actionMenu",ariaLabel:n.translate("assessments.canvas.question.matching.moreOptionsAriaLabel",{questionTitle:r,pairNumber:i}),componentRef:s,menuProps:{items:l,calloutProps:{preventDismissOnScroll:!0}}}))};t.UnwrappedMenu=u,t.default=i.localizedComponentWrapper(u)},qTgb:function(e,t,s){"use strict";s.r(t)},qgI1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("zTL+"),i=s("nmzr"),o=s("7NIW"),r=s("sEjo"),l=s("8unJ");t.LocalizedPeerNotEnoughSubmissionsBanner=l.localizedComponentWrapper(({localize:e})=>{const t=e.translate("banners.peerAssessments.notEnoughSubmissions.editSettingsButton"),s=e.translate("banners.peerAssessments.notEnoughSubmissions.notice"),l=[n.createElement(r.AnalyticsOutlineButton,{analyticsId:"course.grades.gradebook-item.peerReview.notEnoughSubmissionsBanner.editSettingsButton",key:"edit",onClick:()=>{i.router.goPeekState(i.assessmentSettingsRequest({focusEleId:"enable-peer-grading"}))}},t)],u=n.createElement(o.Attention,null);return n.createElement(a.AnalyticsBanner,{severity:"error",actions:l,icon:u},n.createElement("span",{className:"js-banner-contents"},s))})},"qs/y":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("3Md0"));t.default=e=>a.default.createElement(i.default,Object.assign({},e,{noResultsKeys:{title:"questionReuse.emptyState.dueToFilter.header",message:"questionReuse.emptyState.dueToFilter.message"},noSourcesKeys:{title:"questionReuse.emptyState.dueToSource.header",message:"questionReuse.emptyState.dueToSource.message"},headerKeys:{title:"questionReuse.questionPickerHeader"},footerKeys:{primaryButton:"questionReuse.footer.primaryButtonText",selectedCount:"questionReuse.footer.selectedCount"},cancelModalKeys:{title:"questionReuse.cancelDialog.title",message:"questionReuse.cancelDialog.subtext"},pageHelpKey:"questionReuse.pageHelpUrl"}))},rLAU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("E1pj"),o=s("8unJ"),r=n.__importDefault(s("aNN5")),l=n.__importDefault(s("kPPX")),u=s("gTAB"),c=n.__importDefault(s("Pfoe")),d=s("2yjE"),p=n.__importDefault(s("qA6I"));s("ZnFM");class m extends a.Component{constructor(e){super(e),this.overflowMenuRef=null,this.getReusableAnswers=()=>this.props.reusableAnswers.filter(e=>this.props.answer!==e),this.focusOverflowMenu=()=>{var e;null!=this.overflowMenuRef&&(null===(e=this.overflowMenuRef)||void 0===e||e.focus())},this.onPromptChange=e=>{const{prompt:t}=this.props,s={...t,promptText:{rawText:e.toBbML()}};this.props.onPromptChange(s)},this.onAnswerChange=e=>{const{answer:t}=this.props,s={...t,answerText:{rawText:e.toBbML()}};this.props.onAnswerChange(s)},this.onDeleteReused=()=>{this.setState({deleteReusedDialogHidden:!1})},this.onDeleteCanceled=()=>{this.setState({deleteReusedDialogHidden:!0})},this.onDelete=()=>{this.focusOverflowMenu(),this.props.onPromptAnswerPairDeletion(this.props.prompt.id)},this.getOnDeleteCallback=()=>this.props.reusedElsewherePair?this.onDeleteReused:this.onDelete,this.onReuseAnswer=(e,t)=>{const{onPromptAnswerReuse:s,prompt:n}=this.props,a=t.key;s(n.id,a),this.focusOverflowMenu()},this.onRemoveReusedAnswer=()=>{const{onPromptRemoveReusedAnswer:e,prompt:t}=this.props;e(t.id)},this.storeOverflowMenuRef=e=>{this.overflowMenuRef=e},this.state={deleteReusedDialogHidden:!0}}render(){const{answer:e,answerIdToPromptIndexMap:t,answerIsReused:s,editMode:n,index:i,localize:o,prompt:m,question:h,questionTitle:f,reusedElsewherePair:g,UltraWindowSize:E}=this.props,_=u.EditModeEnum.INACTIVE===n,b=i+1,y=`prompt-header-${h.id}-${i}`,C=`${d.QUESTION_TITLE_ID_PREFIX}${h.id} ${y}`,w=(null==E?void 0:E.isSmallBreakpoint())?o.translate("assessments.canvas.question.matching.indexMobile",{pairNumber:b}):o.translate("assessments.canvas.question.matching.index",{pairNumber:b}),v=a.default.createElement(p.default,{answerIsReused:s,answerIdToPromptIndexMap:t,canDeletePair:this.props.canDeletePromptAnswerPair(m.reusesAnswer),componentRef:this.storeOverflowMenuRef,onDelete:this.getOnDeleteCallback(),onReuse:this.onReuseAnswer,pairNumber:b,questionTitle:f,reusableAnswers:this.getReusableAnswers(),showDeletePair:this.props.hasRemovePromptAnswerPairPermissions,showReuseAnswer:this.props.hasReuseAnswerPermissions});return a.default.createElement("div",{className:`matching-prompt-answer-pair\n                ${_?"matching-prompt-answer-pair--read":"matching-prompt-answer-pair--edit"}`},!_&&(null==E?void 0:E.isSmallBreakpoint())&&v,a.default.createElement("div",{className:`matching-prompt-answer-pair__element matching-prompt-answer-pair__element-index ${!_&&(null==E?void 0:E.isSmallBreakpoint())?"field-required":""}`},w),a.default.createElement("div",{className:"matching-prompt-answer-pair__element matching-prompt-answer-pair__element-prompt"},a.default.createElement("div",{className:"matching-prompt-answer-pair__text"},a.default.createElement("div",{id:y,className:"sr-only"},o.translate("assessments.canvas.question.matching.headers.prompt",{pairNumber:b})),a.default.createElement(c.default,Object.assign({},this.props,{ariaLabelledBy:C,bbml:m.promptText.rawText,id:`prompt-${m.id}`,isReadOnly:_,onChange:this.onPromptChange,placeholder:o.translate("assessments.canvas.question.matching.placeholders.prompt",{pairNumber:b}),toolbarSet:"minimal",ariaRequired:!0})))),(null==E?void 0:E.isSmallBreakpoint())&&a.default.createElement("div",{className:`matching-prompt-answer-pair__element matching-prompt-answer-pair__element-answer-label ${_?"":"field-required"}`},o.translate("assessments.canvas.question.matching.answerLabel")),a.default.createElement(r.default,Object.assign({},this.props,{isReadOnly:_,onEditorTextChange:this.onAnswerChange,onRemoveReusedAnswer:this.onRemoveReusedAnswer,pairNumber:t[e.ui.id]+1,prompt:m,reusedElsewherePair:g,text:e.answerText.rawText})),!_&&!(null==E?void 0:E.isSmallBreakpoint())&&v,g&&a.default.createElement(l.default,{hidden:this.state.deleteReusedDialogHidden,onCancel:this.onDeleteCanceled,onContinue:this.onDelete,titleKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.title",textKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.text",cancelKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.button.cancel",continueKey:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer.button.delete",analyticsId:"assessments.canvas.question.matching.dialogs.deleteReusedAnswer"}))}}t.UnwrappedMatchingPromptAnswerPair=m,t.default=i.windowResizingResponsiveComponentWrapper(o.localizedComponentWrapper(t.UnwrappedMatchingPromptAnswerPair))},rZf7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>n.createStyles({base:{marginTop:"12px","& .bb-editor":{padding:"8px 0 0 !important"},"& .bb-editor-container":{margin:"0 !important"}},contentSection:{backgroundColor:e.palette.background.b3,borderRadius:"2px",padding:"12px"},contentToggle:{padding:"12px 0",display:"flex",alignItems:"center"},contentToggleIcon:{height:"8px",width:"8px",marginLeft:"8px"},sectionHeader:{display:"flex",alignItems:"center"},contentTitle:{},feedbackIcon:{marginRight:"8px"}}))},scU2:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("d6RO")),o=s("zGdY");s("O761");const r=e=>{const{isRandomizationOfQuestionsRequired:t,isRandomizationOfAnswersRequired:s}=e.settings,n=`${e.localizationPrefix}.canvas.subheader.isAnswersRandomized`,i=`${e.localizationPrefix}.canvas.subheader.isQuestionsRandomized`,r=`${e.localizationPrefix}.canvas.subheader.isBothRandomized`;return t&&s===o.RandomizeAnswers.Always?a.default.createElement(l,{messageKey:r,localize:e.localize}):t?a.default.createElement(l,{messageKey:i,localize:e.localize}):s===o.RandomizeAnswers.Always?a.default.createElement(l,{messageKey:n,localize:e.localize}):null},l=e=>{const{messageKey:t}=e;return a.default.createElement("div",null,a.default.createElement("div",{className:"assessment-subheader"},a.default.createElement(i.default,{text:e.localize.translate(t)})))};t.default=e=>{const{content:t}=e,{deploymentSettings:s}=t;return a.default.createElement(r,{settings:s,localize:e.localize,localizationPrefix:e.localizationPrefix})}},t6ux:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("nsO7"),a=s("a6r6"),i=s("zGdY");function o(e){const t=e.match(/[a-zA-Z]/gi);return!t||t.length<e.length}function r(e){return{name:e,maxValue:t.VARIABLE_DEFINITION_DEFAULT_MAX,minValue:t.VARIABLE_DEFINITION_DEFAULT_MIN,scale:t.VARIABLE_DEFINITION_DEFAULT_SCALE}}function l(e){return e?n.without(e.match(/[a-zA-Z0-9]+(?=<\/mi>)/g),...a.WirisEditorInstanceUtils.DEFAULT_RESERVED_WORDS):[]}function u(e){return e?e.map(e=>e.name):[]}t.ANALYTICS_ID_PREFIX="assessments.canvas.question.calculatedFormula",t.STEP_ENUM={ONE:0,TWO:1,THREE:2},t.VARIABLE_DEFINITION_DEFAULT_MIN=0,t.VARIABLE_DEFINITION_DEFAULT_MAX=100,t.VARIABLE_DEFINITION_DEFAULT_SCALE=0,t.extractVariableCandidatesFromQuestionText=function(e){const t=/\[([^\s[\]]+)\]/gi,s=[];let n=t.exec(e);for(;null!=n;)1!==n.index&&"\\"===e.charAt(n.index-1)||s.push(n[1]),n=t.exec(e);return Array.from(new Set(s))},t.variableNameContainsNonLetterCharacters=o,t.isVariableAWirisEditorReservedWord=function(e){return a.WirisEditorInstanceUtils.DEFAULT_RESERVED_WORDS.includes(e)},t.getVariableDefinitionFromCandidate=r,t.getVariableDefinitionsFromCandidates=function(e){const t=new Set(e),s=[];return t.forEach(e=>{o(e)||s.push(r(e))}),s},t.questionTextHasUnclosedBrackets=function(e){const t=e.split("");let s=!1;return t.some((e,n)=>{if(s&&"]"===e)s=!1;else{if(s){const t=e.match(/\s/i);return!!(t&&t.length>0)}"["===e&&(s=0===n||"\\"!==t[n-1])}return!1})||s},t.generateVariableValues=function(e){const t={};return e.forEach(e=>{const{minValue:s,maxValue:a,name:i,scale:o}=e;t[i]=n.round(Math.random()*(a-s)+s,o)}),t},t.getVariablesFromMathML=l,t.getVariablesFromVariableDefinitions=u,t.haveVariablesChanged=function(e,t){return n.xor(u(e),u(t)).length>0},t.getUnrecognizedVariablesInAnswerFormula=function(e,t){return n.without(l(e),...u(t))},t.roundWithPrecision=function(e,t,s,n){const{SignificantFigures:a,Decimal:o}=i.CalculatedFormulaAnswerPrecisionType,{Normal:r,Exponential:l}=i.CalculatedFormulaAnswerFormatType;if(s===r&&n===o){const s=Number((Math.abs(e)*10**t).toPrecision(15));return Math.round(s)/10**t*Math.sign(e)}return s===l&&n===o?parseFloat(e.toExponential(t)):n===a?parseFloat(e.toPrecision(t)):null},t.doesQuestionHaveVariables=function({variableDefinitions:e}){return null!=e&&e.length>0},t.getCorrectAnswerToleranceValue=function(e){return e&&e.value>0?e.value:null},t.getCorrectAnswerToleranceType=function(e){return e&&e.value>0?e.type:null},t.getAnswerTranslationKey=function(e,t,s,n){let a="";if(n&&s)a=t===i.CalculatedFormulaToleranceType.Numeric?"unitsAndAnswerTolerance":"unitsAndAnswerTolerancePercent";else if(n&&!s)a="units";else{if(n||!s)return null;a=t===i.CalculatedFormulaToleranceType.Numeric?"answerTolerance":"answerTolerancePercent"}return`${e}.${a}`}},t70R:function(e,t,s){"use strict";s.r(t)},tQQy:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("kiPe");t.LocalizedAssessmentProgressBar=n.LocalizedAssessmentProgressBar;var a=s("p3zD");t.LocalizedAssessmentQuestionCounts=a.LocalizedAssessmentQuestionCounts;var i=s("tpZv");t.LocalizedAssessmentControlsContainer=i.LocalizedAssessmentControlsContainer;var o=s("GOY5");t.BaseQuestionAttemptView=o.BaseQuestionAttemptView,t.FREEFORM_IDENTIFIER=o.FREEFORM_IDENTIFIER,t.NavigationOptions=o.NavigationOptions,t.QuestionStatusFilter=o.QuestionStatusFilter;var r=s("IDN4");t.AllAtOnceQuestionAttemptView=r.AllAtOnceQuestionAttemptView;var l=s("IHpG");t.OneAtATimeQuestionAttemptView=l.OneAtATimeQuestionAttemptView},tpZv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=n.__importDefault(s("O94r")),r=s("M1C4"),l=s("ks7T"),u=s("TFdY"),c=s("5HEc"),d=s("UUbQ"),p=s("0fHu"),m=s("GOY5");var h;!function(e){e[e.Backward=0]="Backward",e[e.Forward=1]="Forward"}(h=t.NavigationDirection||(t.NavigationDirection={}));t.LocalizedAssessmentControlsContainer=i.localizedComponentWrapper(({canNavigateForward:e,canNavigateBackward:t,questionNavigation:s,localize:n})=>{const i=p.useStyles(),f=n.translate("assessmentControls.first"),g=n.translate("assessmentControls.previous"),E=n.translate("assessmentControls.next"),_=n.translate("assessmentControls.last"),b=n.translate("assessmentControls.firstQuestion"),y=n.translate("assessmentControls.previousQuestion"),C=n.translate("assessmentControls.nextQuestion"),w=n.translate("assessmentControls.lastQuestion"),v=a.default.useCallback(e=>{s(e)},[s]),S={navigate:h.Backward,onClick:v,disabled:!t},P=[{id:m.NavigationOptions.First,label:f,ariaLabel:b,icon:a.default.createElement(u.PaginatorFirst,{"aria-hidden":!0}),...S},{id:m.NavigationOptions.Previous,label:g,ariaLabel:y,icon:a.default.createElement(l.ChevronLeft,{"aria-hidden":!0}),...S}],A={navigate:h.Forward,onClick:v,disabled:!e},T=[{id:m.NavigationOptions.Next,label:E,ariaLabel:C,icon:a.default.createElement(c.ChevronRight,{"aria-hidden":!0}),...A},{id:m.NavigationOptions.Last,label:_,ariaLabel:w,icon:a.default.createElement(d.PaginatorLast,{"aria-hidden":!0}),...A}];return a.default.createElement("div",{className:i.controlsContainer},a.default.createElement("span",{className:i.column},P.map(e=>a.default.createElement(r.AssessmentNavButton,{key:e.id,id:e.id,label:e.label,ariaLabel:e.ariaLabel,icon:e.icon,navigate:e.navigate,onClick:e.onClick,disabled:e.disabled}))),a.default.createElement("span",{className:o.default(i.rightSection,i.column)},T.map(e=>a.default.createElement(r.AssessmentNavButton,{key:e.id,id:e.id,label:e.label,ariaLabel:e.ariaLabel,icon:e.icon,navigate:e.navigate,onClick:e.onClick,disabled:e.disabled}))))})},"uh+7":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("8unJ"),o=s("M0dR"),r=s("j92x"),l=s("0x+l"),u=s("zGdY"),c=s("t6ux"),d=s("3ZJq"),p=n.__importDefault(s("Pfoe")),m=s("/R3Y");s("S0GT"),t.CLASS_PREFIX="calculated-formula-question-read";const h="assessments.canvas.question.calculatedFormula.readOnly";class f extends a.Component{constructor(e){super(e),this.getAnswerToleranceDisplayInfo=()=>{const{localize:e}=this.props,{correctAnswerTolerance:s}=this.props.question,n=s.type===u.CalculatedFormulaToleranceType.Numeric?"answerToleranceDisplayInfoNumeric":"answerToleranceDisplayInfoPercent";return a.default.createElement("div",{className:m.removeExtraWhitespace(`\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info--full-credit\n                `)},e.translate(`${h}.${n}`,{answerToleranceValue:s.value}))},this.getPartialCreditDisplayInfo=()=>{const{localize:e}=this.props,{partialCreditTolerance:s,partialCreditPointsPercent:n}=this.props.question,i=s.type===u.CalculatedFormulaToleranceType.Numeric?"partialCreditDisplayInfoNumeric":"partialCreditDisplayInfoPercent";return a.default.createElement("div",{className:m.removeExtraWhitespace(`\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info\n                    ${t.CLASS_PREFIX}__precision-scoring-display-info--partial-credit\n                `)},a.default.createElement("span",null,e.translate(`${h}.${i}`,{answerToleranceValue:s.value})),a.default.createElement("span",{className:`${t.CLASS_PREFIX}__precision-scoring-display-info--partial-credit-points-percent`},e.translate(`${h}.partialCreditDisplayInfoPointsPercent`,{partialCreditPointsPercent:n})))},this.getVariablesRange=()=>{const{question:e,localize:s}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__variables-range`},e.variableDefinitions.map(e=>{const n=s.translate(`${h}.variableRangeRow`,{name:e.name,min:e.minValue,max:e.maxValue});return a.default.createElement("div",{key:e.name,className:`${t.CLASS_PREFIX}__variables-range--row`,dangerouslySetInnerHTML:{__html:n}})}))},this.getAnswerSettingsSection=(e,s)=>{const{localize:n}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-settings-section`},a.default.createElement(o.AnalyticsTypography,{component:"h5",variant:"h4"},n.translate(e)),s)},this.getAnswerSettingsContent=e=>{const{localize:s,question:n}=this.props;return a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-settings-content`,id:e},this.getAnswerSettingsSection(`${h}.answerFormatLabel`,a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-format`},n.correctAnswerFormat===u.CalculatedFormulaAnswerFormatType.Normal?s.translate("assessments.canvas.question.calculatedFormula.stepTwo.answerFormat.normalOption"):s.translate("assessments.canvas.question.calculatedFormula.stepTwo.answerFormat.exponentialOption"))),this.getAnswerSettingsSection(`${h}.roundingLabel`,a.default.createElement("div",{className:`${t.CLASS_PREFIX}__rounding`},n.correctAnswerPrecision===u.CalculatedFormulaAnswerPrecisionType.Decimal?s.translate(`${h}.roundingDecimalPlaces`,{roundingCount:n.answerScale}):s.translate(`${h}.roundingSignificantFigures`,{roundingCount:n.answerScale}))),this.getAnswerSettingsSection(`${h}.precisionScoringOptionsLabel`,a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.read.correctAnswerTolerance.checkbox`,checked:n.correctAnswerTolerance&&n.correctAnswerTolerance.value>0,className:`${t.CLASS_PREFIX}__precision-scoring__full-credit-checkbox`,disabled:!0,label:s.translate("assessments.canvas.question.calculatedFormula.stepTwo.precisionScoring.fullCreditLabel")}),n.correctAnswerTolerance&&n.correctAnswerTolerance.value>0&&this.getAnswerToleranceDisplayInfo(),a.default.createElement(r.Checkbox,{analyticsId:`${c.ANALYTICS_ID_PREFIX}.read.partialAnswerTolerance.checkbox`,checked:n.allowPartialCredit,className:`${t.CLASS_PREFIX}__precision-scoring__partial-credit-checkbox`,disabled:!0,label:s.translate("assessments.canvas.question.calculatedFormula.stepTwo.precisionScoring.partialCreditLabel")}),n.allowPartialCredit&&this.getPartialCreditDisplayInfo())),n.variableDefinitions&&this.getAnswerSettingsSection("assessments.canvas.question.calculatedFormula.stepTwo.variableRanges.title",this.getVariablesRange()),this.getAnswerSettingsSection("assessments.canvas.question.calculatedFormula.stepTwo.variableSetCount.title",a.default.createElement("div",{className:`${t.CLASS_PREFIX}__answer-set-count`},n.variableSetCount)))},this.state={isAnswerSettingsExpanded:!1}}render(){var e;const{question:s,localize:n}=this.props,{isAnswerSettingsExpanded:i}=this.state,r=`calculated-question-readonly-answer-settings-toggle_${s.id}`,u=i?"hideSettingsText":"showSettingsText";return a.default.createElement("div",{className:t.CLASS_PREFIX},a.default.createElement(p.default,{bbml:null===(e=s.questionText)||void 0===e?void 0:e.rawText,id:`${s.id}-read-preview`,isReadOnly:!0}),a.default.createElement("img",{className:`${t.CLASS_PREFIX}__formula-image`,src:s.mathMLImageURL,alt:s.mathMLImageAltText}),a.default.createElement(o.AnalyticsTypography,{component:"h4",variant:"h4"},a.default.createElement("button",{className:`${t.CLASS_PREFIX}__answer-settings-toggle-button`,onClick:()=>{this.setState(e=>({isAnswerSettingsExpanded:!e.isAnswerSettingsExpanded}))},type:"button","aria-label":n.translate(`${h}.answerSettingsToggleButton.ariaLabel`),"aria-expanded":i,"aria-controls":i?r:void 0},a.default.createElement("span",null,n.translate(`${h}.answerSettingsToggleButton.${u}`)),i?a.default.createElement(l.ArrowUp,null):a.default.createElement(l.ArrowDown,null))),this.state.isAnswerSettingsExpanded&&this.getAnswerSettingsContent(r),a.default.createElement(d.AutomatedQuestionFeedbackRead,{className:`${t.CLASS_PREFIX}__automated-feedback`,question:s}))}}t.BaseCalculatedFormulaQuestionRead=f,t.default=i.localizedComponentWrapper(f)},umMl:function(e,t,s){"use strict";s.r(t)},"vN+o":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("2yjE")),o=n.__importDefault(s("RtIR"));t.getPluggableQuestionHeaderProps=(e,t)=>{var s;const{alignedGoals:n,canEnterEditMode:a,customQuestionHeader:i,deleteQuestion:r,disableFocus:l,disableInteraction:u,editMode:c,focusTitle:d,hasQuestionEditPermissions:p,hasSubmissions:m,localize:h,openGoals:f,question:g,questionTitle:E,startEditMode:_}=e,b=o.default("goal",g,E);return{alignedGoals:n,analyticsId:"assessments.canvas.question.header",canEnterEditMode:a,deleteQuestion:r,disableFocus:l,disableInteraction:u,editMode:c,focusTitle:d,goalAriaLabel:h.translate(b.string,{relatedContent:b.relation}),hasAlignedGoals:n&&n.length>0,hasQuestionEditPermissions:p,hasSubmissions:m,hideEditPoints:g.externallyReferencedQuestion,header:i,hideFullCreditCheckbox:!1,id:null!==(s=g.id)&&void 0!==s?s:"",onPointsClick:_,onQuestionChange:t,openGoals:f,points:g.points,question:g,questionTitle:E,startEditMode:_}},t.default=e=>a.default.createElement(a.default.Fragment,null,e.header?e.header(e):a.default.createElement(i.default,Object.assign({},e)))},vUO3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importDefault(s("ERkP")),a=s("9OUN"),i=s("JfV0"),o=s("uDfI"),r=s("8unJ"),l=s("TUnR");class u extends n.default.Component{constructor(e){super(e),this.onFtueDismiss=()=>{const{ftueKey:e,ftuePreference:t,persistUserPreference:s}=this.props;s({key:e,value:(t||{key:e,value:0}).value+1})},this.state={isShowingFtue:!1}}UNSAFE_componentWillMount(){const{ftueKey:e,loadUserPreference:t}=this.props;t({key:e})}UNSAFE_componentWillReceiveProps(e){const t=!(e.isLoading||e.ftuePreference&&0!==e.ftuePreference.value);this.setState(()=>({isShowingFtue:t}))}render(){const{ftueElement:e,ftueMessageKey:t,localize:s}=this.props;if(this.state.isShowingFtue){const a=s.translate("assessments.common.button.close");return n.default.createElement(l.GuidanceTeachingBubble,{componentKey:t,targetElement:e,onDismiss:this.onFtueDismiss,closeButtonAriaLabel:a,analyticsId:"assessments.common.button.close"},s.translate(t))}return null}}t.Ftue=u;const c=o.connect((e,t)=>({ftuePreference:i.select.userPreference.getUserPreferenceByKey(e,t.ftueKey),isLoading:i.select.userPreference.isUserPreferenceLoading(e)}),e=>a.bindActionCreators({loadUserPreference:i.actions.userPreference.loadUserPreference,persistUserPreference:i.actions.userPreference.persistUserPreference},e))(u);t.default=r.localizedComponentWrapper(c)},vu2V:function(e,t,s){"use strict";s.r(t)},wNNv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("ERkP")),i=s("76kz"),o=s("t3aq"),r=s("t9Ny"),l=s("0x+l"),u=s("AY8y"),c=s("JfV0"),d=n.__importDefault(s("PCGI")),p=s("gTAB"),m=n.__importDefault(s("ZfLe")),h=n.__importStar(s("AiU9")),f=n.__importStar(s("OPED")),g=s("b0Dq"),E=s("gk+Q"),_=s("aPd7"),b=s("P5AP"),y=s("Vng8");s("in1o");class C extends a.Component{constructor(e){var t;super(e),this.setupFileAttachmentMenuOptions=()=>{const{ally:e,localize:t,question:s}=this.props;if(this.isFileAttachment&&this.fileViewer){const n=this.props.dropDownMenuOptionsOverrides||[],i=this.fileViewer._setupContextMenu().items.filter(e=>-1!==["viewFile","downloadFile"].indexOf(e.key));e.isAvailable&&(i.push({key:"instructorfeedback",icon:a.default.createElement(l.AllyScore,null),name:t.translate("assessments.canvas.question.overflowOptions.viewAxFeedback"),additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":s.id,"data-ally-invoke":"instructorfeedback"},style:{display:"none"}}),i.push({key:"alternativeformats",icon:a.default.createElement(l.AllyDownload,null),name:t.translate("assessments.canvas.question.overflowOptions.alternativeFormats"),additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":s.id,"data-ally-invoke":"alternativeformats"},style:{display:"none"}})),this.setState({overflowMenuOptionOverrides:n.concat(i)})}},this.onQuestionChange=(e,t,s)=>{this.props.onQuestionChange(e,(e,t)=>y.hasPresentationQuestionChanged(e,t),t,s)},this.saveFileSettings=e=>{this.setState(()=>({isShowingFileSettingsDialog:!1}));const{resourceUrl:t}=e,s=E.convertSettingsToBbfile(e),n=E.prepareFileMetadata(t,s),a={...this.props.question,questionText:{rawText:_.createFileLink(n)}};this.props.onQuestionChange(a,(e,t)=>y.hasPresentationQuestionChanged(e,t),this.props.onQuestionSave,!1)},this.hideFileSettingsDialog=()=>{this.setState(()=>({isShowingFileSettingsDialog:!1}))},this.startEditMode=()=>{const{startEditMode:e}=this.props;this.isFileAttachment?this.setState(()=>({isShowingFileSettingsDialog:!0})):e()},this.getFileViewerWidgets=()=>{const{localize:e,question:t}=this.props;return a.default.createElement("div",{className:"presentation-only__file-content__widget-wrapper"},a.default.createElement("span",{className:"presentation-only__file-content__widget-wrapper__score-indicator","data-ally-content-ref":t.id,"data-ally-show":"instructorfeedback"},a.default.createElement(o.AllyWidget,{contentRef:t.id,widgetType:o.WidgetType.ScoreIndicator})),a.default.createElement("span",{className:"presentation-only__file-content__widget-wrapper__alt-formats","data-ally-content-ref":t.id,"data-ally-show":"alternativeformats"},a.default.createElement(o.AllyWidget,{contentRef:t.id,widgetType:o.WidgetType.AlternativeFormats,ariaLabel:e.translate("assessments.canvas.question.overflowOptions.alternativeFormats")})))},this.renderFile=()=>{var e,t,s;const{question:n,ally:l}=this.props,c=g.getFileViewerPropsArray(n),{file:d}=c[0],p={...n.id?{"data-ally-content-id":n.id}:null,...this.xythosId?{"data-ally-file-eid":this.xythosId}:null,...this.resourceUrl?{"data-ally-file-preview-url":this.resourceUrl}:null},m=i.isImageFile(i.getMediaType(d))&&i.canFileBeRenderedInline(d)&&(i.isFileDisplayedInline(d)||this.state.isMediaPreviewVisible);return a.default.createElement("div",{className:"presentation-only__file-content"},!m&&a.default.createElement(o.AllyContentId,{contentId:null!==(e=n.id)&&void 0!==e?e:"",fileId:null!==(t=this.xythosId)&&void 0!==t?t:"",filePreviewUrl:null!==(s=this.resourceUrl)&&void 0!==s?s:""}),a.default.createElement(r.FileViewer,Object.assign({},c[0],{ref:e=>{this.fileViewer=null!=e?e.wrappedComponent:null},widgets:l.isAvailable&&this.getFileViewerWidgets(),inlineMediaAdditionalAttributes:m?p:{},onToggleMediaPreview:e=>this.setState({isMediaPreviewVisible:e}),analyticsId:"assessment.question.presentation.fileViewer"})),a.default.createElement(u.FilePropertyDialog,{file:d,hidden:!this.state.isShowingFileSettingsDialog,onCancel:this.hideFileSettingsDialog,onSave:this.saveFileSettings,analyticsId:"assessment.question.presentation.fileDialog"}))},this.renderText=()=>a.default.createElement(f.default,Object.assign({},f.getQuestionTextProps(this.props,this.onQuestionChange))),this.state={isShowingFileSettingsDialog:!1,overflowMenuOptionOverrides:[],isMediaPreviewVisible:!1};const{question:s,ally:n}=this.props;this.isFileAttachment=c.Questions.isFileAttachment(s);let d=[];this.isFileAttachment&&(d=g.getFileViewerPropsArray(s)),this.isFileAttachment&&1===d.length&&(this.resourceUrl=null!==(t=d[0].file.resourceUrl)&&void 0!==t?t:"",this.xythosId=n.service.getXythosIdFromContentFileUrl(this.resourceUrl),n.isAvailable&&n.service.update(n.contentId,this.xythosId))}componentDidUpdate(e){const{editMode:t,question:s,setActiveEditorId:n}=this.props,{editMode:a}=e;p.EditModeEnum.INACTIVE===a&&p.EditModeEnum.ACTIVE===t&&s.id&&n(s.id)}UNSAFE_componentWillMount(){this.setupFileAttachmentMenuOptions()}render(){const{editMode:e,question:t}=this.props;return a.default.createElement("div",{className:"presentation-only"},a.default.createElement(d.default,{editMode:e,question:t},a.default.createElement(h.default,Object.assign({},h.getQuestionControlProps(this.props),{dropDownMenuOptionsOverrides:this.state.overflowMenuOptionOverrides,updateDropdownMenuOptions:this.setupFileAttachmentMenuOptions,startEditMode:this.startEditMode})),this.isFileAttachment?this.renderFile():this.renderText()))}}t.PresentationOnly=C;const w=m.default(b.withAlly(C));t.default=w},wXu7:function(e,t,s){"use strict";s.r(t)},xWTz:function(e,t,s){"use strict";s.r(t)},xyjg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importStar(s("nsO7")),i=s("MC1S"),o=s("JfV0"),r=s("8unJ"),l=n.__importDefault(s("ERkP")),u=n.__importDefault(s("RtIR")),c=s("j9WP"),d=n.__importDefault(s("On2X")),p=s("2yjE"),m=s("0x+l");s("jLgm");class h extends l.default.Component{constructor(e){super(e),this.checkbox=null,this.onSelectQuestion=()=>{const{onSelectQuestion:e,question:t,selected:s}=this.props;e(t.id,s)},this.toggleExpanded=()=>this.setState(e=>({expanded:!e.expanded})),this.getToggleButtonAriaLabel=()=>{const e=u.default("toggleView",this.props.question,null,"questionPicker");return this.props.localize.translate(e.string,{relatedContent:e.relation})},this.getQuestionTitle=(e,t)=>{let s=`questionPicker.typeLabels.${e.questionType}`;return e.subType&&(s+=`.${e.subType}`),t.translate(s)},this.state={expanded:!1}}componentDidUpdate(){this.checkbox&&this.props.focused&&this.checkbox.focus()}render(){const{courseId:e,question:t,localize:s,selected:n,sourceHeaderId:r,localizationPrefix:u}=this.props,{expanded:h}=this.state,f=o.Questions.isPresentationOnly(t),g=this.getQuestionTitle(t,s),E=h?"--expanded":"--collapsed",_=`selectable-question${t.id}`,b=`selectable-question-wrapper${t.id}`,y=`bb-editor${t.id} ${r} `,C=`${p.QUESTION_TITLE_ID_PREFIX}${t.id}`;return l.default.createElement("div",{id:_,className:`selectable-question selectable-question${E}`},l.default.createElement(i.Checkbox,{className:"selectable-question__checkbox",checked:n,onChange:this.onSelectQuestion,ariaLabelledBy:y,ariaDescribedBy:C,componentRef:e=>{this.checkbox=e},analyticsId:"selectableQuestion.checkbox"}),l.default.createElement("div",{id:b,className:"selectable-question__question-wrapper"},f&&l.default.createElement("div",{className:"question-header"},l.default.createElement("h3",{id:`${p.QUESTION_TITLE_ID_PREFIX}${t.id}`,className:"question-header__title"},g)),h?l.default.createElement(c.AssessmentCanvasQuestion,Object.assign({courseId:e,question:t,questionTitle:g,alignedGoals:t.alignedGoals,questionBeingEditedId:null,isAnyQuestionDirty:!1,onQuestionEdit:a.noop,onQuestionMadeDirty:a.noop,persistQuestion:a.noop,deleteQuestion:a.noop,openGoals:a.noop,pluginsConfig:{},hasSubmissions:!0,hasAssessmentModifyPermissions:!1,dragButtonAriaLabel:"",dragPointRef:a.noop,disableFocus:!0,localizationPrefix:u},{})):l.default.createElement(d.default,Object.assign({id:t.id,question:this.props.question,questionTitle:f?null:g},{}))),l.default.createElement(i.IconButton,{onClick:this.toggleExpanded,className:`selectable-question__question-toggle selectable-question__question-toggle${E}`,icon:l.default.createElement(m.ArrowDown,null),"aria-labelledby":y,"aria-expanded":h,"aria-controls":b,analyticsId:"selectableQuestion.toggle.button"}))}}t.UnwrappedSelectableQuestion=h,t.default=r.localizedComponentWrapper(h)},xzbH:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K").__importStar(s("ERkP")),a=s("8unJ"),i=s("JfV0"),o=s("MC1S"),r=s("caKH");s("BXTk");class l extends n.Component{constructor(e){super(e),this.onPatternChange=e=>{this.state.patternHasBeenTested&&this.setState({answerValue:"",answerHasBeenTested:!1,patternHasBeenTested:!1,answerMatchesPattern:!1,patternIsValid:!1}),this.setState({patternValue:e})},this.onAnswerChange=e=>{this.setState({answerMatchesPattern:!1,answerHasBeenTested:!1,answerValue:e})},this.getPatternErrorMessage=()=>this.state.patternHasBeenTested&&!this.state.patternIsValid?this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.patternError"):"",this.getAnswerErrorMessage=()=>this.state.answerHasBeenTested&&!this.state.answerMatchesPattern?this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.answerError"):"",this.cancel=()=>{var e,t;null===(t=(e=this.props).onClose)||void 0===t||t.call(e)},this.save=()=>{var e,t,s,n;null===(t=(e=this.props).onSave)||void 0===t||t.call(e,this.state.patternValue),null===(n=(s=this.props).onClose)||void 0===n||n.call(s)},this.testPattern=()=>{var e,t;i.checkPattern(null!==(e=this.props.courseId)&&void 0!==e?e:"",null!==(t=this.props.assessmentId)&&void 0!==t?t:"",this.state.patternValue).then(e=>{this.setState({patternIsValid:e.result,patternHasBeenTested:!0})})},this.testAnswer=()=>{var e,t;i.checkPatternAnswer(null!==(e=this.props.courseId)&&void 0!==e?e:"",null!==(t=this.props.assessmentId)&&void 0!==t?t:"",this.state.patternValue,this.state.answerValue).then(e=>{this.setState({answerMatchesPattern:e.result,answerHasBeenTested:!0})})},this.getHelpLinkElement=()=>{const e=`https://help.blackboard.com/001_569${this.props.currentLocale&&"en"!==this.props.currentLocale?this.props.currentLocale.replace("-","_"):"en_US"}`;return n.default.createElement(o.Link,{href:e,"aria-label":this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.helpLinkAriaLabel"),target:"_blank",analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.helpLink"},this.props.localize.translate("assessments.canvas.question.fimb.patternMatchHelper.helpLink"))},this.state={patternValue:this.props.initialPatternValue||"",answerValue:"",patternIsValid:!1,answerMatchesPattern:!1,patternHasBeenTested:!1,answerHasBeenTested:!1}}render(){const e=this.props.localize.translate;return n.default.createElement(r.UltraModalDialog,{hidden:!1,className:"test-pattern",analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.dialog",dialogContentProps:{type:o.DialogType.fullHeaderFooter,title:e("assessments.canvas.question.fimb.patternMatchHelper.title"),showCloseButton:!1}},n.default.createElement("div",{className:"test-pattern__section-wrapper test-pattern__section-wrapper--first"},n.default.createElement("div",{className:"test-pattern__text-field"},n.default.createElement(o.TextField,{label:e("assessments.canvas.question.fimb.patternMatchHelper.patternLabel"),value:this.state.patternValue||"",required:!0,valid:this.state.patternHasBeenTested&&this.state.patternIsValid,onChanged:this.onPatternChange,errorMessage:this.getPatternErrorMessage(),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.patternLabel"})),n.default.createElement("div",{className:"test-pattern__button"},n.default.createElement(o.Button,{disabled:0===this.state.patternValue.length||this.state.patternHasBeenTested,onClick:this.testPattern,analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.testButton"},e("assessments.canvas.question.fimb.patternMatchHelper.testButton")))),this.state.patternHasBeenTested&&this.state.patternIsValid&&n.default.createElement("div",{className:"test-pattern__section-wrapper"},n.default.createElement("div",{className:"test-pattern__text-field"},n.default.createElement(o.TextField,{label:e("assessments.canvas.question.fimb.patternMatchHelper.answerLabel"),valid:this.state.answerMatchesPattern,required:!0,onChanged:this.onAnswerChange,errorMessage:this.getAnswerErrorMessage(),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.answerLabel"})),n.default.createElement("div",{className:"test-pattern__button"},n.default.createElement(o.Button,{disabled:0===this.state.answerValue.length||this.state.answerHasBeenTested,onClick:this.testAnswer,analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.patternHasBeenTested.testButton"},e("assessments.canvas.question.fimb.patternMatchHelper.testButton")))),n.default.createElement(o.DialogFooter,{helpLink:this.getHelpLinkElement()},n.default.createElement(o.DefaultButton,{onClick:this.cancel,text:e("assessments.canvas.question.fimb.patternMatchHelper.cancelButton"),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.cancelButton"}),n.default.createElement(o.PrimaryButton,{disabled:!this.state.patternHasBeenTested||!this.state.patternIsValid,onClick:this.save,text:e("assessments.canvas.question.fimb.patternMatchHelper.saveButton"),analyticsId:"assessments.canvas.question.fimb.patternMatchHelper.saveButton"})))}}const u=a.localizedComponentWrapper(l);t.default=u},y3re:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowFeatureAnnouncement=(e,t)=>{var s;return null!==(s=e&&e[t])&&void 0!==s&&s};t.FeatureAnnouncementsHelper=class{constructor(e){this.questions=e}getQuestionFeatureAnnouncements(){return{}}}},yETo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("Agfx");t.useStyles=n.makeStyles(e=>{var t;return n.createStyles({base:{marginTop:"24px"},contentSection:{paddingTop:"6px"},contentToggle:{borderBottom:`1px solid ${null===(t=e.palette.border)||void 0===t?void 0:t.main}`,marginBottom:"10px",padding:"12px 0",width:"100%",display:"flex",justifyContent:"space-between"},sectionHeader:{},sectionTitle:{}})})},ytrv:function(e,t,s){"use strict";s.r(t)},yxoV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("gTAB"),o=n.__importDefault(s("O55a")),r=n.__importDefault(s("C9HY"));t.default=({editMode:e,onQuestionChange:t,question:s,setActiveEditorId:n,activeEditorId:l,pluginsConfig:u})=>a.default.createElement(a.default.Fragment,null,i.EditModeEnum.INACTIVE===e?a.default.createElement(o.default,{question:s,pluginsConfig:u}):a.default.createElement(r.default,{onQuestionChange:t,question:s,activeEditorId:l,setActiveEditorId:n,pluginsConfig:u}))},z01z:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=n.__importDefault(s("Pfoe")),o=s("3ZJq");s("OfVW");const r=s("8unJ");t.default=r.localizedComponentWrapper(e=>{const{answersInfo:t,answersInfoLabel:s,localize:n,question:r,questionTextClassName:l}=e,u="assessments.canvas.question.trueFalse";return a.default.createElement("div",{className:"readonly-true-false-question"},a.default.createElement("div",{className:l},a.default.createElement(i.default,{id:r.id,bbml:r.questionText.rawText,isReadOnly:!0,refreshBbml:!0})),a.default.createElement("div",{className:"readonly-answer__container"},t&&a.default.createElement("span",{className:"readonly-answer__info-label readonly-answer__info"},s)),a.default.createElement("ol",{className:"readonly-true-false-question__list"},a.default.createElement("li",{className:"readonly-true-false-question__li readonly-answer__container"},a.default.createElement("div",{className:"readonly-true-false-question__answers readonly-answer__main"},a.default.createElement("span",{className:"readonly-true-false-question__text"},n.translate(`${u}.${r.answerType}.true`)),r.answer&&a.default.createElement("span",{className:"readonly-true-false-question__correct"},n.translate(`${u}.correctAnswer`))),t&&a.default.createElement("div",{className:"readonly-true-false-question__answers-info readonly-answer__info"},t[0])),a.default.createElement("li",{className:"readonly-true-false-question__li readonly-answer__container"},a.default.createElement("div",{className:"readonly-true-false-question__answers readonly-answer__main"},a.default.createElement("span",{className:"readonly-true-false-question__text"},n.translate(`${u}.${r.answerType}.false`)),!r.answer&&a.default.createElement("span",{className:"readonly-true-false-question__correct"},n.translate(`${u}.correctAnswer`))),t&&a.default.createElement("div",{className:"readonly-true-false-question__answers-info readonly-answer__info"},t[1]))),a.default.createElement(o.AutomatedQuestionFeedbackRead,{question:r}))})},z8be:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s("D57K"),a=n.__importDefault(s("ERkP")),i=s("8unJ"),o=s("6GOo"),r=s("M0dR"),l=n.__importDefault(s("O55a")),u=n.__importDefault(s("O94r")),c=s("PBaB"),d=s("DRH8");t.CalculatedNumericQuestionRead=i.localizedComponentWrapper(e=>{const{localize:t,pluginsConfig:s,question:n,currentLocale:i,babelfishFormatInstance:p}=e,m=o.useStyles(e),h=`calculated-numeric-question-read-tolerance-title_${n.id}`,f=c.getAnswerOrToleranceDisplayValue(i,n.answerValue,p),g=c.getAnswerOrToleranceDisplayValue(i,n.toleranceValue,p);return a.default.createElement("div",{className:"js-calculated-numeric-question-read"},a.default.createElement(r.AnalyticsTypography,{dir:d.getDirAttributeValue(i,!0),component:"div",className:u.default(m.answerContainer,"js-answer-value")},f),c.isToleranceSet(n)?a.default.createElement("div",{className:u.default(m.toleranceContainer,"js-tolerance-container")},a.default.createElement(r.AnalyticsTypography,{id:h,component:"label",variant:"h4"},t.translate("assessments.canvas.question.calculatedNumeric.tolerance.label")),a.default.createElement(r.AnalyticsTypography,{className:"js-tolerance-value",component:"div",variant:"body1","aria-labelledby":h},t.translate("assessments.canvas.question.calculatedNumeric.tolerance.value",{toleranceValue:g}))):null,a.default.createElement(l.default,{question:n,pluginsConfig:s}))}),t.default=t.CalculatedNumericQuestionRead},zKpB:function(e,t,s){"use strict";s.r(t)},ztHM:function(e,t,s){"use strict";s.r(t)}}]);